<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Blogging Like a Hacker | 前端日志</title>
    <meta name="description" content="土豆和土豆丝的学习记录">
    <link rel="icon" href="/blog/favorite.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.244ca03c.css" as="style"><link rel="preload" href="/blog/assets/js/app.2b65cc84.js" as="script"><link rel="preload" href="/blog/assets/js/2.9c8da183.js" as="script"><link rel="preload" href="/blog/assets/js/8.bbc14bdf.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.f4b9808b.js"><link rel="prefetch" href="/blog/assets/js/11.17753fa8.js"><link rel="prefetch" href="/blog/assets/js/12.eed41aa4.js"><link rel="prefetch" href="/blog/assets/js/13.2cbdc8f2.js"><link rel="prefetch" href="/blog/assets/js/14.c71b01e9.js"><link rel="prefetch" href="/blog/assets/js/15.4b7c71de.js"><link rel="prefetch" href="/blog/assets/js/16.55b235e6.js"><link rel="prefetch" href="/blog/assets/js/17.611a1b55.js"><link rel="prefetch" href="/blog/assets/js/18.42680970.js"><link rel="prefetch" href="/blog/assets/js/19.6b0ff29f.js"><link rel="prefetch" href="/blog/assets/js/20.49fb4f8f.js"><link rel="prefetch" href="/blog/assets/js/21.5490e3f0.js"><link rel="prefetch" href="/blog/assets/js/22.0cbe4eb6.js"><link rel="prefetch" href="/blog/assets/js/23.0d6f1752.js"><link rel="prefetch" href="/blog/assets/js/24.4207d03c.js"><link rel="prefetch" href="/blog/assets/js/25.047d0f1e.js"><link rel="prefetch" href="/blog/assets/js/26.8143fab4.js"><link rel="prefetch" href="/blog/assets/js/27.d4112cc7.js"><link rel="prefetch" href="/blog/assets/js/28.883ca809.js"><link rel="prefetch" href="/blog/assets/js/29.eb0a0979.js"><link rel="prefetch" href="/blog/assets/js/3.d2b25e93.js"><link rel="prefetch" href="/blog/assets/js/30.dc4a32e4.js"><link rel="prefetch" href="/blog/assets/js/31.bb74dcc9.js"><link rel="prefetch" href="/blog/assets/js/32.19b9b2ad.js"><link rel="prefetch" href="/blog/assets/js/33.1c5b491a.js"><link rel="prefetch" href="/blog/assets/js/34.4449dbb9.js"><link rel="prefetch" href="/blog/assets/js/35.de6137d1.js"><link rel="prefetch" href="/blog/assets/js/36.f90f55dc.js"><link rel="prefetch" href="/blog/assets/js/37.6774285b.js"><link rel="prefetch" href="/blog/assets/js/38.40333629.js"><link rel="prefetch" href="/blog/assets/js/39.93e0dfab.js"><link rel="prefetch" href="/blog/assets/js/4.31f14a68.js"><link rel="prefetch" href="/blog/assets/js/40.ae2ff175.js"><link rel="prefetch" href="/blog/assets/js/41.18cb6f45.js"><link rel="prefetch" href="/blog/assets/js/42.d18f15b7.js"><link rel="prefetch" href="/blog/assets/js/43.93d1cf0f.js"><link rel="prefetch" href="/blog/assets/js/44.2e68a699.js"><link rel="prefetch" href="/blog/assets/js/45.294aa832.js"><link rel="prefetch" href="/blog/assets/js/46.4173b20d.js"><link rel="prefetch" href="/blog/assets/js/47.4bcbe3f2.js"><link rel="prefetch" href="/blog/assets/js/48.16b7b98a.js"><link rel="prefetch" href="/blog/assets/js/49.89a9d560.js"><link rel="prefetch" href="/blog/assets/js/5.9f0256c8.js"><link rel="prefetch" href="/blog/assets/js/50.3d1fcdf9.js"><link rel="prefetch" href="/blog/assets/js/51.33050d1b.js"><link rel="prefetch" href="/blog/assets/js/52.fe886e37.js"><link rel="prefetch" href="/blog/assets/js/53.a237ef53.js"><link rel="prefetch" href="/blog/assets/js/54.0817b5a4.js"><link rel="prefetch" href="/blog/assets/js/55.34909e91.js"><link rel="prefetch" href="/blog/assets/js/56.833686de.js"><link rel="prefetch" href="/blog/assets/js/57.ee3140fa.js"><link rel="prefetch" href="/blog/assets/js/58.a7e7d812.js"><link rel="prefetch" href="/blog/assets/js/6.9afed123.js"><link rel="prefetch" href="/blog/assets/js/7.b09c9cf4.js"><link rel="prefetch" href="/blog/assets/js/9.2f86661d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.244ca03c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>广度知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>深度知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/深度知识/css-variable实战.html" class="active sidebar-link">css-variable实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/深度知识/css-variable实战.html#什么是css变量" class="sidebar-link">什么是css变量</a></li><li class="sidebar-sub-header"><a href="/blog/深度知识/css-variable实战.html#实战应用" class="sidebar-link">实战应用</a></li><li class="sidebar-sub-header"><a href="/blog/深度知识/css-variable实战.html#兼容性处理" class="sidebar-link">兼容性处理</a></li><li class="sidebar-sub-header"><a href="/blog/深度知识/css-variable实战.html#参考文章" class="sidebar-link">参考文章</a></li></ul></li><li><a href="/blog/深度知识/vue实现原理.html" class="sidebar-link">vue实现原理</a></li><li><a href="/blog/深度知识/vue生命周期.html" class="sidebar-link">vue生命周期</a></li><li><a href="/blog/深度知识/从0开始手写一个promise.html" class="sidebar-link">从0开始手写一个promise</a></li><li><a href="/blog/深度知识/前端性能优化.html" class="sidebar-link">前端性能优化</a></li><li><a href="/blog/深度知识/发布订阅模式.html" class="sidebar-link">发布订阅模式</a></li><li><a href="/blog/深度知识/正则速查表.html" class="sidebar-link">正则速查表</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><p>现在css预处理器是项目的标配，感觉用不到 <code>css variable</code> 这个特性，之前对它的了解大概局限于跟 <code>:root{}</code> 有关系，但是直到看到vantui小程序文档时看到这样的介绍：</p> <p><img src="/blog/assets/img/image.b8ec51c7.png" alt="image.png"></p> <p>貌似是一座小金矿...</p> <h2 id="什么是css变量"><a href="#什么是css变量" class="header-anchor">#</a> 什么是css变量</h2> <blockquote><p>带有前缀--的属性名，比如--example--name，表示的是带有值的自定义属性，其可以通过 var 函数在全文档范围内复用的</p></blockquote> <p>一般来说css变量（CSS variable）要与 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/var" target="_blank" rel="noopener noreferrer">var()函数<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 一起使用</p> <h3 id="css-variable"><a href="#css-variable" class="header-anchor">#</a> CSS variable</h3> <p>声明变量的时候，变量名前面要加两根连词线（--），它们与color、font-size等正式属性没有什么不同，只是没有默认含义。所以 CSS 变量（CSS variable）又叫做&quot;CSS 自定义属性&quot;（CSS custom properties）。因为变量与自定义的 CSS 属性其实是一回事。</p> <h3 id="var"><a href="#var" class="header-anchor">#</a> var()</h3> <blockquote><p>var()函数可以代替元素中任何属性中的值的任何部分。var()函数不能作为属性名、选择器或者其他除了属性值之外的值。（这样做通常会产生无效的语法或者一个没有关联到变量的值。）</p></blockquote> <p>方法的第一个参数是要替换的自定义属性的名称。函数的可选第二个参数用作回退值。如果第一个参数引用的自定义属性无效，则该函数将使用第二个值: <code>var( &lt;custom-property-name&gt; , &lt;declaration-value&gt;? )</code></p> <h3 id="简单的使用"><a href="#简单的使用" class="header-anchor">#</a> 简单的使用</h3> <ol><li>首先要定义变量，如: <code>:root { --main-theme: #89a; }</code>，但是声明后没有默认含义，可以理解为预处理器定义的变量，没被使用就没有意义。。。</li> <li>然后需要在需要它的标签样式内使用：<code>div { background: var(--main-theme); }</code> <blockquote><p>也可以用在行内样式中 <code>&lt;div style=&quot;background: var(--main-theme);&quot;&gt;</code></p></blockquote></li></ol> <div class="language- extra-class"><pre class="language-text"><code>:root {
  --main-theme: #89a;
}
div {
  background: var(--main-theme);
}
</code></pre></div><h3 id="与javascript通信"><a href="#与javascript通信" class="header-anchor">#</a> 与JavaScript通信</h3> <p>JS中操作CSS变量常用的API：</p> <ul><li>读取变量：<code>elem.style.getPropertyValue()</code></li> <li>设置变量：<code>elem.style.setProperty()</code></li> <li>删除变量：<code>elem.style.removeProperty()</code></li></ul> <p>https://codepen.io/justwe7/pen/mdPjdXy</p> <h2 id="实战应用"><a href="#实战应用" class="header-anchor">#</a> 实战应用</h2> <h3 id="精简代码，减少冗余"><a href="#精简代码，减少冗余" class="header-anchor">#</a> 精简代码，减少冗余</h3> <h4 id="修改某些色块的不同状态"><a href="#修改某些色块的不同状态" class="header-anchor">#</a> 修改某些色块的不同状态</h4> <p><img src="data:image/png;base64,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" alt="image14ebf.png"></p> <p>假如某个块有不同的状态，如果正常写css代码，可能需要样式覆盖来指定不同的颜色，单一的属性还好，要是background这种复合属性的写起来就感觉不是很语义化：</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>default<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box success<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>succes<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>box error<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>error<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p><strong>使用css样式覆盖：</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> #ccc <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>'https://kano.guahao.cn/JsT348336686'<span class="token punctuation">)</span></span> no-repeat center / contain<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #777<span class="token selector">;
  &amp;.success</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f0f9ef<span class="token punctuation">;</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #7ebb7a<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;.error</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #fff5f5<span class="token punctuation">;</span>
    <span class="token property">border-color</span><span class="token punctuation">:</span> #f78b8b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p><strong>使用css变量写起来就很明了了：</strong></p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.box</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
  <span class="token property">--bg-color</span><span class="token punctuation">:</span> #ccc<span class="token punctuation">;</span>
  <span class="token property">--border-color</span><span class="token punctuation">:</span> #777<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--bg-color<span class="token punctuation">)</span> <span class="token url"><span class="token function">url</span><span class="token punctuation">(</span>'https://kano.guahao.cn/JsT348336686'<span class="token punctuation">)</span></span> no-repeat center / contain<span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid <span class="token function">var</span><span class="token punctuation">(</span>--border-color<span class="token punctuation">)</span><span class="token selector">;
  &amp;.success</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">--bg-color</span><span class="token punctuation">:</span> #f0f9ef<span class="token punctuation">;</span>
    <span class="token property">--border-color</span><span class="token punctuation">:</span> #7ebb7a<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;.error</span> <span class="token punctuation">{</span>
    <span class="token property">margin-top</span><span class="token punctuation">:</span> 10px<span class="token punctuation">;</span>
    <span class="token property">--bg-color</span><span class="token punctuation">:</span> #fff5f5<span class="token punctuation">;</span>
    <span class="token property">--border-color</span><span class="token punctuation">:</span> #f78b8b<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h4 id="优化媒询的代码"><a href="#优化媒询的代码" class="header-anchor">#</a> 优化媒询的代码</h4> <p>使用媒体查询的时候，我们需要将要响应式改变的属性全部重新罗列一遍</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">.main</span> <span class="token punctuation">{</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>
    <span class="token property">margin-left</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 1440px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">.main</span> <span class="token punctuation">{</span>
        <span class="token property">width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>使用变量进行优化</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--main-width</span><span class="token punctuation">:</span> 1000px<span class="token punctuation">;</span>
  <span class="token property">--left-margin</span><span class="token punctuation">:</span> 100px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token selector">.main</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--main-width<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">margin-left</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--left-margin<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
 
<span class="token atrule"><span class="token rule">@media</span> screen and <span class="token punctuation">(</span><span class="token property">min-width</span><span class="token punctuation">:</span> 1440px<span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
    <span class="token selector">:root</span> <span class="token punctuation">{</span>
      <span class="token property">--main-width</span><span class="token punctuation">:</span> 800px<span class="token punctuation">;</span>
      <span class="token property">--left-margin</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看上好像是代码多了，多了一层定义的环节，只是示例的 CSS 改变的样式属性较少，当媒体查询的数量达到一定程度，使用 CSS 变量从代码量及美观程度而言都是更好的选择</p> <h3 id="与calc配合"><a href="#与calc配合" class="header-anchor">#</a> 与calc配合</h3> <p>实现一个缩放的效果</p> <p>https://codepen.io/justwe7/pen/WNwKyom</p> <blockquote><p>与scale相同爽的写法，样式覆盖相同的重排。。。</p></blockquote> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--scale</span><span class="token punctuation">:</span> 1<span class="token punctuation">;</span>
  <span class="token property">--width</span><span class="token punctuation">:</span> 80px<span class="token punctuation">;</span>
  <span class="token property">--height</span><span class="token punctuation">:</span> 200px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.container</span> <span class="token punctuation">{</span>
  <span class="token property">width</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--scale<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--width<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--scale<span class="token punctuation">)</span> * <span class="token function">var</span><span class="token punctuation">(</span>--height<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">border</span><span class="token punctuation">:</span> 1px solid #000<span class="token punctuation">;</span>
  <span class="token property">transition</span><span class="token punctuation">:</span> all 1s<span class="token punctuation">;</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> yellowgreen<span class="token selector">;
  &amp;:hover</span><span class="token punctuation">{</span>
    <span class="token property">--scale</span><span class="token punctuation">:</span> 2<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token selector">&amp;:active</span><span class="token punctuation">{</span>
    <span class="token property">--scale</span><span class="token punctuation">:</span> 0.5<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="与js进行交互"><a href="#与js进行交互" class="header-anchor">#</a> 与js进行交互</h3> <h4 id="修改主题"><a href="#修改主题" class="header-anchor">#</a> 修改主题</h4> <p>css的变量属性是可以通过js修改生效的：<code>setProperty(&quot;--bg-color&quot;, &quot;blue&quot;)</code></p> <p>https://codepen.io/justwe7/pen/mdPjdXy</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--bg-color</span><span class="token punctuation">:</span> #f09<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">body</span> <span class="token punctuation">{</span>
  <span class="token property">background-color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--bg-color<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> n <span class="token operator">=</span> <span class="token number">0</span>
<span class="token keyword">const</span> colors <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'#fa0'</span><span class="token punctuation">,</span> <span class="token string">'#8aa'</span><span class="token punctuation">,</span> <span class="token string">'yellowgreen'</span><span class="token punctuation">,</span> <span class="token string">'#fff'</span><span class="token punctuation">]</span>
document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">'click'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  document<span class="token punctuation">.</span>body<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">&quot;--bg-color&quot;</span><span class="token punctuation">,</span> colors<span class="token punctuation">[</span>n<span class="token operator">%</span>colors<span class="token punctuation">.</span>length<span class="token punctuation">]</span><span class="token punctuation">)</span>
  n<span class="token operator">++</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>在空白区域点击鼠标就可以达到切换主题的效果了，相比之下，scss这类预处理器切换颜色主题的功能做起来就很麻烦了</p> <h4 id="做一个跟随鼠标移动的方块"><a href="#做一个跟随鼠标移动的方块" class="header-anchor">#</a> 做一个跟随鼠标移动的方块</h4> <p>https://codepen.io/chriscoyier/pen/yxVQJG</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">:root</span> <span class="token punctuation">{</span>
  <span class="token property">--mouse-x</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
  <span class="token property">--mouse-y</span><span class="token punctuation">:</span> 0px<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">.mover</span> <span class="token punctuation">{</span>
  <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
  <span class="token property">left</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--mouse-x<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">top</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--mouse-y<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token property">width</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span>
  <span class="token property">background</span><span class="token punctuation">:</span> red<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">let</span> root <span class="token operator">=</span> document<span class="token punctuation">.</span>documentElement<span class="token punctuation">;</span>

root<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;mousemove&quot;</span><span class="token punctuation">,</span> <span class="token parameter">e</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  root<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--mouse-x'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientX <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  root<span class="token punctuation">.</span>style<span class="token punctuation">.</span><span class="token function">setProperty</span><span class="token punctuation">(</span><span class="token string">'--mouse-y'</span><span class="token punctuation">,</span> e<span class="token punctuation">.</span>clientY <span class="token operator">+</span> <span class="token string">&quot;px&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="做一个loading（与预处理器比较）"><a href="#做一个loading（与预处理器比较）" class="header-anchor">#</a> 做一个loading（与预处理器比较）</h4> <p><img src="/blog/assets/img/20200917_215316.7109d713.gif" alt="20200917_215316.gif"></p> <p>一个条形加载条通常由几条线条组成，并且<strong>每条线条对应一个存在不同时延</strong>的相同动画，通过时间差运行相同的动画，从而产生加载效果</p> <div class="language-css extra-class"><pre class="language-css"><code><span class="token comment">/* sass版 */</span>
<span class="token selector">.sass-loading</span> <span class="token punctuation">{</span>
  <span class="token selector">li</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> yellowgreen<span class="token punctuation">;</span>
    <span class="token property">animation</span><span class="token punctuation">:</span> beat 1s ease-in-out infinite<span class="token selector">;
    &amp; + li</span> <span class="token punctuation">{</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token atrule"><span class="token rule">@for</span> $i from 1 through 5</span> <span class="token punctuation">{</span>
      <span class="token selector">&amp;:nth-of-type(#</span><span class="token punctuation">{</span>$i<span class="token punctuation">}</span><span class="token selector">)</span> <span class="token punctuation">{</span>
        <span class="token property">animation-delay</span><span class="token punctuation">:</span> 200ms * $i<span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
<span class="token comment">/* 变量版 */</span>
<span class="token selector">.var-loading</span> <span class="token punctuation">{</span>
  <span class="token selector">li</span> <span class="token punctuation">{</span>
    <span class="token property">display</span><span class="token punctuation">:</span> inline-block<span class="token punctuation">;</span>
    <span class="token property">--time</span><span class="token punctuation">:</span> <span class="token function">calc</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--line-index<span class="token punctuation">)</span> - 1<span class="token punctuation">)</span> * 200ms<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">border-radius</span><span class="token punctuation">:</span> 3px<span class="token punctuation">;</span>
    <span class="token property">width</span><span class="token punctuation">:</span> 6px<span class="token punctuation">;</span>
    <span class="token property">height</span><span class="token punctuation">:</span> 30px<span class="token punctuation">;</span>
    <span class="token property">background-color</span><span class="token punctuation">:</span> #f66<span class="token punctuation">;</span>
    <span class="token property">animation</span><span class="token punctuation">:</span> beat 1.5s ease-in-out <span class="token function">var</span><span class="token punctuation">(</span>--time<span class="token punctuation">)</span> infinite<span class="token selector">;
    &amp; + li</span> <span class="token punctuation">{</span>
        <span class="token property">margin-left</span><span class="token punctuation">:</span> 5px<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>看起来并没有太多的差别，但是要是考虑扩展性，假如线条的个数是可变的（或者是异步的），就需要在css中写一个安全的循环次数，而用变量来写的话不需要担心这个问题，假如用vue这种框架写起来貌似还有点爽~😄</p> <h4 id="做一个有序列表（与预处理器比较）"><a href="#做一个有序列表（与预处理器比较）" class="header-anchor">#</a> 做一个有序列表（与预处理器比较）</h4> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>分块<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>分块<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">&gt;</span></span>分块<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><p>假如使用scss来生成序号，但是列表长度无法预知，也需要尽量写安全（多）的遍历次数来保证样式覆盖：</p> <div class="language-scss extra-class"><pre class="language-scss"><code><span class="token selector">ul,li </span><span class="token punctuation">{</span>
  <span class="token property">list-style</span><span class="token punctuation">:</span> none<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token selector">li </span><span class="token punctuation">{</span>
  <span class="token keyword">@for</span> <span class="token variable">$i</span> <span class="token keyword">from</span> 1 <span class="token keyword">through</span> <span class="token selector">10 </span><span class="token punctuation">{</span>
    &amp;<span class="token punctuation">:</span><span class="token function">nth-of-type</span><span class="token punctuation">(</span><span class="token variable">#{$i}</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token selector">p </span><span class="token punctuation">{</span>
        <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
        <span class="token property">padding-left</span><span class="token punctuation">:</span> 3em<span class="token punctuation">;</span>
        <span class="token selector"><span class="token parent important">&amp;</span>::before </span><span class="token punctuation">{</span>
          <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">'第#{$i}.'</span><span class="token punctuation">;</span>
          <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
          <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
          <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>假如使用vue代码来写的话</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>app<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dl</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dt</span><span class="token punctuation">&gt;</span></span>使用css变量写法<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dt</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dd</span> <span class="token attr-name">v-for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>(i, index) in len<span class="token punctuation">&quot;</span></span> <span class="token attr-name">:</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token selector">`--index: $</span><span class="token punctuation">{</span>index+1<span class="token punctuation">}</span>`</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>分块<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dd</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dl</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">#app</span> <span class="token punctuation">{</span>
  <span class="token selector">dd</span> <span class="token punctuation">{</span>
    <span class="token property">position</span><span class="token punctuation">:</span> relative<span class="token punctuation">;</span>
    <span class="token property">counter-reset</span><span class="token punctuation">:</span> number <span class="token function">calc</span><span class="token punctuation">(</span><span class="token function">var</span><span class="token punctuation">(</span>--index<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token property">padding-left</span><span class="token punctuation">:</span> 3em<span class="token selector">;
    &amp;::before</span> <span class="token punctuation">{</span>
      <span class="token property">content</span><span class="token punctuation">:</span> <span class="token string">&quot;&quot;</span><span class="token function">counter</span><span class="token punctuation">(</span>number<span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token property">position</span><span class="token punctuation">:</span> absolute<span class="token punctuation">;</span>
      <span class="token property">left</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
      <span class="token property">top</span><span class="token punctuation">:</span> 0<span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>至少保证不会多出无用css...</p> <h3 id="用在小程序中"><a href="#用在小程序中" class="header-anchor">#</a> 用在小程序中</h3> <p>原生的 <code>.wxss</code> 不支持css预处理器，万一有视觉变动，全局替换代码还是很恶心的，这个时候使用css变量可以作为很好的补充。</p> <blockquote><p>web开发中顶层变量的key名是:root，小程序使用page</p></blockquote> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">page</span> <span class="token punctuation">{</span> <span class="token comment">/* :root */</span>
  <span class="token property">--main-bg-color</span><span class="token punctuation">:</span> brown<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="兼容性处理"><a href="#兼容性处理" class="header-anchor">#</a> 兼容性处理</h2> <p>对于不支持 CSS 变量的浏览器，可以采用下面的写法</p> <ul><li>样式覆盖</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token selector">a</span> <span class="token punctuation">{</span>
  <span class="token property">color</span><span class="token punctuation">:</span> #7F583F<span class="token punctuation">;</span>
  <span class="token property">color</span><span class="token punctuation">:</span> <span class="token function">var</span><span class="token punctuation">(</span>--primary<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><code>@support</code>命令进行检测</li></ul> <div class="language-css extra-class"><pre class="language-css"><code><span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token property">--a</span><span class="token punctuation">:</span> 0<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/* supported */</span><span class="token punctuation">}</span>
<span class="token atrule"><span class="token rule">@supports</span> <span class="token punctuation">(</span>not <span class="token punctuation">(</span><span class="token property">--a</span><span class="token punctuation">:</span> 0<span class="token punctuation">)</span><span class="token punctuation">)</span></span> <span class="token punctuation">{</span>
  <span class="token comment">/* not supported */</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>JavaScript 也可以检测浏览器是否支持 CSS 变量</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> isSupported <span class="token operator">=</span>
  window<span class="token punctuation">.</span><span class="token constant">CSS</span> <span class="token operator">&amp;&amp;</span>
  window<span class="token punctuation">.</span><span class="token constant">CSS</span><span class="token punctuation">.</span>supports <span class="token operator">&amp;&amp;</span>
  window<span class="token punctuation">.</span><span class="token constant">CSS</span><span class="token punctuation">.</span><span class="token function">supports</span><span class="token punctuation">(</span><span class="token string">'--a'</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">if</span> <span class="token punctuation">(</span>isSupported<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">/* supported */</span>
<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
  <span class="token comment">/* not supported */</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="参考文章"><a href="#参考文章" class="header-anchor">#</a> 参考文章</h2> <ul><li><a href="http://www.ruanyifeng.com/blog/2017/05/css-variables.html" target="_blank" rel="noopener noreferrer">css变量-阮一峰<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://juejin.im/post/6844904084936327182" target="_blank" rel="noopener noreferrer">妙用css变量<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/justwe7/blog/edit/feature/深度知识/css-variable实战.md" target="_blank" rel="noopener noreferrer">纠正错误</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近提交:</span> <span class="time">2/24/2021, 1:59:10 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/广度知识/自动化部署微信小程序.html" class="prev">自动化部署微信小程序</a></span> <span class="next"><a href="/blog/深度知识/vue实现原理.html">vue实现原理</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/blog/assets/js/app.2b65cc84.js" defer></script><script src="/blog/assets/js/2.9c8da183.js" defer></script><script src="/blog/assets/js/8.bbc14bdf.js" defer></script>
  </body>
</html>
