<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>AMD/CMD/CommonJS/UMD | 学习笔记</title>
    <meta name="description" content="记录平时所接触到的知识点">
    
    
    <link rel="preload" href="/assets/css/0.styles.c2144717.css" as="style"><link rel="preload" href="/assets/js/app.264ba1d9.js" as="script"><link rel="preload" href="/assets/js/2.d12215aa.js" as="script"><link rel="preload" href="/assets/js/15.68ca9d46.js" as="script"><link rel="prefetch" href="/assets/js/10.0d17d068.js"><link rel="prefetch" href="/assets/js/11.872832ac.js"><link rel="prefetch" href="/assets/js/12.d597da4b.js"><link rel="prefetch" href="/assets/js/13.685479be.js"><link rel="prefetch" href="/assets/js/14.bdfa49da.js"><link rel="prefetch" href="/assets/js/16.5762fa0d.js"><link rel="prefetch" href="/assets/js/17.3f6883fa.js"><link rel="prefetch" href="/assets/js/18.88f67ec2.js"><link rel="prefetch" href="/assets/js/19.19e217df.js"><link rel="prefetch" href="/assets/js/20.8d680bd2.js"><link rel="prefetch" href="/assets/js/21.5144d2b5.js"><link rel="prefetch" href="/assets/js/22.e86ab87d.js"><link rel="prefetch" href="/assets/js/23.9d7fdf0d.js"><link rel="prefetch" href="/assets/js/24.d6172d3a.js"><link rel="prefetch" href="/assets/js/25.b9fbc0ce.js"><link rel="prefetch" href="/assets/js/26.6ea45017.js"><link rel="prefetch" href="/assets/js/27.b33dd473.js"><link rel="prefetch" href="/assets/js/28.5aa8acb9.js"><link rel="prefetch" href="/assets/js/29.4bd01c6f.js"><link rel="prefetch" href="/assets/js/3.a4ec70ce.js"><link rel="prefetch" href="/assets/js/30.b49ee00d.js"><link rel="prefetch" href="/assets/js/31.fabcaa0e.js"><link rel="prefetch" href="/assets/js/32.ed98704a.js"><link rel="prefetch" href="/assets/js/33.c7b75105.js"><link rel="prefetch" href="/assets/js/34.cffd858f.js"><link rel="prefetch" href="/assets/js/4.927f54a0.js"><link rel="prefetch" href="/assets/js/5.b236a21c.js"><link rel="prefetch" href="/assets/js/6.9819231b.js"><link rel="prefetch" href="/assets/js/7.041203ac.js"><link rel="prefetch" href="/assets/js/8.6905c82d.js"><link rel="prefetch" href="/assets/js/9.c1a5f5d5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c2144717.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基础概念</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/基础概念/for-in遍历对象属性的顺序与定义是否相同.html" class="sidebar-link">for-in遍历对象属性的顺序与定义是否...</a></li><li><a href="/基础概念/git基本工作流程.html" class="sidebar-link">git基本工作流程</a></li><li><a href="/基础概念/git如何保持commit信息整洁.html" class="sidebar-link">git如何保持commit信息整洁</a></li><li><a href="/基础概念/git常用的分支操作.html" class="sidebar-link">git常用的分支操作</a></li><li><a href="/基础概念/vue中v-model和sync修饰符.html" class="sidebar-link">vue中v-model和sync修饰符</a></li><li><a href="/基础概念/函数定义的5种方式.html" class="sidebar-link">函数定义的5种方式</a></li><li><a href="/基础概念/模块化.html" class="active sidebar-link">模块化</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>广度知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度知识</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="amd-cmd-commonjs-umd"><a href="#amd-cmd-commonjs-umd" class="header-anchor">#</a> AMD/CMD/CommonJS/UMD</h3> <p>在JavaScript ES6之前，没有内置的模块，开发者们不得不创造性地发挥JavaScript语言现有的特性实现模块化。最流行的方式之一是通过立即执行函数的闭包实现模块。</p> <h4 id="使用对象、闭包和立即执行函数实现模块"><a href="#使用对象、闭包和立即执行函数实现模块" class="header-anchor">#</a> 使用对象、闭包和立即执行函数实现模块</h4> <ul><li>使用立即执行函数创建定义模块变量的闭包，从外部作用域无法访问这些变量。</li> <li>使用闭包可以使模块变量保持活跃。</li></ul> <p>最流行的是模块模式，通常采用立即执行函数，并返回一个新对象作为模块的公共接口。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">MouseCounterModule</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>　<span class="token comment">//创建一个全局模块变量，赋值为立即实行函数的执行结果</span>
　<span class="token keyword">let</span> numClicks <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> 　　<span class="token comment">//创建模块私有变量</span>
　<span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　　console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>numClicks<span class="token punctuation">)</span><span class="token punctuation">;</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span>　 <span class="token comment">//创建模块私有函数</span>

<span class="token keyword">return</span> <span class="token punctuation">{</span>
　 <span class="token function-variable function">countClicks</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　　 document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
　　<span class="token punctuation">}</span>　<span class="token comment">//返回一个对象，代表模块的接口。通过闭包，可以访问模块私有变量和方法</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/* 在立即执行函数内部，定义模块内部的实现细节：一个局部变量numClicks，一个局部函数handleClick，都只能在模块内部访问。然后，我们创建并立即返回一个对象作为模块的“公共接口”。该接口包括countClicks方法，通过该方法我们可以从模块外部访问模块内部的功能。
由于暴露了模块接口，模块内部细节仍然可以通过接口创建的闭包保持活跃。
*/</span>

<span class="token comment">//扩展模块</span>
<span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>　　<span class="token comment">//立即调用一个函数，该函数接收需要扩展的模块作为参数</span>
　<span class="token keyword">let</span> numScrolls <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
　<span class="token keyword">const</span> <span class="token function-variable function">handleScroll</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
   console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>numScrolls<span class="token punctuation">)</span><span class="token punctuation">;</span>
　<span class="token punctuation">}</span>　　<span class="token comment">//定义新的私有变量和函数</span>

　module<span class="token punctuation">.</span><span class="token function-variable function">countScrolls</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　　 document<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span><span class="token string">&quot;wheel&quot;</span><span class="token punctuation">,</span> handleScroll<span class="token punctuation">)</span><span class="token punctuation">;</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span>　　<span class="token comment">//扩展模块接口</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span>MouseCounterModule<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><ul><li>这种方式无法共用模块间的变量</li> <li>无法处理模块的依赖关系</li></ul></blockquote> <h4 id="amd"><a href="#amd" class="header-anchor">#</a> AMD</h4> <p>AMD是&quot;Asynchronous Module Definition&quot;的缩写，意思就是&quot;异步模块定义&quot;。AMD最流行的实现是<a href="http://www.requirejs.org.cn/" target="_blank" rel="noopener noreferrer">RequireJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//依赖一开始就写好</span>
<span class="token function">define</span><span class="token punctuation">(</span><span class="token string">'MouseCounterModule'</span><span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token string">'jQuery'</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token parameter">$</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>　　<span class="token comment">//　使用define函数指定模块及其依赖，模块工厂函数会创建对应的模块  </span>
　<span class="token keyword">let</span> numClicks <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
　<span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　　 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>numClicks<span class="token punctuation">)</span><span class="token punctuation">;</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span>

　<span class="token keyword">return</span> <span class="token punctuation">{</span>　　<span class="token comment">//　模块的公共接口</span>
　　 <span class="token function-variable function">countClicks</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　　　 <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
　　<span class="token punctuation">}</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><p><strong>参数列表</strong></p> <ol><li>新创建模块的ID。使用该ID，可以在系统的其他部分引用该模块。</li> <li>当前模块依赖的模块ID列表。</li> <li>初始化模块的工厂函数，该工厂函数接收依赖的模块列表作为参数。</li></ol> <h4 id="cmd"><a href="#cmd" class="header-anchor">#</a> CMD</h4> <p>CMD推崇依赖就近，AMD推崇依赖前置。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">define</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">requie<span class="token punctuation">,</span> exports<span class="token punctuation">,</span> module</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'jQuery'</span><span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//依赖就近</span>
  <span class="token keyword">let</span> numClicks <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
　<span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　　 console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token operator">++</span>numClicks<span class="token punctuation">)</span><span class="token punctuation">;</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span>

　<span class="token keyword">return</span> <span class="token punctuation">{</span>　　<span class="token comment">//　模块的公共接口</span>
　　 <span class="token function-variable function">countClicks</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　　　 <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
　　<span class="token punctuation">}</span>
　<span class="token punctuation">}</span><span class="token punctuation">;</span> 
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

</code></pre></div><h4 id="commonjs"><a href="#commonjs" class="header-anchor">#</a> CommonJS</h4> <p>CommonJS设计面向通用JavaScript环境。模块定义基于文件，所以每个文件中只能定义一个模块。CommonJS提供变量module，该变量具有属性exports，通过exports可以很容易地扩展额外属性。最后，module.exports作为模块的公共接口。</p> <ul><li>语法简单。只需定义module.exports属性，剩下的模块代码与标准JavaScript无差异。引用模块的方法也很简单，只需要使用require函数。</li> <li>CommonJS是Node.js默认的模块格式，所以我们可以使用npm上成千上万的包。</li></ul> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">//MouseCounterModule.js</span>
<span class="token keyword">const</span> $ <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;jQuery&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>　　<span class="token comment">//　同步引入jQuery模块</span>
<span class="token keyword">let</span> numClicks <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">handleClick</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　 <span class="token function">alert</span><span class="token punctuation">(</span><span class="token operator">++</span>numClicks<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>　　<span class="token comment">//　使用module.exports定义模块公共接口</span>
　 <span class="token function-variable function">countClicks</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
　　 <span class="token function">$</span><span class="token punctuation">(</span>document<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&quot;click&quot;</span><span class="token punctuation">,</span> handleClick<span class="token punctuation">)</span><span class="token punctuation">;</span>
　<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token comment">//使用模块</span>
<span class="token keyword">const</span> MouseCounterModule <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;MouseCounterModule.js&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
MouseCounterModule<span class="token punctuation">.</span><span class="token function">countClicks</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>CommonJS最大的缺点是不显式地支持浏览器。浏览器端的JavaScript不支持module变量及export属性，我们不得不采用浏览器支持的格式打包代码，可以通过<a href="http://browserify.org/" target="_blank" rel="noopener noreferrer">Browserify<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>或<a href="http://requirejs.org/docs/commonjs.html" target="_blank" rel="noopener noreferrer">RequireJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>来实现。</p> <h4 id="umd"><a href="#umd" class="header-anchor">#</a> UMD</h4> <p>AMD模块以浏览器第一的原则发展，异步加载模块。<br>
CommonJS模块以服务器第一原则发展，选择同步加载，它的模块无需包装(unwrapped modules)。
这迫使人们又想出另一个更通用的模式UMD （Universal Module Definition）。希望解决跨平台的解决方案。</p> <p>UMD先判断是否支持Node.js的模块（exports）是否存在，存在则使用Node.js模块模式。
在判断是否支持AMD（define是否存在），存在则使用AMD方式加载模块。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> Report <span class="token keyword">from</span> <span class="token string">'./report.js'</span><span class="token punctuation">;</span>

<span class="token punctuation">;</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">name<span class="token punctuation">,</span> definition</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> define <span class="token operator">===</span> <span class="token string">'function'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// AMD环境或CMD环境</span>
    <span class="token function">define</span><span class="token punctuation">(</span>definition<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token keyword">typeof</span> module <span class="token operator">!==</span> <span class="token string">'undefined'</span> <span class="token operator">&amp;&amp;</span> module<span class="token punctuation">.</span>exports<span class="token punctuation">)</span> <span class="token punctuation">{</span><span class="token comment">// 检查上下文环境是否为Node</span>
    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token function">definition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><span class="token comment">// 将模块的执行结果挂在window变量中，在浏览器中this指向window对象</span>
    <span class="token function">Function</span><span class="token punctuation">(</span><span class="token string">'return this'</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span>name<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">definition</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token string">'frontError'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Report
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="es6模块化语法"><a href="#es6模块化语法" class="header-anchor">#</a> ES6模块化语法</h3> <table><thead><tr><th>代　　码</th> <th>含　　义</th></tr></thead> <tbody><tr><td>export const ninja = &quot;Yoshi&quot;;</td> <td>导出变量</td></tr> <tr><td>export function compare(){}</td> <td>导出函数</td></tr> <tr><td>export class Ninja{}</td> <td>导出类</td></tr> <tr><td>export default class Ninja{}</td> <td>导出默认类</td></tr> <tr><td>export default function Ninja(){}</td> <td>导出默认函数</td></tr> <tr><td>const ninja = &quot;Yoshi&quot;; <br> function compare(){}; <br> export {ninja, compare};</td> <td>导出存在的变量</td></tr> <tr><td>export {ninja as samurai, compare};</td> <td>使用别名导出变量</td></tr> <tr><td>import Ninja from &quot;Ninja.js&quot;;</td> <td>导入默认导出</td></tr> <tr><td>import {ninja, Ninja} from &quot;Ninja.js&quot;;</td> <td>导入命名导出</td></tr> <tr><td>import * as Ninja from &quot;Ninja.js&quot;;</td> <td>导入模块中声明的全部导出内容</td></tr> <tr><td>import {ninja as iNinja} from &quot;Ninja.js&quot;;</td> <td>通过别名导入模块中声明的全部导出内容</td></tr></tbody></table> <p><strong>参考</strong><br>
https://segmentfault.com/a/1190000004873947</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/justwe7/blog/edit/feature/docs/基础概念/模块化.md" target="_blank" rel="noopener noreferrer">纠正错误</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近提交:</span> <span class="time">8/6/2019, 11:00:42 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/基础概念/函数定义的5种方式.html" class="prev">函数定义的5种方式</a></span> <span class="next"><a href="/广度知识/gitpage+vuepress+jenkins静态博客.html">gitpage+vuepress+jen...</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.264ba1d9.js" defer></script><script src="/assets/js/2.d12215aa.js" defer></script><script src="/assets/js/15.68ca9d46.js" defer></script>
  </body>
</html>
