<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>与远端代码同步 | 学习笔记</title>
    <meta name="description" content="记录平时所接触到的知识点">
    
    
    <link rel="preload" href="blog/assets/css/0.styles.a0046fd7.css" as="style"><link rel="preload" href="blog/assets/js/app.e54586f3.js" as="script"><link rel="preload" href="blog/assets/js/2.d12215aa.js" as="script"><link rel="preload" href="blog/assets/js/11.98e0198a.js" as="script"><link rel="prefetch" href="blog/assets/js/10.0d17d068.js"><link rel="prefetch" href="blog/assets/js/12.ae8539e1.js"><link rel="prefetch" href="blog/assets/js/13.685479be.js"><link rel="prefetch" href="blog/assets/js/14.671233cb.js"><link rel="prefetch" href="blog/assets/js/15.789cac6b.js"><link rel="prefetch" href="blog/assets/js/16.5762fa0d.js"><link rel="prefetch" href="blog/assets/js/17.3f6883fa.js"><link rel="prefetch" href="blog/assets/js/18.88f67ec2.js"><link rel="prefetch" href="blog/assets/js/19.1a3530fe.js"><link rel="prefetch" href="blog/assets/js/20.8d680bd2.js"><link rel="prefetch" href="blog/assets/js/21.5144d2b5.js"><link rel="prefetch" href="blog/assets/js/22.e3c85ce4.js"><link rel="prefetch" href="blog/assets/js/23.92888255.js"><link rel="prefetch" href="blog/assets/js/24.d6172d3a.js"><link rel="prefetch" href="blog/assets/js/25.b9fbc0ce.js"><link rel="prefetch" href="blog/assets/js/26.6eb10c76.js"><link rel="prefetch" href="blog/assets/js/27.b33dd473.js"><link rel="prefetch" href="blog/assets/js/28.5aa8acb9.js"><link rel="prefetch" href="blog/assets/js/29.fa356a69.js"><link rel="prefetch" href="blog/assets/js/3.a4ec70ce.js"><link rel="prefetch" href="blog/assets/js/30.b49ee00d.js"><link rel="prefetch" href="blog/assets/js/31.d55e51ea.js"><link rel="prefetch" href="blog/assets/js/32.7e99701a.js"><link rel="prefetch" href="blog/assets/js/33.dcd1b177.js"><link rel="prefetch" href="blog/assets/js/34.cffd858f.js"><link rel="prefetch" href="blog/assets/js/4.841c7199.js"><link rel="prefetch" href="blog/assets/js/5.33cfe16c.js"><link rel="prefetch" href="blog/assets/js/6.9819231b.js"><link rel="prefetch" href="blog/assets/js/7.a37ec87a.js"><link rel="prefetch" href="blog/assets/js/8.8764dc37.js"><link rel="prefetch" href="blog/assets/js/9.2ba0bbda.js">
    <link rel="stylesheet" href="blog/assets/css/0.styles.a0046fd7.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">学习笔记</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基础概念</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/基础概念/for-in遍历对象属性的顺序与定义是否相同.html" class="sidebar-link">for-in遍历对象属性的顺序与定义是否...</a></li><li><a href="/blog/基础概念/git基本工作流程.html" class="sidebar-link">git基本工作流程</a></li><li><a href="/blog/基础概念/git如何保持commit信息整洁.html" class="active sidebar-link">git如何保持commit信息整洁</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/blog/基础概念/git常用的分支操作.html" class="sidebar-link">git常用的分支操作</a></li><li><a href="/blog/基础概念/vue中v-model和sync修饰符.html" class="sidebar-link">vue中v-model和sync修饰符</a></li><li><a href="/blog/基础概念/函数定义的5种方式.html" class="sidebar-link">函数定义的5种方式</a></li><li><a href="/blog/基础概念/模块化.html" class="sidebar-link">模块化</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>广度知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度知识</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h3 id="与远端代码同步"><a href="#与远端代码同步" class="header-anchor">#</a> 与远端代码同步</h3> <ol><li>执行<code>git status</code>查看本地仓库状态，确认：</li></ol> <ul><li>是否有未提交内容？</li> <li>是否有未添加内容？</li></ul> <div class="language- extra-class"><pre class="language-text"><code>红色：未添加 
黄色：未提交本地分支 
出现：nothing to commit, working tree clean 视为可操作环境 
</code></pre></div><ol start="2"><li>确认是否有远端同名分支，如有<code>origin/feat-a</code>：</li></ol> <div class="language- extra-class"><pre class="language-text"><code>※本地代码有更改(git status)
git add .
git commit -m 'feat: 新增xx功能' // 提交至本地版本库
git pull origin feat-a // 基于远端同名分支更新代码
git push origin feat-a // 推送至远端

※本地代码无更改(git status)
// 那没事了
</code></pre></div><h3 id="保持commit信息整洁"><a href="#保持commit信息整洁" class="header-anchor">#</a> 保持commit信息整洁</h3> <p><strong>在git push之前，对commit信息进行整理</strong></p> <div class="language- extra-class"><pre class="language-text"><code>业务并行开发，周期较长，切换分支也频繁。可能为了存代码，不想用git stash(万一丢代码)，同样的功能commit了多次，且信息相同：   
git commit -a -m 'feat: 新增xx用户' 
git commit -a -m 'feat: 新增xx用户' 
git commit -a -m 'feat: 新增xx用户' 

能够合并为
git commit -m 'feat: 新增xx用户' 

之后再
git push  
git的线会简洁很多
</code></pre></div><p><strong>实现方式</strong></p> <p><strong>(一)第1+n次commit时候使用 --amend</strong></p> <blockquote><p>此操作适用commit一次，第二(+n)次的情况，如已经连续commit两条信息，只能修改最近一次的信息</p></blockquote> <p>amend会使用一个新的commit去替换最近的一次commit，如先改了A.js，已经commit，但是同一个需求B.js也需要修改push，此时可以修改完：</p> <div class="language- extra-class"><pre class="language-text"><code>git add B.js

git commit --amend -C HEAD // 直接使用上一个commit描述
或者
git commit --amend //弹出编辑窗口，修改commit信息，重新提交新commit。(i编辑，wq保存)

git push origin feat // 此时再去提交至远端
</code></pre></div><p><strong>(二)使用reset来修改信息</strong></p> <blockquote><p>amend仅能替换最近一次commit。想要快速的将working tree的修改和最近的两次commit合并得到一个新的commit则需要用到reset啦</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>// 提交了多次
git commit -a -m 'add: line1' 
git commit -a -m 'add: line2' 
git commit -a -m 'add: line3' 

// 整合一下
git reset --soft HEAD~3 // 删除前3次commit信息,保留文件更改
git commit -a -m 'add: line-3次一起add'
git push
</code></pre></div><blockquote><p>reset适用于需要修改多个commit的情况，但也受限于修改从HEAD~开始连续的多个commit</p></blockquote> <p>可以完全的删除前几个commit，万一如果需要修改的commit已经push出去了（不要reset!!!）。那就需要使用revert命令，revert命令会接着重新提交一个新的commit，用以回滚上一个commit的修改。</p> <p><strong>(三)使用rebase</strong></p> <p>依次添加代码，并依次提交4次：</p> <div class="language- extra-class"><pre class="language-text"><code>git commit -a -m 'add: 0'
git commit -a -m 'add: 1'
git commit -a -m 'add: 2'
git commit -a -m 'add: 3'
</code></pre></div><p><code>git log</code> 查看到历史：</p> <div class="language- extra-class"><pre class="language-text"><code>commit 3cd74a4219f5501166f6a73f0eb6d175a87f7148 (HEAD -&gt; master)
Author: justwe7 &lt;x13133053566@163.com&gt;
Date:   Thu Oct 10 17:39:06 2019 +0800

    add: 3

commit d55cc2d2258b20e1c7d83ee67c1c981b1f852fde
Author: justwe7 &lt;x13133053566@163.com&gt;
Date:   Thu Oct 10 17:39:00 2019 +0800

    add: 2

commit 3f7dba6d03e47a077fd12f2d8be3b0cf57b09019
Author: justwe7 &lt;x13133053566@163.com&gt;
Date:   Thu Oct 10 17:38:53 2019 +0800

    add: 1

commit 6a965e149f55cc01c64da0cd9e3d45518b067111
Author: justwe7 &lt;x13133053566@163.com&gt;
Date:   Thu Oct 10 17:38:37 2019 +0800

    add: 0
</code></pre></div><p>合并代码：</p> <ol><li>使用<code>git rebase -i HEAD~3</code>(就看最近的3条)，数字3代表压缩最后3次提交。</li></ol> <div class="language- extra-class"><pre class="language-text"><code>该命令执行后，会弹出vim的编辑窗口，3次提交的信息会倒序排列，最上面的是倒数第3次提交，最下面的是最新提交。(因为查看的是最近3条，少了add: 0的信息)

pick 3f7dba6 add: 1
pick d55cc2d add: 2
pick 3cd74a4 add: 3
</code></pre></div><ol start="2"><li>将第2和第3的add行， pick 改为 squash</li></ol> <div class="language- extra-class"><pre class="language-text"><code>pick 3f7dba6 add: 1
squash d55cc2d add: 2
squash 3cd74a4 add: 3

这个意义为将最后两次的提交压缩到倒数第3次的提交，效果就是我们在pick所在的提交就已经做了4次动作，但是看起来commit就是2次(rebase了最近3条，还有add: 0的信息，保留了add: 1信息)而已。
</code></pre></div><ol start="3"><li>然后保存退出。如果有冲突(没冲突就不用啦！！！执行第4步)</li></ol> <div class="language- extra-class"><pre class="language-text"><code>解决
git add .
git rebase --continue //如果有冲突，需要修改，修改的时候要注意，保留最新的历史
或者放弃
git rebase --abort //如果你要放弃这次压缩的话
</code></pre></div><ol start="4"><li>之后会弹出这样的窗口</li></ol> <div class="language- extra-class"><pre class="language-text"><code># This is the 1st commit message:

add: 1

# This is the commit message #1:

add: 2

add: 3
</code></pre></div><p>可以再修改这次合并后的信息</p> <div class="language- extra-class"><pre class="language-text"><code>add: 1 =&gt; 我是新改的123合并

然后wq保存
git push
</code></pre></div><p><code>git log</code> 查看，会发现记录合并为：
add: 1 =&gt; 我是新改的123合并</p> <p><a href="https://blog.csdn.net/itfootball/article/details/44154121" target="_blank" rel="noopener noreferrer">参考<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/justwe7/blog/edit/feature/docs/基础概念/git如何保持commit信息整洁.md" target="_blank" rel="noopener noreferrer">纠正错误</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近提交:</span> <span class="time">10/12/2019, 7:12:14 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/基础概念/git基本工作流程.html" class="prev">git基本工作流程</a></span> <span class="next"><a href="/blog/基础概念/git常用的分支操作.html">git常用的分支操作</a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="blog/assets/js/app.e54586f3.js" defer></script><script src="blog/assets/js/2.d12215aa.js" defer></script><script src="blog/assets/js/11.98e0198a.js" defer></script>
  </body>
</html>
