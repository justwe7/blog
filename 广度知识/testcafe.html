<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>简介 | 前端日志</title>
    <meta name="description" content="土豆和土豆丝的学习记录">
    <link rel="icon" href="/blog/favorite.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.244ca03c.css" as="style"><link rel="preload" href="/blog/assets/js/app.2b65cc84.js" as="script"><link rel="preload" href="/blog/assets/js/2.9c8da183.js" as="script"><link rel="preload" href="/blog/assets/js/45.294aa832.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.f4b9808b.js"><link rel="prefetch" href="/blog/assets/js/11.17753fa8.js"><link rel="prefetch" href="/blog/assets/js/12.eed41aa4.js"><link rel="prefetch" href="/blog/assets/js/13.2cbdc8f2.js"><link rel="prefetch" href="/blog/assets/js/14.c71b01e9.js"><link rel="prefetch" href="/blog/assets/js/15.4b7c71de.js"><link rel="prefetch" href="/blog/assets/js/16.55b235e6.js"><link rel="prefetch" href="/blog/assets/js/17.611a1b55.js"><link rel="prefetch" href="/blog/assets/js/18.42680970.js"><link rel="prefetch" href="/blog/assets/js/19.6b0ff29f.js"><link rel="prefetch" href="/blog/assets/js/20.49fb4f8f.js"><link rel="prefetch" href="/blog/assets/js/21.5490e3f0.js"><link rel="prefetch" href="/blog/assets/js/22.0cbe4eb6.js"><link rel="prefetch" href="/blog/assets/js/23.0d6f1752.js"><link rel="prefetch" href="/blog/assets/js/24.4207d03c.js"><link rel="prefetch" href="/blog/assets/js/25.047d0f1e.js"><link rel="prefetch" href="/blog/assets/js/26.8143fab4.js"><link rel="prefetch" href="/blog/assets/js/27.d4112cc7.js"><link rel="prefetch" href="/blog/assets/js/28.883ca809.js"><link rel="prefetch" href="/blog/assets/js/29.eb0a0979.js"><link rel="prefetch" href="/blog/assets/js/3.d2b25e93.js"><link rel="prefetch" href="/blog/assets/js/30.dc4a32e4.js"><link rel="prefetch" href="/blog/assets/js/31.bb74dcc9.js"><link rel="prefetch" href="/blog/assets/js/32.19b9b2ad.js"><link rel="prefetch" href="/blog/assets/js/33.1c5b491a.js"><link rel="prefetch" href="/blog/assets/js/34.4449dbb9.js"><link rel="prefetch" href="/blog/assets/js/35.de6137d1.js"><link rel="prefetch" href="/blog/assets/js/36.f90f55dc.js"><link rel="prefetch" href="/blog/assets/js/37.6774285b.js"><link rel="prefetch" href="/blog/assets/js/38.40333629.js"><link rel="prefetch" href="/blog/assets/js/39.93e0dfab.js"><link rel="prefetch" href="/blog/assets/js/4.31f14a68.js"><link rel="prefetch" href="/blog/assets/js/40.ae2ff175.js"><link rel="prefetch" href="/blog/assets/js/41.18cb6f45.js"><link rel="prefetch" href="/blog/assets/js/42.d18f15b7.js"><link rel="prefetch" href="/blog/assets/js/43.93d1cf0f.js"><link rel="prefetch" href="/blog/assets/js/44.2e68a699.js"><link rel="prefetch" href="/blog/assets/js/46.4173b20d.js"><link rel="prefetch" href="/blog/assets/js/47.4bcbe3f2.js"><link rel="prefetch" href="/blog/assets/js/48.16b7b98a.js"><link rel="prefetch" href="/blog/assets/js/49.89a9d560.js"><link rel="prefetch" href="/blog/assets/js/5.9f0256c8.js"><link rel="prefetch" href="/blog/assets/js/50.3d1fcdf9.js"><link rel="prefetch" href="/blog/assets/js/51.33050d1b.js"><link rel="prefetch" href="/blog/assets/js/52.fe886e37.js"><link rel="prefetch" href="/blog/assets/js/53.a237ef53.js"><link rel="prefetch" href="/blog/assets/js/54.0817b5a4.js"><link rel="prefetch" href="/blog/assets/js/55.34909e91.js"><link rel="prefetch" href="/blog/assets/js/56.833686de.js"><link rel="prefetch" href="/blog/assets/js/57.ee3140fa.js"><link rel="prefetch" href="/blog/assets/js/58.a7e7d812.js"><link rel="prefetch" href="/blog/assets/js/6.9afed123.js"><link rel="prefetch" href="/blog/assets/js/7.b09c9cf4.js"><link rel="prefetch" href="/blog/assets/js/8.bbc14bdf.js"><link rel="prefetch" href="/blog/assets/js/9.2f86661d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.244ca03c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>基础概念</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>广度知识</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/广度知识/gitpage+vuepress+jenkins静态博客.html" class="sidebar-link">gitpage+vuepress+jen...</a></li><li><a href="/blog/广度知识/http报文-概念状态码.html" class="sidebar-link">http报文-概念状态码</a></li><li><a href="/blog/广度知识/http报文-首部.html" class="sidebar-link">http报文-首部</a></li><li><a href="/blog/广度知识/linux常用指令.html" class="sidebar-link">linux常用指令</a></li><li><a href="/blog/广度知识/markdown.html" class="sidebar-link">markdown</a></li><li><a href="/blog/广度知识/node.html" class="sidebar-link">node</a></li><li><a href="/blog/广度知识/shell-echo&amp;printf.html" class="sidebar-link">shell-echo&amp;printf</a></li><li><a href="/blog/广度知识/shell-test验证.html" class="sidebar-link">shell-test验证</a></li><li><a href="/blog/广度知识/shell-传递参数.html" class="sidebar-link">shell-传递参数</a></li><li><a href="/blog/广度知识/shell-函数.html" class="sidebar-link">shell-函数</a></li><li><a href="/blog/广度知识/shell-基础.html" class="sidebar-link">shell-基础</a></li><li><a href="/blog/广度知识/shell-模块化.html" class="sidebar-link">shell-模块化</a></li><li><a href="/blog/广度知识/shell-流程控制-if&amp;for.html" class="sidebar-link">shell-流程控制-if&amp;for</a></li><li><a href="/blog/广度知识/shell-疑问记录.html" class="sidebar-link">shell-疑问记录</a></li><li><a href="/blog/广度知识/shell-输入输出重定向.html" class="sidebar-link">shell-输入输出重定向</a></li><li><a href="/blog/广度知识/shell-运算符.html" class="sidebar-link">shell-运算符</a></li><li><a href="/blog/广度知识/testcafe.html" class="active sidebar-link">testcafe</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#创建一个测试项目" class="sidebar-link">创建一个测试项目</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#编写第一个测试脚本" class="sidebar-link">编写第一个测试脚本</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#运行测试脚本" class="sidebar-link">运行测试脚本</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#编写测试代码" class="sidebar-link">编写测试代码</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#小结" class="sidebar-link">小结</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#测试代码结构" class="sidebar-link">测试代码结构</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#页面元素选择" class="sidebar-link">页面元素选择</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#动作" class="sidebar-link">动作</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#断言-2" class="sidebar-link">断言</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#客户端方法-no" class="sidebar-link">客户端方法 (no)</a></li><li class="sidebar-sub-header"><a href="/blog/广度知识/testcafe.html#等待" class="sidebar-link">等待</a></li></ul></li><li><a href="/blog/广度知识/vimium自用速查.html" class="sidebar-link">vimium自用速查</a></li><li><a href="/blog/广度知识/vscode.html" class="sidebar-link">vscode</a></li><li><a href="/blog/广度知识/web及网络基础.html" class="sidebar-link">web及网络基础</a></li><li><a href="/blog/广度知识/windows快捷键.html" class="sidebar-link">windows快捷键</a></li><li><a href="/blog/广度知识/window超好用的终端配置.html" class="sidebar-link">window超好用的终端配置</a></li><li><a href="/blog/广度知识/什么是https.html" class="sidebar-link">什么是https</a></li><li><a href="/blog/广度知识/提升命令行效率的Bash快捷键.html" class="sidebar-link">提升命令行效率的Bash快捷键</a></li><li><a href="/blog/广度知识/简单了解http协议.html" class="sidebar-link">简单了解http协议</a></li><li><a href="/blog/广度知识/自动化部署微信小程序.html" class="sidebar-link">自动化部署微信小程序</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度知识</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="简介"><a href="#简介" class="header-anchor">#</a> 简介</h1> <p>testcafe (<a href="https://devexpress.github.io/testcafe/" target="_blank" rel="noopener noreferrer">官网<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) 是一个基于 nodejs 的自动化测试框架，优点就先不多说了，我们直接进入正题！</p> <h1 id="安装"><a href="#安装" class="header-anchor">#</a> 安装</h1> <p>testcafe 是一个 npm 包，它可以使用 npm 或 yarn 包管理器进行安装，这里我们使用 yarn 进行安装（因为它很快）</p> <blockquote><p>如果你的机器上没有安装 yarn，那么你可以使用 npm 来安装 yarn 😊</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g <span class="token function">yarn</span>
</code></pre></div><p>在命令行中运行以下命令</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> global <span class="token function">add</span> testcafe
</code></pre></div><p>这样， testcafe 就安装在你本机上啦</p> <h1 id="小试牛刀"><a href="#小试牛刀" class="header-anchor">#</a> 小试牛刀</h1> <h2 id="创建一个测试项目"><a href="#创建一个测试项目" class="header-anchor">#</a> 创建一个测试项目</h2> <p>我们新建一个目录，用于练习我们的自动化测试框架 testcafe</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 首先切换到你用于管理 web 项目的根目录，我本机是 &quot;~/www&quot;</span>
<span class="token builtin class-name">cd</span> ~/www
<span class="token function">mkdir</span> testcafe <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> testcafe
</code></pre></div> <h2 id="编写第一个测试脚本"><a href="#编写第一个测试脚本" class="header-anchor">#</a> 编写第一个测试脚本</h2> <p>然后新建一个名为 <code>myFirstTestcase.js</code> 文件，用于编写我们的自动化测试脚本</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vim</span> myFirstTestcase.js <span class="token comment"># 用 vim 打开这个文件（如果文件不存在就创建它）</span>
</code></pre></div><blockquote><p>如果你安装了 vscode，你还可以使用 <code>code myFirstTestcase.js</code> 来创建并编辑它
<em>需要在 vscode 的控制它中输入 <code>install command</code> 来启用 <code>code</code> 命令</em></p></blockquote> <p>将以下内容粘贴到 <code>myFirstTestcase.js</code> 中</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES6 导包语法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token comment">// 声明一个 fixture 测试项目</span>
<span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'Getting Started'</span><span class="token punctuation">)</span>
  <span class="token comment">// 打开一个 web 页面用于接下来的测试</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/example'</span><span class="token punctuation">)</span>

<span class="token comment">// 创建一个测试用例</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My first test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Test code</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>到这里，我们的第一个 test script 就写好了，接下来我们来运行它看看</p> <h2 id="运行测试脚本"><a href="#运行测试脚本" class="header-anchor">#</a> 运行测试脚本</h2> <p>我们回到命令行中，执行以下命令来运行一个测试脚本</p> <div class="language-bash extra-class"><pre class="language-bash"><code>testcafe chrome myFirstTestcase.js
</code></pre></div><blockquote><p>这个命令中，</p> <ul><li><code>testcafe</code> 是我们使用包管理工具全局安装的依赖，testcafe 是它的可执行程序</li> <li><code>chrome</code> 是我们的测试平台，安装在本机的浏览器，也可以是 <code>safari</code> <code>firefox</code> 等</li> <li><code>myFirstTestcase.js</code> 是我们编写的测试脚本</li></ul></blockquote> <p>稍等片刻，我们的浏览器就会被自动打开然后运行测试脚本，最后浏览器被自动关闭，在终端上留下了测试结果。</p> <p><img src="//static.mutoe.com/2018/testcafe/test-report.png" alt="test report"></p> <h2 id="编写测试代码"><a href="#编写测试代码" class="header-anchor">#</a> 编写测试代码</h2> <p>刚才我们的测试脚本只是简单的打开了一个页面，它并没有执行任何动作。</p> <blockquote><p>在接下来的几个例子中，你可以打开测试目标网站 <a href="http://devexpress.github.io/testcafe/example" target="_blank" rel="noopener noreferrer">http://devexpress.github.io/testcafe/example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 这个页面，然后打开控制台，观察其 DOM 结构，并试着模拟脚本的操作，以便方便的理解脚本的内容。</p></blockquote> <h3 id="在页面上执行操作"><a href="#在页面上执行操作" class="header-anchor">#</a> 在页面上执行操作</h3> <p>接下来我们简单的写两个动作，用来对页面进行操作。<br>
打开 <code>myFirstTestcase.js</code>，在 <code>test</code> 方法的回调函数中添加以下内容</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged">  test('My first test', async t =&gt; {
</span><span class="token deleted-sign deleted">-   // Test code
</span><span class="token inserted-sign inserted">+   await t
+     .typeText('#developer-name', 'John Smith')
+     .click('#submit-button');
</span><span class="token unchanged">  });
</span></code></pre></div><p>t 是我们的测试用例的控制器，它又很多方法，在上面的例子中，我们调用了它的 <code>typeText</code> 和 <code>click</code> 两个方法，其中</p> <ul><li><code>typeText</code> 方法用来键入文本，它接受两个参数：第一个参数是 selector 选择器（它的语法类似 jQuery 选择器的语法）；第二个参数是你要键入的文本；</li> <li><code>click</code> 方法用来模拟鼠标点击，它接受一个参数，是一个 selector 选择器</li></ul> <blockquote><p>有关这个控制器的更多方法，请先参考 <a href="https://devexpress.github.io/testcafe/documentation/test-api/actions/" target="_blank" rel="noopener noreferrer">TestCafe 官方 API 手册<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (它是一个英文文档，稍后我会整理出这个文档的中文手册在本页下方)</p></blockquote> <p>这段代码的作用是：</p> <ol><li>首先找到 id 为 <code>developer-name</code> 的标签，输入值 'John Smith'</li> <li>然后点击 id 为 <code>submit-button</code> 的按钮</li></ol> <h3 id="观察页面的变化"><a href="#观察页面的变化" class="header-anchor">#</a> 观察页面的变化</h3> <p>上面一小节我们对页面进行了交互，接下来我们想知道页面进行了什么反应，也就是观察的页面变化。</p> <p>我们对测试脚本进行修改</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged">  test('My first test', async t =&gt; {
    await t
      .typeText('#developer-name', 'John Smith')
      .click('#submit-button');
</span><span class="token inserted-sign inserted">+
+   const articleHeader = await Selector('.result-content').find('h1');
+
+   // 获取 article header 的内容文本
+   let headerText = await articleHeader.innerText;
</span><span class="token unchanged">  });
</span></code></pre></div><p>在我们点击页面上的“提交”按钮后，会打开一个“谢谢”页面。<br>
如果我们要访问页面上的 DOM 元素，可以使用测试脚本顶部导入的 Selector 方法</p> <ol><li>L6，我们声明了一个 <code>articleHeader</code> 变量，这个变量的值是根据选择器 <code>.result-content &gt; h1</code> 找到的 DOM 元素</li> <li>L9，我们又声明了一个 <code>headerText</code> 变量，它的值是我们获取到的 DOM 元素的 <code>innerText</code> 属性（这个属性的值是 DOM 元素的内容文本）</li></ol> <h3 id="断言"><a href="#断言" class="header-anchor">#</a> 断言</h3> <p>我们拿到需要判断的值后，就可以对测试用例进行断言了。<br>
它到底能否正确执行测试用例并输出我们期望的结果？</p> <p>我们使用测试用例控制器的 <code>t.expect()</code> 方法来进行断言,<br>
将测试脚本改写为以下内容</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged">  test('My first test', async t =&gt; {
    await t
      .typeText('#developer-name', 'John Smith')
      .click('#submit-button');
</span>
<span class="token deleted-sign deleted">-   const articleHeader = await Selector('.result-content').find('h1');
-
-   // 获取 article header 的内容文本
-   let headerText = await articleHeader.innerText;
</span><span class="token inserted-sign inserted">+   // 使用断言方法来判断我们获取到的值与我们期望的值是否相等
+   .expect(Selector('#article-header').innerText).eql('Thank you, John Smith!');
</span><span class="token unchanged">  });
</span></code></pre></div><ul><li><p>L11 <code>expect()</code> 是一个 BDD（行为驱动开发）风格的断言方法, 它接受一个参数：需要进行断言的变量；<br>
它返回一个断言类实例对象，后跟一个断言方法。</p></li> <li><p><code>eql()</code> 是一个断言方法，用于判断断言实例与期望值是否严格等于，它接受一个参数：期望值；<br>
该类断言方法会在打印出相应的测试报告，如果相等则返回 pass，否则抛出一个 AssertionError</p> <p><img src="//static.mutoe.com/2018/testcafe/assertion-error.png" alt="assertion error"></p></li></ul> <h2 id="小结"><a href="#小结" class="header-anchor">#</a> 小结</h2> <p>到这里，我们的第一个自动化测试脚本就完成了，如果你没有跑通的话，请检查一下你的测试脚本是否与以下内容一致</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES6 导包语法</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span>

<span class="token comment">// 声明一个 fixture 测试项目</span>
<span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'Getting Started'</span><span class="token punctuation">)</span>
  <span class="token comment">// 打开一个 web 页面用于接下来的测试</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/example'</span><span class="token punctuation">)</span>

<span class="token comment">// 创建一个测试用例</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My first test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">,</span> <span class="token string">'John Smith'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#submit-button'</span><span class="token punctuation">)</span>

    <span class="token comment">// 使用断言方法来判断我们获取到的值与我们期望的值是否相等</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#article-header'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Thank you, John Smith!1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h1 id="api-文档-unfinished"><a href="#api-文档-unfinished" class="header-anchor">#</a> API 文档 (unfinished)</h1> <h2 id="测试代码结构"><a href="#测试代码结构" class="header-anchor">#</a> 测试代码结构</h2> <h3 id="测试组-fixtures"><a href="#测试组-fixtures" class="header-anchor">#</a> 测试组 Fixtures</h3> <p>TestCafe 测试必须将一些测试组织起来，测试组 (Fixtures) 就像是一个文件夹，将同一类的测试包裹起来。
一个测试文件可以包含很多测试组。</p> <p>要声明一个测试组，使用 <code>fixture</code> 方法</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span> fixtrueName <span class="token punctuation">)</span>

<span class="token comment">// 或下面这种用法</span>
fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">fixtureName</span><span class="token template-punctuation string">`</span></span>

</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>fixtureName</code></td> <td>string</td> <td>测试组的名称</td></tr></tbody></table> <p>它返回一个测试组对象，可以接测试组方法，有关这些方法，请参考下方相关 API。</p> <blockquote><p>请注意，测试方法 <code>test</code> 必须放在测试组声明后面。</p></blockquote> <h3 id="测试用例-tests"><a href="#测试用例-tests" class="header-anchor">#</a> 测试用例 Tests</h3> <p>你可以使用 <code>test</code> 方法声明一个测试用例。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span> testName<span class="token punctuation">,</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>testName</code></td> <td>string</td> <td>测试用例的名称</td></tr> <tr><td><code>fn</code></td> <td>Function</td> <td>包含测试代码的异步函数</td></tr> <tr><td><code>t</code></td> <td>Object</td> <td>测试用例的<a href="#">测试控制器</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'MyFixture'</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test1'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* Test 1 Code */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test2'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* Test 2 Code */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>TestCafe 测试在服务器端执行。
你可以使用<a href="#%E5%8A%A8%E4%BD%9C">测试动作</a>来操纵测试的网页。
要确定页面元素的状态或从客户端获取任何其他数据，请使用<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a>和客户端方法。</p> <p>要检查页面状态是否与预期页面状态匹配，请使用<a href="#%E6%96%AD%E8%A8%80">断言</a>。</p> <h4 id="测试控制器-test-controller"><a href="#测试控制器-test-controller" class="header-anchor">#</a> 测试控制器 Test Controller</h4> <p>如果要使用<a href="#%E5%8A%A8%E4%BD%9C">测试动作</a>、<a href="#%E6%96%AD%E8%A8%80">断言</a>、或者<a href="#%E7%AD%89%E5%BE%85">等待</a>, 必须挂在在测试控制器上.</p> <h3 id="指定起始页面"><a href="#指定起始页面" class="header-anchor">#</a> 指定起始页面</h3> <p>您可以指定 fixture 中所有测试启动时的 web 页面。</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span> url <span class="token punctuation">)</span>
fixture<span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>类似的，你也可以为特定的测试用例置顶一个起始的 web 页面。</p> <div class="language-js extra-class"><pre class="language-js"><code>test<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span> url <span class="token punctuation">)</span>
test<span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>url</code></td> <td>string</td> <td>指定起始页面的 URL</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'MyFixture'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/example'</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test1'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Starts at http://devexpress.github.io/testcafe/example</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

test<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/blog/'</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token string">'Test2'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Starts at http://devexpress.github.io/testcafe/blog/</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果没有指定起始页面，则打开 <code>about:blank</code> 页面。</p> <p>你也可以使用 <code>file://</code> 协议或相对路径</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'MyFixture'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'file:///user/my-website/index.html'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'MyFixture'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'../my-project/index.html'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="测试元数据"><a href="#测试元数据" class="header-anchor">#</a> 测试元数据</h3> <p>你可以使用键值对的方式为测试指定元数据，并在测试报告中展示这些元数据。</p> <p>要定义元数据，请使用 <code>meta</code> 方法。</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture
  <span class="token punctuation">.</span><span class="token function">meta</span><span class="token punctuation">(</span><span class="token string">'fixtureID'</span><span class="token punctuation">,</span> <span class="token string">'f-0001'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">meta</span><span class="token punctuation">(</span><span class="token punctuation">{</span> author<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span> creationDate<span class="token operator">:</span> <span class="token string">'05/03/2018'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
test
  <span class="token punctuation">.</span><span class="token function">meta</span><span class="token punctuation">(</span><span class="token string">'testID'</span><span class="token punctuation">,</span> <span class="token string">'t-0001'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">meta</span><span class="token punctuation">(</span><span class="token punctuation">{</span> severity<span class="token operator">:</span> <span class="token string">'critical'</span><span class="token punctuation">,</span> testedAPIVersion<span class="token operator">:</span> <span class="token string">'1.0'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token string">'MyTest'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>你可以使用 <a href="https://devexpress.github.io/testcafe/documentation/extending-testcafe/reporter-plugin/" target="_blank" rel="noopener noreferrer">custom reporter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 来访问测试元数据。</p> <p>报告器的 <code>reportFixtureStart</code> 和 <code>reportTestDone</code> 方法来访问测试元数据</p> <h3 id="钩子"><a href="#钩子" class="header-anchor">#</a> 钩子</h3> <h4 id="测试组钩子"><a href="#测试组钩子" class="header-anchor">#</a> 测试组钩子</h4> <p>在每个测试组开始前、结束后，都可以执行特定的方法，它叫做钩子。如果一个测试在多个浏览器中运行，则在每个浏览器中都会执行指定钩子。</p> <p>你可以指定测试组开始前、结束后执行的钩子</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://example.com</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* fixture initialization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* fixture finalization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="测试用例钩子"><a href="#测试用例钩子" class="header-anchor">#</a> 测试用例钩子</h4> <p>在每次测试的开始前、结束后，也有相应的钩子。</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>
fixture<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>

test<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>
test<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div><blockquote><p>如果指定了 <code>test.before()</code> 或 <code>test.after()</code>， 那么它会覆盖 <code>fixture.beforeEach()</code> 或 <code>fixture.afterEach()</code> 的钩子。</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://example.com</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* test initialization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* test finalization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

test
  <span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* test initialization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token string">'MyTest'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* test finalization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="在钩子和测试代码之间共享变量"><a href="#在钩子和测试代码之间共享变量" class="header-anchor">#</a> 在钩子和测试代码之间共享变量</h4> <p>通过使用测试的上下文对象，来共享在钩子和测试代码之间的变量。</p> <p>测试的上下文对象为 <code>t.ctx</code>，使用它来代替全局变量。</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture1</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">t</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>someProp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span>
  <span class="token punctuation">(</span><span class="token string">'Test1'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>someProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &gt; 123</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>someProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &gt; 123</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>需要注意的是，每个测试都有自己的测试上下文对象。每次测试开始时，<code>t.ctx</code> 都是一个空的对象。</p></blockquote> <p>在测试组的钩子中，回调函数的参数为 <code>ctx</code>，即为测试的上下文对象，在测试代码中可以使用 <code>t.fixtureCtx</code> 来访问它</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture1</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">ctx</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>someProp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">ctx</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>newProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &gt; abc</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test1'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>fixtureCtx<span class="token punctuation">.</span>someProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &gt; 123</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test2'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  t<span class="token punctuation">.</span>fixtureCtx<span class="token punctuation">.</span>newProp <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="跳过测试"><a href="#跳过测试" class="header-anchor">#</a> 跳过测试</h3> <p>你在写测试用例时，可以跳过某个测试用例或者只执行某个测试用例</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture<span class="token punctuation">.</span>skip <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// 所有该测试组的用例都会被跳过</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture1Test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture1Test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
test<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 这个测试用例会被跳过</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test3'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>fixture<span class="token punctuation">.</span>only <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture1Test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture1Test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
test<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test3'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// 只有 `Fixture1` 测试组和 `Fixture2Test2` 测试用例会被执行</span>
</code></pre></div><h2 id="页面元素选择"><a href="#页面元素选择" class="header-anchor">#</a> 页面元素选择</h2> <h3 id="选择器-selector"><a href="#选择器-selector" class="header-anchor">#</a> 选择器 selector</h3> <p>选择器是标识测试中的网页元素的方法。选择器 API 提供了选择页面上的元素并获取其状态的方法和属性。</p> <p>要从 <code>testcafe</code> 模块导入 <code>Selector</code> 构造函数，调用此构造函数并将 CSS 选择器字符串作为参数传递。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> article <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.article-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Selector</code> 参数语法类似于 jQuery 选择器语法，他们都是使用的 <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors" target="_blank" rel="noopener noreferrer">CSS选择器<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> 语法。
在上面的例子中，我们选择了一个 class 为 <code>atricle-content</code> 的元素。
然后我们就可以使用这个选择器对对元素进行操作了。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span>
</code></pre></div><p>或者在断言方法中使用它</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>article<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">)</span>
</code></pre></div><p>甚至还可以编写一个匹配多个页面元素的选择器，然后按文本、属性等对它们进行过滤。
下面这两个例子首先选择了一个 class 为 <code>radio-button</code> 的元素，并且其中的文本为 &quot;Windows&quot;，第二个是含有属性为 <code>selected</code> 的元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> windowsRadioButton  <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.radio-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'Windows'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> selectedRadioButton <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.radio-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'selected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果需要在 DOM 树中查找特定元素，可以使用选择器 API 的<a href="">搜索方法</a>查找它。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> buttonWrapper <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.article-content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'#share-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="创建选择器"><a href="#创建选择器" class="header-anchor">#</a> 创建选择器</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Selector</span><span class="token punctuation">(</span> init <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>init</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>标识要选择的 DOM 节点</td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="">选择器选项</a></td></tr></tbody></table> <ul><li><p>使用一个 CSS 选择器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> usernameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#username'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>使用一个在客户端执行的函数，必须返回一个 <code>DOM node</code>，一组 <code>DOM nodes</code>， <code>NodeList</code>, <code>HTMLCollection</code>, <code>null</code> 或者 <code>undefined</code>，或者 Promise.resolve() 为以上内容的方法</p> <p>请注意，它不能使用一些外部变量，因为该方法是在浏览器中运行的</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> storedElementId <span class="token operator">=</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span>storedElementId<span class="token punctuation">;</span>
    <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>storedElementId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>一个 <code>Selector</code> 构造器</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ctaButton <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.cta-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Selector</span><span class="token punctuation">(</span>ctaButton<span class="token punctuation">,</span> <span class="token punctuation">{</span> visibilityCheck<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="使用选择器"><a href="#使用选择器" class="header-anchor">#</a> 使用选择器</h4> <p>本主题描述如何标识DOM元素并使用选择器获取关于它们的信息。</p> <h5 id="检查元素是否存在"><a href="#检查元素是否存在" class="header-anchor">#</a> 检查元素是否存在</h5> <p>选择器可能返回一个、多个或者不存在匹配的元素。您可以使用一下属性来检查元素是否存在，或者确定匹配元素的数量。</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>exists</code></td> <td>boolean</td> <td>如果匹配到元素则返回 <code>true</code></td></tr> <tr><td><code>count</code></td> <td>number</td> <td>选择器匹配的节点数量</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example page</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> osCount            <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.column.col-2 label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span>
  <span class="token keyword">const</span> submitButtonExists <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#submit-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>osCount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>submitButtonExists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>注意，选择器的 getter 是异步的</p></blockquote> <h5 id="获取元素的状态"><a href="#获取元素的状态" class="header-anchor">#</a> 获取元素的状态</h5> <p>你也可以获取选择器匹配元素的状态（size、position、classes 等）。有关<a href="#">元素的状态</a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/example/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> windowsInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#windows'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Obtain Element State'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>windowsInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> windowsInputChecked <span class="token operator">=</span> <span class="token keyword">await</span> windowsInput<span class="token punctuation">.</span>checked<span class="token punctuation">;</span> <span class="token comment">// returns true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="dom-节点快照"><a href="#dom-节点快照" class="header-anchor">#</a> DOM 节点快照</h6> <p>如果你需要获取整个 DOM 元素实例的状态，需要使用 <code>await</code> 来匹配</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'DOM Node Snapshot'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sliderHandle <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#slider'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> sliderHandleSnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sliderHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sliderHandleSnapshot<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'ui-slider-handle'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sliderHandleSnapshot<span class="token punctuation">.</span>childElementCount<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// =&gt; 0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="定义动作的目标"><a href="#定义动作的目标" class="header-anchor">#</a> 定义动作的目标</h5> <p>你还可以将选择器的返回值作为测试控制器操作的目标。DOM 节点快照同样可以。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#tried-section'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> labelSnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>labelSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>如果匹配到多个目标元素，那么只有匹配到的第一个元素将会被操作。</p> <h5 id="定义断言的目标"><a href="#定义断言的目标" class="header-anchor">#</a> 定义断言的目标</h5> <p>你可以将选择器的返回值作为断言的目标。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Assertion with Selector'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> developerNameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">,</span> <span class="token string">'Peter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Peter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="选择器超时"><a href="#选择器超时" class="header-anchor">#</a> 选择器超时</h5> <p>在测试期间，testcafe 会一次又一次的检查，等待目标元素变得可见，如果超时还不可见则不会通过测试用例。</p> <p><strong>如何设置超时</strong></p> <ul><li>你可以在选择器构造函数的<a href="#">选项</a>中指定超时时间。</li> <li>如果使用 API 进行测试，则需要在 <a href="#"><code>runner.run</code></a> 方法中指定。</li> <li>如果使用命令行启动，则需要指定<a href="#">选择器超时</a> 选项。</li></ul> <h5 id="调试选择器"><a href="#调试选择器" class="header-anchor">#</a> 调试选择器</h5> <p>Testcafe 会输出有关于测试报告运行失败时的详细信息。</p> <p>如果你尝试使用不匹配任何DOM元素的选择器时，测试失败并抛出一个错误。错误消息指示哪个选择器失败。</p> <p><img src="//static.mutoe.com/2018/testcafe/failed-selector-report.png" alt="failed selector report"></p> <h4 id="选择器的方法"><a href="#选择器的方法" class="header-anchor">#</a> 选择器的方法</h4> <h5 id="过滤-dom-节点"><a href="#过滤-dom-节点" class="header-anchor">#</a> 过滤 DOM 节点</h5> <p>如果选择器返回多个DOM节点，你可以对它们进行筛选，以选择一个最终将由选择器返回的节点。选择器提供了根据索引、文本、属性等过滤DOM节点的方法。</p> <h6 id="根据索引-nth"><a href="#根据索引-nth" class="header-anchor">#</a> 根据索引 (nth)</h6> <table><thead><tr><th>参数</th> <th>返回值类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>nth(index)</code></td> <td>Selector</td> <td>根据匹配集中的索引查找元素。<code>index</code> 参数为从 <code>0</code> 开始的索引，如果指定为负数，则从末尾开始计算索引。</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 返回第三个 ul 元素</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">// 返回最后一个 div 元素</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="根据文本-withtext-withexacttext"><a href="#根据文本-withtext-withexacttext" class="header-anchor">#</a> 根据文本 (withText / withExactText)</h5> <table><thead><tr><th>参数</th> <th>返回值类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>withText(text)</code></td> <td>Selector</td> <td>创建一个选择器，该选择器过滤指定<strong>文本</strong>的匹配项，选择包含此文本的元素。<code>text</code> 参数区分大小写。</td></tr> <tr><td><code>withExactText(text)</code></td> <td>Selector</td> <td>创建一个选择器，该选择器过滤指定<strong>文本</strong>的匹配项，将会严格匹配等于该文本的元素。<code>text</code> 参数区分大小写。</td></tr> <tr><td><code>withText(regexp)</code></td> <td>Selector</td> <td>创建一个选择器，该选择器过滤指定<strong>正则表达式</strong>的匹配项。</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 返回内容含有 'foo' 的 label 元素</span>
<span class="token comment">// 不会返回含有 'foobar' 或 'Foo' 的元素</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>

<span class="token comment">// 返回匹配 /a[b-e]/ 文本的 div 元素。</span>
<span class="token comment">// 会匹配 'ab', 'ac'。 不会匹配 'bb', 'aa'</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token regex">/a[b-e]/</span><span class="token punctuation">)</span>
</code></pre></div><p>需要注意， <code>withText</code> 不仅会留下立即包含指定文本的元素，还会留下它的祖先元素。比如</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>some text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 这个选择器会匹配 '.container' 和 '.child'</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'some text'</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="根据属性-withattribute"><a href="#根据属性-withattribute" class="header-anchor">#</a> 根据属性 (withAttribute)</h5> <table><thead><tr><th>参数</th> <th>返回值类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>withAttribute(attrName [, attrValue])</code></td> <td>Selector</td> <td>创建一个选择器，选择包含指定属性(或属性值)的元素。</td></tr></tbody></table> <table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>attrName</code></td> <td>string | RegExp</td> <td>属性名，区分大小写。</td></tr> <tr><td><code>attrValue</code> <em>(可选的)</em></td> <td>string | RegExp</td> <td>属性值，区分大小写。你可以省略它来匹配任何值。</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 匹配任何含有 href 属性的 a 标签</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span>

<span class="token comment">// 匹配 title 属性为‘图片’的 img 元素</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'图片'</span><span class="token punctuation">)</span>

<span class="token comment">// 匹配任何 src 属性以 'https://static.mutoe.com' 开头的 img 元素</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token regex">/^https?:\/\/static\.mutoe\.com/</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="根据可见性-filtervisible-filterhidden"><a href="#根据可见性-filtervisible-filterhidden" class="header-anchor">#</a> 根据可见性 (filterVisible / filterHidden)</h5> <table><thead><tr><th>参数</th> <th>返回值类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>filterVisible()</code></td> <td>Selector</td> <td>创建一个选择器，只留下可见的元素。这些元素<strong>没有</strong> <code>display: none;</code>, <code>visibility: hidden;</code>, <code>width: 0;</code> 或 <code>height: 0;</code> 这些属性</td></tr> <tr><td><code>filterHidden()</code></td> <td>Selector</td> <td>创建一个选择器，只留下不可见的元素。这些元素<strong>含有</strong> <code>display: none;</code>, <code>visibility: hidden;</code>, <code>width: 0;</code> 或 <code>height: 0;</code> 这些属性</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 选择所有可见的 div 元素</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filterVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// 选择所有隐藏的 input 元素</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filterHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="根据过滤器-filter"><a href="#根据过滤器-filter" class="header-anchor">#</a> 根据过滤器 (filter)</h5> <table><thead><tr><th>参数</th> <th>返回值类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>filter(cssSelector)</code></td> <td>Selector</td> <td>创建一个选择器，根据 css 选择器的语法过滤。</td></tr> <tr><td><code>filter(filterFn(node, idx), dependencies)</code></td> <td>Selector</td> <td>创建一个选择器，根据节点的状态过滤。</td></tr></tbody></table> <table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>cssSelector</code></td> <td>string</td> <td>css 选择器</td></tr> <tr><td><code>filterFn(node, idx)</code></td> <td>Function</td> <td>该方法将会在浏览器环境中执行</td></tr> <tr><td><code>dependencies</code></td> <td>Function</td> <td>需要传递到客户端的方法，否则调用时不会出现在浏览器上下文环境中</td></tr> <tr><td><code>node</code></td> <td>Element</td> <td>当前元素的 DOM node</td></tr> <tr><td><code>idx</code></td> <td>number</td> <td>当前 DOM node 所处的索引</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// 从所有 li 标签中挑选含有 'active' class 的元素</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'.active'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example page</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> secondCheckBox <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'checkbox'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> checkedInputs <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'checkbox'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> node<span class="token punctuation">.</span>checked<span class="token punctuation">)</span>

  <span class="token keyword">const</span> windowsLabel <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'Windows'</span><span class="token punctuation">)</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>secondCheckBox<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>checkedInputs<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>windowsLabel<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>如果所有的 DOM 都被过滤掉，<code>filter()</code> 选择器会返回 <code>null</code></p> <h5 id="根据关系-find-parent-child-sibling"><a href="#根据关系-find-parent-child-sibling" class="header-anchor">#</a> 根据关系 (find / parent / child / sibling)</h5> <table><thead><tr><th>参数</th> <th>返回值类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>find(cssSelector)</code></td> <td>Selector</td> <td>返回当前元素匹配的所有子节点，并通过 css 选择器筛选它们。</td></tr> <tr><td><code>find(filterFn, dependencies)</code></td> <td>Selector</td> <td>返回当前元素匹配的所有子节点，根据节点的状态过滤。</td></tr> <tr><td><code>parent()</code></td> <td>Selector</td> <td>返回当前元素匹配的父节点。（第一个元素将会是最近的父元素）</td></tr> <tr><td><code>parent(index)</code></td> <td>Selector</td> <td>返回当前元素匹配的父节点，并通过索引筛选它们。<code>0</code> 是最近的父元素，负数将会从根结点开始计算。</td></tr> <tr><td><code>parent(cssSelector)</code></td> <td>Selector</td> <td>返回当前元素匹配的父节点，并通过 css 选择器筛选。</td></tr> <tr><td><code>parent(filterFn, dependencies)</code></td> <td>Selector</td> <td>返回当前元素匹配的父节点，根据节点的状态过滤。</td></tr> <tr><td><code>child()</code></td> <td>Selector</td> <td>返回当前元素匹配的子节点。（第一个元素将会是最近的子元素）</td></tr> <tr><td><code>child(index)</code></td> <td>Selector</td> <td>返回当前元素匹配的子节点，并通过索引筛选它们。<code>0</code> 是最近的子元素，负数将会从根结点开始计算。</td></tr> <tr><td><code>child(cssSelector)</code></td> <td>Selector</td> <td>返回当前元素匹配的子节点，并通过 css 选择器筛选。</td></tr> <tr><td><code>child(filterFn, dependencies)</code></td> <td>Selector</td> <td>返回当前元素匹配的子节点，根据节点的状态过滤。</td></tr> <tr><td><code>sibling()</code></td> <td>Selector</td> <td>返回当前元素匹配的兄弟元素。（第一个元素将会是最近的兄弟元素）</td></tr> <tr><td><code>sibling(index)</code></td> <td>Selector</td> <td>返回当前元素匹配的兄弟元素，并通过索引筛选它们。以 <code>0</code> 开始，负数将会从末尾开始计算。</td></tr> <tr><td><code>sibling(cssSelector)</code></td> <td>Selector</td> <td>返回当前元素匹配的兄弟元素，并通过 css 选择器筛选。</td></tr> <tr><td><code>sibling(filterFn, dependencies)</code></td> <td>Selector</td> <td>返回当前元素匹配的兄弟元素，根据节点的状态过滤。</td></tr> <tr><td><code>nextSibling()</code></td> <td>Selector</td> <td>返回当前元素之后匹配的兄弟元素。（第一个元素将会是之后最近的兄弟元素）</td></tr> <tr><td><code>nextSibling(index)</code></td> <td>Selector</td> <td>返回当前元素之后匹配的兄弟元素，并通过索引筛选它们。以 <code>0</code> 开始，负数将会从末尾开始计算。</td></tr> <tr><td><code>nextSibling(cssSelector)</code></td> <td>Selector</td> <td>返回当前元素之后匹配的兄弟元素，并通过 css 选择器筛选。</td></tr> <tr><td><code>nextSibling(filterFn, dependencies)</code></td> <td>Selector</td> <td>返回当前元素之后匹配的兄弟元素，根据节点的状态过滤。</td></tr> <tr><td><code>prevSibling()</code></td> <td>Selector</td> <td>返回当前元素之前匹配的兄弟元素。（第一个元素将会是之前最近的兄弟元素）</td></tr> <tr><td><code>prevSibling(index)</code></td> <td>Selector</td> <td>返回当前元素之前匹配的兄弟元素，并通过索引筛选它们。以 <code>0</code> 开始，负数将会从末尾开始计算。</td></tr> <tr><td><code>prevSibling(cssSelector)</code></td> <td>Selector</td> <td>返回当前元素之前匹配的兄弟元素，并通过 css 选择器筛选。</td></tr> <tr><td><code>prevSibling(filterFn, dependencies)</code></td> <td>Selector</td> <td>返回当前元素之前匹配的兄弟元素，根据节点的状态过滤。</td></tr></tbody></table> <p><strong>例子</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token string">'div.someClass'</span><span class="token punctuation">)</span>
</code></pre></div><p>找到页面上的所有ul元素。然后，在每个已找到的ul元素中找到label元素。然后，为每个label元素找到一个匹配div.someClass选择器的父元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'yo!'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span>
</code></pre></div><p>这个例子做了以下事情：</p> <ul><li>找到 <code>.container</code> 元素的第二个父元素（父元素的父元素）</li> <li>选择匹配集中的第 1 个元素</li> <li>在该元素中，查找与 <code>.content</code> 选择器匹配的元素</li> <li>找到文本包含 'yo!' 的元素</li> <li>在每个已过滤的元素中，搜索标记名为 <code>span</code> 的子项。</li></ul> <h4 id="选择器选项-no"><a href="#选择器选项-no" class="header-anchor">#</a> 选择器选项 (no)</h4> <blockquote><p>暂未更新</p></blockquote> <h4 id="选择器拓展-no"><a href="#选择器拓展-no" class="header-anchor">#</a> 选择器拓展 (no)</h4> <blockquote><p>暂未更新</p></blockquote> <h4 id="边缘情况-no"><a href="#边缘情况-no" class="header-anchor">#</a> 边缘情况 (no)</h4> <blockquote><p>暂未更新</p></blockquote> <h3 id="dom-节点状态"><a href="#dom-节点状态" class="header-anchor">#</a> DOM 节点状态</h3> <blockquote><p>暂未更新</p></blockquote> <h3 id="特定框架的选择器-no"><a href="#特定框架的选择器-no" class="header-anchor">#</a> 特定框架的选择器 (no)</h3> <blockquote><p>暂未更新</p></blockquote> <h3 id="一些例子-no"><a href="#一些例子-no" class="header-anchor">#</a> 一些例子 (no)</h3> <blockquote><p>暂未更新</p></blockquote> <h2 id="动作"><a href="#动作" class="header-anchor">#</a> 动作</h2> <h3 id="单击-click"><a href="#单击-click" class="header-anchor">#</a> 单击 click</h3> <p>单击页面上的元素</p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E7%82%B9%E5%87%BB%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-click-action">点击动作选项</a></td></tr></tbody></table> <p>下面用一个例子来展示如何使用 <code>t.click</code> 动作来选择一个复选框元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Click a check box and check its state'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> checkbox <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#testing-on-remote-devices'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>checkbox<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>checkbox<span class="token punctuation">.</span>checked<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>下面一个例子使用 <code>options</code> 参数在输入框中设置光标位置</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Click Input'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter Parker'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> caretPos<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span><span class="token string">'backspace'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Pete Parker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="双击-doubleclick"><a href="#双击-doubleclick" class="header-anchor">#</a> 双击 doubleClick</h3> <p>双击页面上的元素</p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">doubleClick</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E7%82%B9%E5%87%BB%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-click-action">点击动作选项</a></td></tr></tbody></table> <h3 id="右击-rightclick"><a href="#右击-rightclick" class="header-anchor">#</a> 右击 rightClick</h3> <p>右击页面上的元素</p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">rightClick</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E7%82%B9%E5%87%BB%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-click-action">点击动作选项</a></td></tr></tbody></table> <h3 id="拖拽-drag"><a href="#拖拽-drag" class="header-anchor">#</a> 拖拽 drag</h3> <h4 id="拖拽一定距离-drag"><a href="#拖拽一定距离-drag" class="header-anchor">#</a> 拖拽一定距离 drag</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> dragOffsetX<span class="token punctuation">,</span> dragOffsetY <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td></tr> <tr><td><code>dragOffsetX</code></td> <td>Number</td> <td>鼠标在 x 轴上需要拖拽的距离</td></tr> <tr><td><code>dragOffsetY</code></td> <td>Number</td> <td>鼠标在 y 轴上需要拖拽的距离</td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E9%BC%A0%E6%A0%87%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-mouse-action">鼠标动作选项</a></td></tr></tbody></table> <p>下面一个例子来演示如何使用 <code>t.drag</code> 动作来拖拽元素</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Drag slider'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> slider <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-rating'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#i-tried-testcafe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>slider<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span><span class="token string">'.ui-slider-handle'</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> offsetX<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> offsetY<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>slider<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="拖拽到另一个元素上-dragtoelement"><a href="#拖拽到另一个元素上-dragtoelement" class="header-anchor">#</a> 拖拽到另一个元素上 dragToElement</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">dragToElement</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> destinationSelector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td></tr> <tr><td><code>destinationSelector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器, 拖拽目标元素，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E6%8B%96%E6%8B%BD%E5%88%B0%E5%85%83%E7%B4%A0%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-dragToElement-action">拖拽到元素动作选项</a></td></tr></tbody></table> <p>下面这个例子演示了如何使用 <code>t.dragToElement</code> 将元素拖放到特定区域</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Drag an item from the toolbox'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> designSurfaceItems <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.design-surface'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.items'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">dragToElement</span><span class="token punctuation">(</span><span class="token string">'.toolbox-item.text-input'</span><span class="token punctuation">,</span> <span class="token string">'.design-surface'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>designSurfaceItems<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="悬停-hover"><a href="#悬停-hover" class="header-anchor">#</a> 悬停 hover</h3> <p>将鼠标指针悬停在网页元素上</p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">hover</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E9%BC%A0%E6%A0%87%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-mouse-action">鼠标动作选项</a></td></tr></tbody></table> <p>使用此操作可以调用弹出元素，例如悬停在其他元素上时出现的提示窗口、弹出菜单或下拉列表。</p> <p>下面这例子演示如何将鼠标指针移动到组合框上显示下拉列表，然后选择一个项目并检查组合框的值。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Select combo box value'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> comboBox <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.combo-box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">hover</span><span class="token punctuation">(</span>comboBox<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#i-prefer-both'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>comboBox<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Both'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="选择文本-selecttext"><a href="#选择文本-selecttext" class="header-anchor">#</a> 选择文本 selectText</h3> <h4 id="在-input-元素中"><a href="#在-input-元素中" class="header-anchor">#</a> 在 input 元素中</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">selectText</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> startPos<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> endPos<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td> <td></td></tr> <tr><td><code>startPos</code> <em>(可选的)</em></td> <td>Number</td> <td>选择的起始位置，从 0 开始的整数</td> <td>0</td></tr> <tr><td><code>endPos</code> <em>(可选的)</em></td> <td>Number</td> <td>选择的结束位置，从 0 开始的整数</td> <td>可见文本的长度</td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E5%9F%BA%E6%9C%AC%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-basic-action">基本动作选项</a></td> <td></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> developerNameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> getElementSelectionStart <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=&gt;</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selectionStart<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getElementSelectionEnd <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=&gt;</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selectionEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Select text within input'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">,</span> <span class="token string">'Test Cafe'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> caretPos<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">selectText</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getElementSelectionStart</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getElementSelectionEnd</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>如果 <code>startPos</code> 的值大于 <code>endPos</code> 的值，则动作将执行向前选择。</p></blockquote> <h4 id="在-textarea-元素中"><a href="#在-textarea-元素中" class="header-anchor">#</a> 在 textarea 元素中</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">selectTextAreaContent</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> startLine<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> startPos<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> endLine<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> endPos<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td> <td></td></tr> <tr><td><code>startLine</code> <em>(可选的)</em></td> <td>Number</td> <td>选择开始的行号，从 0 开始的整数</td> <td>0</td></tr> <tr><td><code>startPos</code> <em>(可选的)</em></td> <td>Number</td> <td>选择的起始位置，从 0 开始的整数</td> <td>0</td></tr> <tr><td><code>endLine</code> <em>(可选的)</em></td> <td>Number</td> <td>选择结束的行号，从 0 开始的整数</td> <td>最后一行的索引</td></tr> <tr><td><code>endPos</code> <em>(可选的)</em></td> <td>Number</td> <td>选择的结束位置(基于 <code>endline</code>)，从 0 开始的整数</td> <td><code>endLine</code> 的最后一个字符</td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E5%9F%BA%E6%9C%AC%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-basic-action">基本动作选项</a></td> <td></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> commentTextArea <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#comments'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> getElementSelectionStart <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=&gt;</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selectionStart<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getElementSelectionEnd   <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=&gt;</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selectionEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Select text within textarea'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#tried-test-cafe'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>commentTextArea<span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">'Lorem ipsum dolor sit amet'</span><span class="token punctuation">,</span>
      <span class="token string">'consectetur adipiscing elit'</span><span class="token punctuation">,</span>
      <span class="token string">'sed do eiusmod tempor'</span>
    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">',\n'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">selectTextAreaContent</span><span class="token punctuation">(</span>commentTextArea<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getElementSelectionStart</span><span class="token punctuation">(</span>commentTextArea<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getElementSelectionEnd</span><span class="token punctuation">(</span>commentTextArea<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">67</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>如果 <code>startLine</code> 比 <code>endLine</code> 的值大，则执行向前选择。</p></blockquote> <h4 id="在-contenteditable-元素中"><a href="#在-contenteditable-元素中" class="header-anchor">#</a> 在 contentEditable 元素中</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">selectEditableContent</span><span class="token punctuation">(</span> startSelector<span class="token punctuation">,</span> endSelector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>startSelector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>标识开始选择的元素 selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td> <td></td></tr> <tr><td><code>endSelector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>标识结束选择的元素 selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td> <td></td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E5%9F%BA%E6%9C%AC%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-basic-action">基本动作选项</a></td> <td></td></tr></tbody></table> <p>此方法适用于启用了 <code>contentEditable</code> 属性的 HTML 元素。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Delete text within a contentEditable element'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">selectEditableContent</span><span class="token punctuation">(</span><span class="token string">'#foreword'</span><span class="token punctuation">,</span> <span class="token string">'#chapter-3'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span><span class="token string">'delete'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#chapter-2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#chapter-4'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="键入文本-typetext"><a href="#键入文本-typetext" class="header-anchor">#</a> 键入文本 typeText</h3> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> text <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">选择器</a></td></tr> <tr><td><code>text</code></td> <td>string</td> <td>要在指定元素中输入的文本</td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E8%BE%93%E5%85%A5%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-typing-action">输入动作选项</a></td></tr></tbody></table> <blockquote><p>如果要删除文本，请使用 <a href="#%E9%80%89%E6%8B%A9%E6%96%87%E6%9C%AC-selectText"><code>t.selectText</code></a> 和 <a href="#%E6%8C%89%E9%94%AE-pressKey"><code>t.pressKey</code></a> 来实现</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Type and Replace'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Paker'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> caretPos<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Parker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>注意</strong></p> <p>某些类型的HTML5输入（如 DateTime ， Color 或 Range）需要以特定格式输入值。</p> <p>The following table lists value formats expected by these inputs.</p> <table><thead><tr><th>输入类型</th> <th>模式</th> <th>例子</th></tr></thead> <tbody><tr><td>Date</td> <td><code>yyyy-MM-dd</code></td> <td><code>2018-10-25</code></td></tr> <tr><td>Week</td> <td><code>yyyy-Www</code></td> <td><code>2018-W03</code></td></tr> <tr><td>Month</td> <td><code>yyyy-MM</code></td> <td><code>2018-10</code></td></tr> <tr><td>DateTime</td> <td><code>yyyy-MM-ddThh:mm</code></td> <td><code>2018-10-25T13:22</code></td></tr> <tr><td>Time</td> <td><code>hh:mm</code></td> <td><code>13:22:28</code></td></tr> <tr><td>Color</td> <td><code>#rrggbb</code></td> <td><code>#003500</code></td></tr> <tr><td>Range</td> <td><code>n</code></td> <td><code>45</code></td></tr></tbody></table></blockquote> <h3 id="按键-presskey"><a href="#按键-presskey" class="header-anchor">#</a> 按键 pressKey</h3> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span> keys <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>keys</code></td> <td>string</td> <td>要在指定元素中输入的文本</td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>选项, 有关<a href="#%E5%9F%BA%E6%9C%AC%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-basic-action">基本动作选项</a></td></tr></tbody></table> <p>下表显示了如何指定不同类型，键序列和组合的键。</p> <table><thead><tr><th>按键类型</th> <th>例子</th></tr></thead> <tbody><tr><td>字母和数字</td> <td><code>a</code>, <code>A</code>, <code>1</code></td></tr> <tr><td>修饰键</td> <td><code>shift</code>, <code>alt</code>(<code>⌥</code>), <code>ctrl</code>, <code>meta</code>(<code>⌘</code>)</td></tr> <tr><td>导航和操作键</td> <td><code>backspace</code>, <code>tab</code>, <code>enter</code>, <code>capslock</code>, <code>esc</code>, <code>space</code>, <code>pageup</code>, <code>pagedown</code>, <code>end</code>, <code>home</code>, <code>left</code>, <code>right</code>, <code>up</code>, <code>down</code>, <code>ins</code>, <code>delete</code></td></tr> <tr><td>组合键</td> <td><code>shift+a</code>, <code>ctrl+d</code></td></tr> <tr><td>一番操作</td> <td><code>ctrl+a del</code>, <code>ctrl+a ctrl+c</code> (自由组合按键，并使用空格分隔它们)</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Key Presses'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter Parker'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span><span class="token string">'home right . delete delete delete delete'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'P. Parker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="页面跳转-navigateto"><a href="#页面跳转-navigateto" class="header-anchor">#</a> 页面跳转 navigateTo</h3> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span> url <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>url</code></td> <td>string</td> <td>要导航到的 URL 地址。可以是绝对地址或相对地址</td></tr></tbody></table> <p>下面的例子来演示如何导航到一个绝对地址</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Navigate to the main page'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#submit-button'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>在重定向发生后，TestCafe 会自动等待服务器响应。如果服务器在 15s 内没有响应，测试将会被恢复(?)。</p> <h3 id="截图-takescreenshot"><a href="#截图-takescreenshot" class="header-anchor">#</a> 截图 takeScreenshot</h3> <h4 id="获取整页的屏幕截图-takescreenshot"><a href="#获取整页的屏幕截图-takescreenshot" class="header-anchor">#</a> 获取整页的屏幕截图 takeScreenshot</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">takeScreenshot</span><span class="token punctuation">(</span> <span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>path</code> <em>(可选的)</em></td> <td>string</td> <td>截图文件保存的相对路径和名称，该相对路径是基于命令行制定的基本目录。</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Take a screenshot of a fieldset'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">,</span> <span class="token string">'Peter Parker'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#submit-button'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">takeScreenshot</span><span class="token punctuation">(</span><span class="token string">'my-fixture/thank-you-page.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="获取页面元素的屏幕截图-takeelementscreenshot"><a href="#获取页面元素的屏幕截图-takeelementscreenshot" class="header-anchor">#</a> 获取页面元素的屏幕截图 takeElementScreenshot</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">takeScreenshot</span><span class="token punctuation">(</span> <span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector 选择器，有关<a href="">选择目标元素</a></td></tr> <tr><td><code>path</code> <em>(可选的)</em></td> <td>string</td> <td>截图文件保存的相对路径和名称，该相对路径是基于命令行制定的基本目录。</td></tr> <tr><td><code>options</code> <em>(可选的)</em></td> <td>Object</td> <td>用于定义屏幕截图截取方式的选项。详情见下文。</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Take a screenshot of a fieldset'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#reusing-js-code'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#continuous-integration-embedding'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">takeElementScreenshot</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'fieldset'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'my-fixture/important-features.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>options</code> 对象包含以下属性</p> <table><thead><tr><th>属性</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>scrollTargetX</code>, <code>scrollTargetY</code></td> <td>number</td> <td>该点的坐标，是相对于目标元素计算的。</td> <td>元素的中心。</td></tr> <tr><td><code>includeMargins</code></td> <td>boolean</td> <td>是否包含外边距 (margin)</td> <td><code>false</code></td></tr> <tr><td><code>includeBorders</code></td> <td>boolean</td> <td>是否包含边框 (border)</td> <td><code>true</code></td></tr> <tr><td><code>includePaddings</code></td> <td>boolean</td> <td>是否包含内边距 (padding)</td> <td><code>true</code></td></tr> <tr><td><code>crop</code></td> <td>Object</td> <td>是否允许裁剪屏幕截图上的目标元素。</td> <td>裁剪到整个元素。如果它不适合窗口大小，则为其可见部分。</td></tr></tbody></table> <p><code>crop</code> 对象具有以下字段</p> <table><thead><tr><th>字段</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>top</code></td> <td>number</td> <td>裁剪矩形的上边缘。如果传递负数，则从元素的下边缘计算坐标。</td></tr> <tr><td><code>left</code></td> <td>number</td> <td>裁剪矩形的左边缘。如果传递负数，则从元素的右边缘计算坐标。</td></tr> <tr><td><code>bottom</code></td> <td>number</td> <td>裁剪矩形的下边缘。如果传递负数，则从元素的上边缘计算坐标。</td></tr> <tr><td><code>right</code></td> <td>number</td> <td>裁剪矩形的右边缘。如果传递负数，则从元素的左边缘计算坐标。</td></tr></tbody></table> <p><img src="//static.mutoe.com/2018/testcafe/screenshot-crop.png" alt="take screenshot"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Take a screenshot of my new avatar'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#change-avatar'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setFilesToUpload</span><span class="token punctuation">(</span><span class="token string">'#upload-input'</span><span class="token punctuation">,</span> <span class="token string">'img/portrait.jpg'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#submit'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">takeElementScreenshot</span><span class="token punctuation">(</span><span class="token string">'#avatar'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      includeMargins<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      crop<span class="token operator">:</span> <span class="token punctuation">{</span>
        top<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span>
        left<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        bottom<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
        right<span class="token operator">:</span> <span class="token number">200</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="上传-setfilestoupload-no"><a href="#上传-setfilestoupload-no" class="header-anchor">#</a> 上传 setFilesToUpload (no)</h3> <blockquote><p>暂未更新</p></blockquote> <h3 id="调整窗口尺寸-resize-no"><a href="#调整窗口尺寸-resize-no" class="header-anchor">#</a> 调整窗口尺寸 resize (no)</h3> <blockquote><p>暂未更新</p></blockquote> <h3 id="动作选项-options"><a href="#动作选项-options" class="header-anchor">#</a> 动作选项 options</h3> <h4 id="基本动作选项-basic-action"><a href="#基本动作选项-basic-action" class="header-anchor">#</a> 基本动作选项 basic action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>speed</code></td> <td>number</td> <td>动作的速度，在 <code>1</code>(最大速度) 和 <code>0.01</code>(最小速度) 之间</td> <td><code>1</code></td></tr></tbody></table> <p>基本动作选项用于 <code>t.pressKey</code>，<code>t.selectText</code>，<code>t.selectTextAreaContent</code> 和 <code>t.selectEditableContent</code> 动作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">' Parker'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> speed<span class="token operator">:</span> <span class="token number">0.1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="鼠标动作选项-mouse-action"><a href="#鼠标动作选项-mouse-action" class="header-anchor">#</a> 鼠标动作选项 mouse action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
    ctrl<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    alt<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    shift<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  offsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  offsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>ctrl</code> <code>alt</code> <code>shift</code> <code>meta</code></td> <td>boolean</td> <td>在鼠标操作期间要按下的修饰键</td> <td><code>false</code></td></tr> <tr><td><code>offsetX</code> <code>offsetY</code></td> <td>number</td> <td>鼠标指针坐标，正整数从左上角计算，负整数从右下角计算</td> <td>目标元素的中心</td></tr> <tr><td><code>speed</code></td> <td>number</td> <td>动作的速度，在 <code>1</code>(最大速度) 和 <code>0.01</code>(最小速度) 之间</td> <td><code>1</code></td></tr></tbody></table> <p>鼠标动作选项用于 <code>t.drag</code> 和 <code>t.hover</code> 动作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span>sliderHandle<span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      offsetX<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      offsetY<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
        shift<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="拖拽到元素动作选项-dragtoelement-action"><a href="#拖拽到元素动作选项-dragtoelement-action" class="header-anchor">#</a> 拖拽到元素动作选项 dragToElement action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
    ctrl<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    alt<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    shift<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  offsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  offsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  destinationOffsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  destinationOffsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>ctrl</code> <code>alt</code> <code>shift</code> <code>meta</code></td> <td>boolean</td> <td>在鼠标操作期间要按下的修饰键</td> <td><code>false</code></td></tr> <tr><td><code>offsetX</code> <code>offsetY</code></td> <td>number</td> <td>鼠标指针坐标，正整数从左上角计算，负整数从右下角计算</td> <td>目标元素的中心</td></tr> <tr><td><code>destinationOffsetX</code> <code>destinationOffsetY</code></td> <td>number</td> <td>鼠标拖拽完成时的指针坐标，正整数从左上角计算，负整数从右下角计算</td> <td>目标元素的中心</td></tr> <tr><td><code>speed</code></td> <td>number</td> <td>动作的速度，在 <code>1</code>(最大速度) 和 <code>0.01</code>(最小速度) 之间</td> <td><code>1</code></td></tr></tbody></table> <p>拖拽到元素动作选项用于 <code>t.dragToElement</code> 动作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fileIcon      <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.file-icon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> directoryPane <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.directory'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">dragToElement</span><span class="token punctuation">(</span>fileIcon<span class="token punctuation">,</span> directoryPane<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      offsetX<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      offsetY<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      destinationOffsetX<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
      destinationOffsetY<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
        shift<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="点击动作选项-click-action"><a href="#点击动作选项-click-action" class="header-anchor">#</a> 点击动作选项 click action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
    ctrl<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    alt<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    shift<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  offsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  offsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  caretPos<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>ctrl</code> <code>alt</code> <code>shift</code> <code>meta</code></td> <td>boolean</td> <td>在鼠标操作期间要按下的修饰键</td> <td><code>false</code></td></tr> <tr><td><code>offsetX</code> <code>offsetY</code></td> <td>number</td> <td>鼠标指针坐标，正整数从左上角计算，负整数从右下角计算</td> <td>目标元素的中心</td></tr> <tr><td><code>caretPos</code></td> <td>number</td> <td>如果在输入元素上执行动作，则为初始插入符号位置，从零开始的整数。</td> <td>文本长度</td></tr> <tr><td><code>speed</code></td> <td>number</td> <td>动作的速度，在 <code>1</code>(最大速度) 和 <code>0.01</code>(最小速度) 之间</td> <td><code>1</code></td></tr></tbody></table> <p>点击操作选项用于 <code>t.click</code>，<code>t.doubleClick</code> 和 <code>t.rightClick</code> 动作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Pete Parker'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> caretPos<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span><span class="token string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="输入动作选项-typing-action"><a href="#输入动作选项-typing-action" class="header-anchor">#</a> 输入动作选项 typing action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
    ctrl<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    alt<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    shift<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  offsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  offsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  caretPos<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  replace<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
  paste<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>ctrl</code> <code>alt</code> <code>shift</code> <code>meta</code></td> <td>boolean</td> <td>在鼠标操作期间要按下的修饰键</td> <td><code>false</code></td></tr> <tr><td><code>offsetX</code> <code>offsetY</code></td> <td>number</td> <td>鼠标指针坐标，正整数从左上角计算，负整数从右下角计算</td> <td>目标元素的中心</td></tr> <tr><td><code>caretPos</code></td> <td>number</td> <td>如果在输入元素上执行动作，则为初始插入符号位置，从零开始的整数。</td> <td>文本长度</td></tr> <tr><td><code>replace</code></td> <td>boolean</td> <td>是否替换原有文本</td> <td><code>false</code></td></tr> <tr><td><code>paste</code></td> <td>boolean</td> <td>是否使用粘贴的方式一次性键入文本</td> <td><code>false</code></td></tr> <tr><td><code>speed</code></td> <td>number</td> <td>动作的速度，在 <code>1</code>(最大速度) 和 <code>0.01</code>(最小速度) 之间</td> <td><code>1</code></td></tr></tbody></table> <p>输入动作选项用于 <code>t.typeText</code> 动作。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Parker'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="断言-2"><a href="#断言-2" class="header-anchor">#</a> 断言</h2> <p>你可以使用断言来检查测试的网页状态是否与预期状态匹配。<br>
TestCafe 提供了一组基于行为驱动开发风格（BDD风格）的断言方法。</p> <h3 id="构造断言"><a href="#构造断言" class="header-anchor">#</a> 构造断言</h3> <p>要构造一个断言，可以使用测试控制器 (<code>t</code>) 的 expect 方法。</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span>
</code></pre></div><p>这个构造方法接受一个实际值，可以是 selector 的 DOM 节点状态属性或者是一个从页面中侦听到的 promise 对象。
TestCafe 会自动等待节点状态值的变动。</p> <p>接下来跟一个断言方法，他接受期望值和一些其他的可选参数。</p> <h3 id="断言方法"><a href="#断言方法" class="header-anchor">#</a> 断言方法</h3> <h4 id="等于-eql"><a href="#等于-eql" class="header-anchor">#</a> 等于 eql</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>expected</code></td> <td>Any</td> <td>期望值</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'这个断言将会通过'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'这个断言将会失败，并且这句话会被打印出来'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.className'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="不等于-noteql"><a href="#不等于-noteql" class="header-anchor">#</a> 不等于 notEql</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notEql</span><span class="token punctuation">(</span> unexpected <span class="token punctuation">[</span><span class="token punctuation">,</span> message<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>unexpected</code></td> <td>Any</td> <td>不期望的值</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notEql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'这个断言将会失败，并且这句话会被打印出来'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notEql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'这个断言将会通过'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.className'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notEql</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="真值-ok"><a href="#真值-ok" class="header-anchor">#</a> 真值 ok</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">'这个断言将会通过'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">'这个断言将会失败，并且这句话会被打印出来'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="假值-notok"><a href="#假值-notok" class="header-anchor">#</a> 假值 notOk</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span><span class="token string">'这个断言将会失败，并且这句话会被打印出来'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span><span class="token string">'这个断言将会通过'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="包含-contains"><a href="#包含-contains" class="header-anchor">#</a> 包含 contains</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>expected</code></td> <td>Any</td> <td>期望值</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo bar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：字符串 &quot;foo bar&quot; 里面不含有期望的 &quot;bar&quot; 子串'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：数组中不含有期望的值'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> hello<span class="token operator">:</span> <span class="token string">'universe'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：对象中不含有期望的属性'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> getLocation <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'example.com'</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：网址不包含期望的值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="不包含-notcontains"><a href="#不包含-notcontains" class="header-anchor">#</a> 不包含 notContains</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span> unexpected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>unexpected</code></td> <td>Any</td> <td>不期望的值</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo bar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：字符串中含有不期望的子串'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：数组中含有不期望的值'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> hello<span class="token operator">:</span> <span class="token string">'universe'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span><span class="token punctuation">{</span> buzz<span class="token operator">:</span> <span class="token string">'abc'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：对象中含有不期望的属性'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> getLocation <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span><span class="token string">'example.com'</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：网址包含了不被期望的值'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="类型等于-tyoeof"><a href="#类型等于-tyoeof" class="header-anchor">#</a> 类型等于 tyoeOf</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span> typeName <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>typeName</code></td> <td>string</td> <td>期望的 <code>actual</code> 的类型</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：比较值不是对象'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token regex">/bar/</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span><span class="token string">'regexp'</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：比较值不是正则表达式'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：比较值不为null'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'attr'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="类型不等于-nottypeof"><a href="#类型不等于-nottypeof" class="header-anchor">#</a> 类型不等于 notTypeOf</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notTypeOf</span><span class="token punctuation">(</span> typeName <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>typeName</code></td> <td>string</td> <td>不期望的 <code>actual</code> 的类型</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notTypeOf</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：比较值不是数字类型'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'attr'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notTypeOf</span><span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="大于-gt"><a href="#大于-gt" class="header-anchor">#</a> 大于 gt</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>expected</code></td> <td>Any</td> <td>期望的值</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'用例未通过：比较值应该比 2 大'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="大于等于-gte"><a href="#大于等于-gte" class="header-anchor">#</a> 大于等于 gte</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>用法同 <a href="#%E5%A4%A7%E4%BA%8E-gt"><code>gt</code></a></p> <h4 id="小于-lt"><a href="#小于-lt" class="header-anchor">#</a> 小于 lt</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>用法同 <a href="#%E5%A4%A7%E4%BA%8E-gt"><code>gt</code></a></p> <h4 id="小于等于-lte"><a href="#小于等于-lte" class="header-anchor">#</a> 小于等于 lte</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>用法同 <a href="#%E5%A4%A7%E4%BA%8E-gt"><code>gt</code></a></p> <h4 id="在某个范围-within"><a href="#在某个范围-within" class="header-anchor">#</a> 在某个范围 within</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> finish <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>number</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>start</code></td> <td>number</td> <td>范围下限（包含）</td></tr> <tr><td><code>finish</code></td> <td>number</td> <td>范围上限（包含）</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'这个断言将会通过'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="不在某个范围-notwithin"><a href="#不在某个范围-notwithin" class="header-anchor">#</a> 不在某个范围 notWithin</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notWithin</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> finish <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>用法同 <a href="#%E5%9C%A8%E6%9F%90%E4%B8%AA%E8%8C%83%E5%9B%B4-within"><code>within</code></a></p> <h4 id="正则匹配-match"><a href="#正则匹配-match" class="header-anchor">#</a> 正则匹配 match</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> regexp <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>string</td> <td>比较值，如果是一个 promise 对象，TestCafe 会自动等待值的变化</td></tr> <tr><td><code>regexp</code></td> <td>RegExp</td> <td>用来匹配 <code>actual</code> 的正则表达式</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>如果测试失败，需要在测试报告中输出的字符串</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>参见<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">断言选项</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^f/</span><span class="token punctuation">,</span> <span class="token string">'这个断言将会通过'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> getLocation <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\.com/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="非正则匹配-notmatch"><a href="#非正则匹配-notmatch" class="header-anchor">#</a> 非正则匹配 notMatch</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notMatch</span><span class="token punctuation">(</span> regexp <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>用法同 <a href="#%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D-match"><code>match</code></a></p> <h3 id="断言选项"><a href="#断言选项" class="header-anchor">#</a> 断言选项</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  timeout<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  allowUnawaitedPromise<span class="token operator">:</span> Boolean
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th> <th>默认值</th></tr></thead> <tbody><tr><td><code>timeout</code></td> <td>number</td> <td>如果在断言中使用了属性选择器或客户端函数，可等待的最大时间 (单位：ms)</td> <td></td></tr> <tr><td><code>allowUnawaitedPromise</code></td> <td>boolean</td> <td>如果你要断言一个常规的 promise 方法，请将该选项设置为 <code>true</code></td> <td></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#elementId'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'在 500ms 内检查元素的文本'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> timeout<span class="token operator">:</span> <span class="token number">500</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">doSomethingAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">'检查异步函数是否含回了 promise 对象'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> allowUnawaitedPromise<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="客户端方法-no"><a href="#客户端方法-no" class="header-anchor">#</a> 客户端方法 (no)</h2> <blockquote><p>暂未更新</p></blockquote> <h2 id="等待"><a href="#等待" class="header-anchor">#</a> 等待</h2> <p>无论出于什么原因，让测试暂停一小会</p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span> timeout <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>参数</th> <th>类型</th> <th>描述</th></tr></thead> <tbody><tr><td><code>timeout</code></td> <td>number</td> <td>暂停的持续时间，单位 ms</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#play-1-sec-animation'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>header<span class="token punctuation">.</span><span class="token function">getStyleProperty</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/justwe7/blog/edit/feature/广度知识/testcafe.md" target="_blank" rel="noopener noreferrer">纠正错误</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近提交:</span> <span class="time">2/19/2021, 5:39:29 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/广度知识/shell-运算符.html" class="prev">shell-运算符</a></span> <span class="next"><a href="/blog/广度知识/vimium自用速查.html">vimium自用速查</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/blog/assets/js/app.2b65cc84.js" defer></script><script src="/blog/assets/js/2.9c8da183.js" defer></script><script src="/blog/assets/js/45.294aa832.js" defer></script>
  </body>
</html>
