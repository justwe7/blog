<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>ç®€ä»‹ | å‰ç«¯æ—¥å¿—</title>
    <meta name="description" content="åœŸè±†å’ŒåœŸè±†ä¸çš„å­¦ä¹ è®°å½•">
    <link rel="icon" href="/blog/favorite.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.244ca03c.css" as="style"><link rel="preload" href="/blog/assets/js/app.2b65cc84.js" as="script"><link rel="preload" href="/blog/assets/js/2.9c8da183.js" as="script"><link rel="preload" href="/blog/assets/js/45.294aa832.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.f4b9808b.js"><link rel="prefetch" href="/blog/assets/js/11.17753fa8.js"><link rel="prefetch" href="/blog/assets/js/12.eed41aa4.js"><link rel="prefetch" href="/blog/assets/js/13.2cbdc8f2.js"><link rel="prefetch" href="/blog/assets/js/14.c71b01e9.js"><link rel="prefetch" href="/blog/assets/js/15.4b7c71de.js"><link rel="prefetch" href="/blog/assets/js/16.55b235e6.js"><link rel="prefetch" href="/blog/assets/js/17.611a1b55.js"><link rel="prefetch" href="/blog/assets/js/18.42680970.js"><link rel="prefetch" href="/blog/assets/js/19.6b0ff29f.js"><link rel="prefetch" href="/blog/assets/js/20.49fb4f8f.js"><link rel="prefetch" href="/blog/assets/js/21.5490e3f0.js"><link rel="prefetch" href="/blog/assets/js/22.0cbe4eb6.js"><link rel="prefetch" href="/blog/assets/js/23.0d6f1752.js"><link rel="prefetch" href="/blog/assets/js/24.4207d03c.js"><link rel="prefetch" href="/blog/assets/js/25.047d0f1e.js"><link rel="prefetch" href="/blog/assets/js/26.8143fab4.js"><link rel="prefetch" href="/blog/assets/js/27.d4112cc7.js"><link rel="prefetch" href="/blog/assets/js/28.883ca809.js"><link rel="prefetch" href="/blog/assets/js/29.eb0a0979.js"><link rel="prefetch" href="/blog/assets/js/3.d2b25e93.js"><link rel="prefetch" href="/blog/assets/js/30.dc4a32e4.js"><link rel="prefetch" href="/blog/assets/js/31.bb74dcc9.js"><link rel="prefetch" href="/blog/assets/js/32.19b9b2ad.js"><link rel="prefetch" href="/blog/assets/js/33.1c5b491a.js"><link rel="prefetch" href="/blog/assets/js/34.4449dbb9.js"><link rel="prefetch" href="/blog/assets/js/35.de6137d1.js"><link rel="prefetch" href="/blog/assets/js/36.f90f55dc.js"><link rel="prefetch" href="/blog/assets/js/37.6774285b.js"><link rel="prefetch" href="/blog/assets/js/38.40333629.js"><link rel="prefetch" href="/blog/assets/js/39.93e0dfab.js"><link rel="prefetch" href="/blog/assets/js/4.31f14a68.js"><link rel="prefetch" href="/blog/assets/js/40.ae2ff175.js"><link rel="prefetch" href="/blog/assets/js/41.18cb6f45.js"><link rel="prefetch" href="/blog/assets/js/42.d18f15b7.js"><link rel="prefetch" href="/blog/assets/js/43.93d1cf0f.js"><link rel="prefetch" href="/blog/assets/js/44.2e68a699.js"><link rel="prefetch" href="/blog/assets/js/46.4173b20d.js"><link rel="prefetch" href="/blog/assets/js/47.4bcbe3f2.js"><link rel="prefetch" href="/blog/assets/js/48.16b7b98a.js"><link rel="prefetch" href="/blog/assets/js/49.89a9d560.js"><link rel="prefetch" href="/blog/assets/js/5.9f0256c8.js"><link rel="prefetch" href="/blog/assets/js/50.3d1fcdf9.js"><link rel="prefetch" href="/blog/assets/js/51.33050d1b.js"><link rel="prefetch" href="/blog/assets/js/52.fe886e37.js"><link rel="prefetch" href="/blog/assets/js/53.a237ef53.js"><link rel="prefetch" href="/blog/assets/js/54.0817b5a4.js"><link rel="prefetch" href="/blog/assets/js/55.34909e91.js"><link rel="prefetch" href="/blog/assets/js/56.833686de.js"><link rel="prefetch" href="/blog/assets/js/57.ee3140fa.js"><link rel="prefetch" href="/blog/assets/js/58.a7e7d812.js"><link rel="prefetch" href="/blog/assets/js/6.9afed123.js"><link rel="prefetch" href="/blog/assets/js/7.b09c9cf4.js"><link rel="prefetch" href="/blog/assets/js/8.bbc14bdf.js"><link rel="prefetch" href="/blog/assets/js/9.2f86661d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.244ca03c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">å‰ç«¯æ—¥å¿—</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>åŸºç¡€æ¦‚å¿µ</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>å¹¿åº¦çŸ¥è¯†</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/gitpage+vuepress+jenkinsé™æ€åšå®¢.html" class="sidebar-link">gitpage+vuepress+jen...</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/httpæŠ¥æ–‡-æ¦‚å¿µçŠ¶æ€ç .html" class="sidebar-link">httpæŠ¥æ–‡-æ¦‚å¿µçŠ¶æ€ç </a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/httpæŠ¥æ–‡-é¦–éƒ¨.html" class="sidebar-link">httpæŠ¥æ–‡-é¦–éƒ¨</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/linuxå¸¸ç”¨æŒ‡ä»¤.html" class="sidebar-link">linuxå¸¸ç”¨æŒ‡ä»¤</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/markdown.html" class="sidebar-link">markdown</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/node.html" class="sidebar-link">node</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-echo&amp;printf.html" class="sidebar-link">shell-echo&amp;printf</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-testéªŒè¯.html" class="sidebar-link">shell-testéªŒè¯</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-ä¼ é€’å‚æ•°.html" class="sidebar-link">shell-ä¼ é€’å‚æ•°</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-å‡½æ•°.html" class="sidebar-link">shell-å‡½æ•°</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-åŸºç¡€.html" class="sidebar-link">shell-åŸºç¡€</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-æ¨¡å—åŒ–.html" class="sidebar-link">shell-æ¨¡å—åŒ–</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-æµç¨‹æ§åˆ¶-if&amp;for.html" class="sidebar-link">shell-æµç¨‹æ§åˆ¶-if&amp;for</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-ç–‘é—®è®°å½•.html" class="sidebar-link">shell-ç–‘é—®è®°å½•</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-è¾“å…¥è¾“å‡ºé‡å®šå‘.html" class="sidebar-link">shell-è¾“å…¥è¾“å‡ºé‡å®šå‘</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-è¿ç®—ç¬¦.html" class="sidebar-link">shell-è¿ç®—ç¬¦</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html" class="active sidebar-link">testcafe</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®" class="sidebar-link">åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•è„šæœ¬" class="sidebar-link">ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•è„šæœ¬</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#è¿è¡Œæµ‹è¯•è„šæœ¬" class="sidebar-link">è¿è¡Œæµ‹è¯•è„šæœ¬</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#ç¼–å†™æµ‹è¯•ä»£ç " class="sidebar-link">ç¼–å†™æµ‹è¯•ä»£ç </a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#å°ç»“" class="sidebar-link">å°ç»“</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#æµ‹è¯•ä»£ç ç»“æ„" class="sidebar-link">æµ‹è¯•ä»£ç ç»“æ„</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#é¡µé¢å…ƒç´ é€‰æ‹©" class="sidebar-link">é¡µé¢å…ƒç´ é€‰æ‹©</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#åŠ¨ä½œ" class="sidebar-link">åŠ¨ä½œ</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#æ–­è¨€-2" class="sidebar-link">æ–­è¨€</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#å®¢æˆ·ç«¯æ–¹æ³•-no" class="sidebar-link">å®¢æˆ·ç«¯æ–¹æ³• (no)</a></li><li class="sidebar-sub-header"><a href="/blog/å¹¿åº¦çŸ¥è¯†/testcafe.html#ç­‰å¾…" class="sidebar-link">ç­‰å¾…</a></li></ul></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/vimiumè‡ªç”¨é€ŸæŸ¥.html" class="sidebar-link">vimiumè‡ªç”¨é€ŸæŸ¥</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/vscode.html" class="sidebar-link">vscode</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/webåŠç½‘ç»œåŸºç¡€.html" class="sidebar-link">webåŠç½‘ç»œåŸºç¡€</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/windowså¿«æ·é”®.html" class="sidebar-link">windowså¿«æ·é”®</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/windowè¶…å¥½ç”¨çš„ç»ˆç«¯é…ç½®.html" class="sidebar-link">windowè¶…å¥½ç”¨çš„ç»ˆç«¯é…ç½®</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/ä»€ä¹ˆæ˜¯https.html" class="sidebar-link">ä»€ä¹ˆæ˜¯https</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/æå‡å‘½ä»¤è¡Œæ•ˆç‡çš„Bashå¿«æ·é”®.html" class="sidebar-link">æå‡å‘½ä»¤è¡Œæ•ˆç‡çš„Bashå¿«æ·é”®</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/ç®€å•äº†è§£httpåè®®.html" class="sidebar-link">ç®€å•äº†è§£httpåè®®</a></li><li><a href="/blog/å¹¿åº¦çŸ¥è¯†/è‡ªåŠ¨åŒ–éƒ¨ç½²å¾®ä¿¡å°ç¨‹åº.html" class="sidebar-link">è‡ªåŠ¨åŒ–éƒ¨ç½²å¾®ä¿¡å°ç¨‹åº</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>æ·±åº¦çŸ¥è¯†</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="header-anchor">#</a> ç®€ä»‹</h1> <p>testcafe (<a href="https://devexpress.github.io/testcafe/" target="_blank" rel="noopener noreferrer">å®˜ç½‘<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>) æ˜¯ä¸€ä¸ªåŸºäº nodejs çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ï¼Œä¼˜ç‚¹å°±å…ˆä¸å¤šè¯´äº†ï¼Œæˆ‘ä»¬ç›´æ¥è¿›å…¥æ­£é¢˜ï¼</p> <h1 id="å®‰è£…"><a href="#å®‰è£…" class="header-anchor">#</a> å®‰è£…</h1> <p>testcafe æ˜¯ä¸€ä¸ª npm åŒ…ï¼Œå®ƒå¯ä»¥ä½¿ç”¨ npm æˆ– yarn åŒ…ç®¡ç†å™¨è¿›è¡Œå®‰è£…ï¼Œè¿™é‡Œæˆ‘ä»¬ä½¿ç”¨ yarn è¿›è¡Œå®‰è£…ï¼ˆå› ä¸ºå®ƒå¾ˆå¿«ï¼‰</p> <blockquote><p>å¦‚æœä½ çš„æœºå™¨ä¸Šæ²¡æœ‰å®‰è£… yarnï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ npm æ¥å®‰è£… yarn ğŸ˜Š</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> -g <span class="token function">yarn</span>
</code></pre></div><p>åœ¨å‘½ä»¤è¡Œä¸­è¿è¡Œä»¥ä¸‹å‘½ä»¤</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">yarn</span> global <span class="token function">add</span> testcafe
</code></pre></div><p>è¿™æ ·ï¼Œ testcafe å°±å®‰è£…åœ¨ä½ æœ¬æœºä¸Šå•¦</p> <h1 id="å°è¯•ç‰›åˆ€"><a href="#å°è¯•ç‰›åˆ€" class="header-anchor">#</a> å°è¯•ç‰›åˆ€</h1> <h2 id="åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®"><a href="#åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®" class="header-anchor">#</a> åˆ›å»ºä¸€ä¸ªæµ‹è¯•é¡¹ç›®</h2> <p>æˆ‘ä»¬æ–°å»ºä¸€ä¸ªç›®å½•ï¼Œç”¨äºç»ƒä¹ æˆ‘ä»¬çš„è‡ªåŠ¨åŒ–æµ‹è¯•æ¡†æ¶ testcafe</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># é¦–å…ˆåˆ‡æ¢åˆ°ä½ ç”¨äºç®¡ç† web é¡¹ç›®çš„æ ¹ç›®å½•ï¼Œæˆ‘æœ¬æœºæ˜¯ &quot;~/www&quot;</span>
<span class="token builtin class-name">cd</span> ~/www
<span class="token function">mkdir</span> testcafe <span class="token operator">&amp;&amp;</span> <span class="token builtin class-name">cd</span> testcafe
</code></pre></div> <h2 id="ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•è„šæœ¬"><a href="#ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•è„šæœ¬" class="header-anchor">#</a> ç¼–å†™ç¬¬ä¸€ä¸ªæµ‹è¯•è„šæœ¬</h2> <p>ç„¶åæ–°å»ºä¸€ä¸ªåä¸º <code>myFirstTestcase.js</code> æ–‡ä»¶ï¼Œç”¨äºç¼–å†™æˆ‘ä»¬çš„è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">vim</span> myFirstTestcase.js <span class="token comment"># ç”¨ vim æ‰“å¼€è¿™ä¸ªæ–‡ä»¶ï¼ˆå¦‚æœæ–‡ä»¶ä¸å­˜åœ¨å°±åˆ›å»ºå®ƒï¼‰</span>
</code></pre></div><blockquote><p>å¦‚æœä½ å®‰è£…äº† vscodeï¼Œä½ è¿˜å¯ä»¥ä½¿ç”¨ <code>code myFirstTestcase.js</code> æ¥åˆ›å»ºå¹¶ç¼–è¾‘å®ƒ
<em>éœ€è¦åœ¨ vscode çš„æ§åˆ¶å®ƒä¸­è¾“å…¥ <code>install command</code> æ¥å¯ç”¨ <code>code</code> å‘½ä»¤</em></p></blockquote> <p>å°†ä»¥ä¸‹å†…å®¹ç²˜è´´åˆ° <code>myFirstTestcase.js</code> ä¸­</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES6 å¯¼åŒ…è¯­æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token comment">// å£°æ˜ä¸€ä¸ª fixture æµ‹è¯•é¡¹ç›®</span>
<span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'Getting Started'</span><span class="token punctuation">)</span>
  <span class="token comment">// æ‰“å¼€ä¸€ä¸ª web é¡µé¢ç”¨äºæ¥ä¸‹æ¥çš„æµ‹è¯•</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/example'</span><span class="token punctuation">)</span>

<span class="token comment">// åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My first test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Test code</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ª test script å°±å†™å¥½äº†ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æ¥è¿è¡Œå®ƒçœ‹çœ‹</p> <h2 id="è¿è¡Œæµ‹è¯•è„šæœ¬"><a href="#è¿è¡Œæµ‹è¯•è„šæœ¬" class="header-anchor">#</a> è¿è¡Œæµ‹è¯•è„šæœ¬</h2> <p>æˆ‘ä»¬å›åˆ°å‘½ä»¤è¡Œä¸­ï¼Œæ‰§è¡Œä»¥ä¸‹å‘½ä»¤æ¥è¿è¡Œä¸€ä¸ªæµ‹è¯•è„šæœ¬</p> <div class="language-bash extra-class"><pre class="language-bash"><code>testcafe chrome myFirstTestcase.js
</code></pre></div><blockquote><p>è¿™ä¸ªå‘½ä»¤ä¸­ï¼Œ</p> <ul><li><code>testcafe</code> æ˜¯æˆ‘ä»¬ä½¿ç”¨åŒ…ç®¡ç†å·¥å…·å…¨å±€å®‰è£…çš„ä¾èµ–ï¼Œtestcafe æ˜¯å®ƒçš„å¯æ‰§è¡Œç¨‹åº</li> <li><code>chrome</code> æ˜¯æˆ‘ä»¬çš„æµ‹è¯•å¹³å°ï¼Œå®‰è£…åœ¨æœ¬æœºçš„æµè§ˆå™¨ï¼Œä¹Ÿå¯ä»¥æ˜¯ <code>safari</code> <code>firefox</code> ç­‰</li> <li><code>myFirstTestcase.js</code> æ˜¯æˆ‘ä»¬ç¼–å†™çš„æµ‹è¯•è„šæœ¬</li></ul></blockquote> <p>ç¨ç­‰ç‰‡åˆ»ï¼Œæˆ‘ä»¬çš„æµè§ˆå™¨å°±ä¼šè¢«è‡ªåŠ¨æ‰“å¼€ç„¶åè¿è¡Œæµ‹è¯•è„šæœ¬ï¼Œæœ€åæµè§ˆå™¨è¢«è‡ªåŠ¨å…³é—­ï¼Œåœ¨ç»ˆç«¯ä¸Šç•™ä¸‹äº†æµ‹è¯•ç»“æœã€‚</p> <p><img src="//static.mutoe.com/2018/testcafe/test-report.png" alt="test report"></p> <h2 id="ç¼–å†™æµ‹è¯•ä»£ç "><a href="#ç¼–å†™æµ‹è¯•ä»£ç " class="header-anchor">#</a> ç¼–å†™æµ‹è¯•ä»£ç </h2> <p>åˆšæ‰æˆ‘ä»¬çš„æµ‹è¯•è„šæœ¬åªæ˜¯ç®€å•çš„æ‰“å¼€äº†ä¸€ä¸ªé¡µé¢ï¼Œå®ƒå¹¶æ²¡æœ‰æ‰§è¡Œä»»ä½•åŠ¨ä½œã€‚</p> <blockquote><p>åœ¨æ¥ä¸‹æ¥çš„å‡ ä¸ªä¾‹å­ä¸­ï¼Œä½ å¯ä»¥æ‰“å¼€æµ‹è¯•ç›®æ ‡ç½‘ç«™ <a href="http://devexpress.github.io/testcafe/example" target="_blank" rel="noopener noreferrer">http://devexpress.github.io/testcafe/example<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> è¿™ä¸ªé¡µé¢ï¼Œç„¶åæ‰“å¼€æ§åˆ¶å°ï¼Œè§‚å¯Ÿå…¶ DOM ç»“æ„ï¼Œå¹¶è¯•ç€æ¨¡æ‹Ÿè„šæœ¬çš„æ“ä½œï¼Œä»¥ä¾¿æ–¹ä¾¿çš„ç†è§£è„šæœ¬çš„å†…å®¹ã€‚</p></blockquote> <h3 id="åœ¨é¡µé¢ä¸Šæ‰§è¡Œæ“ä½œ"><a href="#åœ¨é¡µé¢ä¸Šæ‰§è¡Œæ“ä½œ" class="header-anchor">#</a> åœ¨é¡µé¢ä¸Šæ‰§è¡Œæ“ä½œ</h3> <p>æ¥ä¸‹æ¥æˆ‘ä»¬ç®€å•çš„å†™ä¸¤ä¸ªåŠ¨ä½œï¼Œç”¨æ¥å¯¹é¡µé¢è¿›è¡Œæ“ä½œã€‚<br>
æ‰“å¼€ <code>myFirstTestcase.js</code>ï¼Œåœ¨ <code>test</code> æ–¹æ³•çš„å›è°ƒå‡½æ•°ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged">  test('My first test', async t =&gt; {
</span><span class="token deleted-sign deleted">-   // Test code
</span><span class="token inserted-sign inserted">+   await t
+     .typeText('#developer-name', 'John Smith')
+     .click('#submit-button');
</span><span class="token unchanged">  });
</span></code></pre></div><p>t æ˜¯æˆ‘ä»¬çš„æµ‹è¯•ç”¨ä¾‹çš„æ§åˆ¶å™¨ï¼Œå®ƒåˆå¾ˆå¤šæ–¹æ³•ï¼Œåœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬è°ƒç”¨äº†å®ƒçš„ <code>typeText</code> å’Œ <code>click</code> ä¸¤ä¸ªæ–¹æ³•ï¼Œå…¶ä¸­</p> <ul><li><code>typeText</code> æ–¹æ³•ç”¨æ¥é”®å…¥æ–‡æœ¬ï¼Œå®ƒæ¥å—ä¸¤ä¸ªå‚æ•°ï¼šç¬¬ä¸€ä¸ªå‚æ•°æ˜¯ selector é€‰æ‹©å™¨ï¼ˆå®ƒçš„è¯­æ³•ç±»ä¼¼ jQuery é€‰æ‹©å™¨çš„è¯­æ³•ï¼‰ï¼›ç¬¬äºŒä¸ªå‚æ•°æ˜¯ä½ è¦é”®å…¥çš„æ–‡æœ¬ï¼›</li> <li><code>click</code> æ–¹æ³•ç”¨æ¥æ¨¡æ‹Ÿé¼ æ ‡ç‚¹å‡»ï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼Œæ˜¯ä¸€ä¸ª selector é€‰æ‹©å™¨</li></ul> <blockquote><p>æœ‰å…³è¿™ä¸ªæ§åˆ¶å™¨çš„æ›´å¤šæ–¹æ³•ï¼Œè¯·å…ˆå‚è€ƒ <a href="https://devexpress.github.io/testcafe/documentation/test-api/actions/" target="_blank" rel="noopener noreferrer">TestCafe å®˜æ–¹ API æ‰‹å†Œ<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> (å®ƒæ˜¯ä¸€ä¸ªè‹±æ–‡æ–‡æ¡£ï¼Œç¨åæˆ‘ä¼šæ•´ç†å‡ºè¿™ä¸ªæ–‡æ¡£çš„ä¸­æ–‡æ‰‹å†Œåœ¨æœ¬é¡µä¸‹æ–¹)</p></blockquote> <p>è¿™æ®µä»£ç çš„ä½œç”¨æ˜¯ï¼š</p> <ol><li>é¦–å…ˆæ‰¾åˆ° id ä¸º <code>developer-name</code> çš„æ ‡ç­¾ï¼Œè¾“å…¥å€¼ 'John Smith'</li> <li>ç„¶åç‚¹å‡» id ä¸º <code>submit-button</code> çš„æŒ‰é’®</li></ol> <h3 id="è§‚å¯Ÿé¡µé¢çš„å˜åŒ–"><a href="#è§‚å¯Ÿé¡µé¢çš„å˜åŒ–" class="header-anchor">#</a> è§‚å¯Ÿé¡µé¢çš„å˜åŒ–</h3> <p>ä¸Šé¢ä¸€å°èŠ‚æˆ‘ä»¬å¯¹é¡µé¢è¿›è¡Œäº†äº¤äº’ï¼Œæ¥ä¸‹æ¥æˆ‘ä»¬æƒ³çŸ¥é“é¡µé¢è¿›è¡Œäº†ä»€ä¹ˆååº”ï¼Œä¹Ÿå°±æ˜¯è§‚å¯Ÿçš„é¡µé¢å˜åŒ–ã€‚</p> <p>æˆ‘ä»¬å¯¹æµ‹è¯•è„šæœ¬è¿›è¡Œä¿®æ”¹</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged">  test('My first test', async t =&gt; {
    await t
      .typeText('#developer-name', 'John Smith')
      .click('#submit-button');
</span><span class="token inserted-sign inserted">+
+   const articleHeader = await Selector('.result-content').find('h1');
+
+   // è·å– article header çš„å†…å®¹æ–‡æœ¬
+   let headerText = await articleHeader.innerText;
</span><span class="token unchanged">  });
</span></code></pre></div><p>åœ¨æˆ‘ä»¬ç‚¹å‡»é¡µé¢ä¸Šçš„â€œæäº¤â€æŒ‰é’®åï¼Œä¼šæ‰“å¼€ä¸€ä¸ªâ€œè°¢è°¢â€é¡µé¢ã€‚<br>
å¦‚æœæˆ‘ä»¬è¦è®¿é—®é¡µé¢ä¸Šçš„ DOM å…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨æµ‹è¯•è„šæœ¬é¡¶éƒ¨å¯¼å…¥çš„ Selector æ–¹æ³•</p> <ol><li>L6ï¼Œæˆ‘ä»¬å£°æ˜äº†ä¸€ä¸ª <code>articleHeader</code> å˜é‡ï¼Œè¿™ä¸ªå˜é‡çš„å€¼æ˜¯æ ¹æ®é€‰æ‹©å™¨ <code>.result-content &gt; h1</code> æ‰¾åˆ°çš„ DOM å…ƒç´ </li> <li>L9ï¼Œæˆ‘ä»¬åˆå£°æ˜äº†ä¸€ä¸ª <code>headerText</code> å˜é‡ï¼Œå®ƒçš„å€¼æ˜¯æˆ‘ä»¬è·å–åˆ°çš„ DOM å…ƒç´ çš„ <code>innerText</code> å±æ€§ï¼ˆè¿™ä¸ªå±æ€§çš„å€¼æ˜¯ DOM å…ƒç´ çš„å†…å®¹æ–‡æœ¬ï¼‰</li></ol> <h3 id="æ–­è¨€"><a href="#æ–­è¨€" class="header-anchor">#</a> æ–­è¨€</h3> <p>æˆ‘ä»¬æ‹¿åˆ°éœ€è¦åˆ¤æ–­çš„å€¼åï¼Œå°±å¯ä»¥å¯¹æµ‹è¯•ç”¨ä¾‹è¿›è¡Œæ–­è¨€äº†ã€‚<br>
å®ƒåˆ°åº•èƒ½å¦æ­£ç¡®æ‰§è¡Œæµ‹è¯•ç”¨ä¾‹å¹¶è¾“å‡ºæˆ‘ä»¬æœŸæœ›çš„ç»“æœï¼Ÿ</p> <p>æˆ‘ä»¬ä½¿ç”¨æµ‹è¯•ç”¨ä¾‹æ§åˆ¶å™¨çš„ <code>t.expect()</code> æ–¹æ³•æ¥è¿›è¡Œæ–­è¨€,<br>
å°†æµ‹è¯•è„šæœ¬æ”¹å†™ä¸ºä»¥ä¸‹å†…å®¹</p> <div class="language-diff extra-class"><pre class="language-diff"><code><span class="token unchanged">  test('My first test', async t =&gt; {
    await t
      .typeText('#developer-name', 'John Smith')
      .click('#submit-button');
</span>
<span class="token deleted-sign deleted">-   const articleHeader = await Selector('.result-content').find('h1');
-
-   // è·å– article header çš„å†…å®¹æ–‡æœ¬
-   let headerText = await articleHeader.innerText;
</span><span class="token inserted-sign inserted">+   // ä½¿ç”¨æ–­è¨€æ–¹æ³•æ¥åˆ¤æ–­æˆ‘ä»¬è·å–åˆ°çš„å€¼ä¸æˆ‘ä»¬æœŸæœ›çš„å€¼æ˜¯å¦ç›¸ç­‰
+   .expect(Selector('#article-header').innerText).eql('Thank you, John Smith!');
</span><span class="token unchanged">  });
</span></code></pre></div><ul><li><p>L11 <code>expect()</code> æ˜¯ä¸€ä¸ª BDDï¼ˆè¡Œä¸ºé©±åŠ¨å¼€å‘ï¼‰é£æ ¼çš„æ–­è¨€æ–¹æ³•, å®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼šéœ€è¦è¿›è¡Œæ–­è¨€çš„å˜é‡ï¼›<br>
å®ƒè¿”å›ä¸€ä¸ªæ–­è¨€ç±»å®ä¾‹å¯¹è±¡ï¼Œåè·Ÿä¸€ä¸ªæ–­è¨€æ–¹æ³•ã€‚</p></li> <li><p><code>eql()</code> æ˜¯ä¸€ä¸ªæ–­è¨€æ–¹æ³•ï¼Œç”¨äºåˆ¤æ–­æ–­è¨€å®ä¾‹ä¸æœŸæœ›å€¼æ˜¯å¦ä¸¥æ ¼ç­‰äºï¼Œå®ƒæ¥å—ä¸€ä¸ªå‚æ•°ï¼šæœŸæœ›å€¼ï¼›<br>
è¯¥ç±»æ–­è¨€æ–¹æ³•ä¼šåœ¨æ‰“å°å‡ºç›¸åº”çš„æµ‹è¯•æŠ¥å‘Šï¼Œå¦‚æœç›¸ç­‰åˆ™è¿”å› passï¼Œå¦åˆ™æŠ›å‡ºä¸€ä¸ª AssertionError</p> <p><img src="//static.mutoe.com/2018/testcafe/assertion-error.png" alt="assertion error"></p></li></ul> <h2 id="å°ç»“"><a href="#å°ç»“" class="header-anchor">#</a> å°ç»“</h2> <p>åˆ°è¿™é‡Œï¼Œæˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªè‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬å°±å®Œæˆäº†ï¼Œå¦‚æœä½ æ²¡æœ‰è·‘é€šçš„è¯ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹ä½ çš„æµ‹è¯•è„šæœ¬æ˜¯å¦ä¸ä»¥ä¸‹å†…å®¹ä¸€è‡´</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ES6 å¯¼åŒ…è¯­æ³•</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span>

<span class="token comment">// å£°æ˜ä¸€ä¸ª fixture æµ‹è¯•é¡¹ç›®</span>
<span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'Getting Started'</span><span class="token punctuation">)</span>
  <span class="token comment">// æ‰“å¼€ä¸€ä¸ª web é¡µé¢ç”¨äºæ¥ä¸‹æ¥çš„æµ‹è¯•</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/example'</span><span class="token punctuation">)</span>

<span class="token comment">// åˆ›å»ºä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My first test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">,</span> <span class="token string">'John Smith'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#submit-button'</span><span class="token punctuation">)</span>

    <span class="token comment">// ä½¿ç”¨æ–­è¨€æ–¹æ³•æ¥åˆ¤æ–­æˆ‘ä»¬è·å–åˆ°çš„å€¼ä¸æˆ‘ä»¬æœŸæœ›çš„å€¼æ˜¯å¦ç›¸ç­‰</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#article-header'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Thank you, John Smith!1'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre></div><h1 id="api-æ–‡æ¡£-unfinished"><a href="#api-æ–‡æ¡£-unfinished" class="header-anchor">#</a> API æ–‡æ¡£ (unfinished)</h1> <h2 id="æµ‹è¯•ä»£ç ç»“æ„"><a href="#æµ‹è¯•ä»£ç ç»“æ„" class="header-anchor">#</a> æµ‹è¯•ä»£ç ç»“æ„</h2> <h3 id="æµ‹è¯•ç»„-fixtures"><a href="#æµ‹è¯•ç»„-fixtures" class="header-anchor">#</a> æµ‹è¯•ç»„ Fixtures</h3> <p>TestCafe æµ‹è¯•å¿…é¡»å°†ä¸€äº›æµ‹è¯•ç»„ç»‡èµ·æ¥ï¼Œæµ‹è¯•ç»„ (Fixtures) å°±åƒæ˜¯ä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå°†åŒä¸€ç±»çš„æµ‹è¯•åŒ…è£¹èµ·æ¥ã€‚
ä¸€ä¸ªæµ‹è¯•æ–‡ä»¶å¯ä»¥åŒ…å«å¾ˆå¤šæµ‹è¯•ç»„ã€‚</p> <p>è¦å£°æ˜ä¸€ä¸ªæµ‹è¯•ç»„ï¼Œä½¿ç”¨ <code>fixture</code> æ–¹æ³•</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span> fixtrueName <span class="token punctuation">)</span>

<span class="token comment">// æˆ–ä¸‹é¢è¿™ç§ç”¨æ³•</span>
fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">fixtureName</span><span class="token template-punctuation string">`</span></span>

</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>fixtureName</code></td> <td>string</td> <td>æµ‹è¯•ç»„çš„åç§°</td></tr></tbody></table> <p>å®ƒè¿”å›ä¸€ä¸ªæµ‹è¯•ç»„å¯¹è±¡ï¼Œå¯ä»¥æ¥æµ‹è¯•ç»„æ–¹æ³•ï¼Œæœ‰å…³è¿™äº›æ–¹æ³•ï¼Œè¯·å‚è€ƒä¸‹æ–¹ç›¸å…³ APIã€‚</p> <blockquote><p>è¯·æ³¨æ„ï¼Œæµ‹è¯•æ–¹æ³• <code>test</code> å¿…é¡»æ”¾åœ¨æµ‹è¯•ç»„å£°æ˜åé¢ã€‚</p></blockquote> <h3 id="æµ‹è¯•ç”¨ä¾‹-tests"><a href="#æµ‹è¯•ç”¨ä¾‹-tests" class="header-anchor">#</a> æµ‹è¯•ç”¨ä¾‹ Tests</h3> <p>ä½ å¯ä»¥ä½¿ç”¨ <code>test</code> æ–¹æ³•å£°æ˜ä¸€ä¸ªæµ‹è¯•ç”¨ä¾‹ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span> testName<span class="token punctuation">,</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>testName</code></td> <td>string</td> <td>æµ‹è¯•ç”¨ä¾‹çš„åç§°</td></tr> <tr><td><code>fn</code></td> <td>Function</td> <td>åŒ…å«æµ‹è¯•ä»£ç çš„å¼‚æ­¥å‡½æ•°</td></tr> <tr><td><code>t</code></td> <td>Object</td> <td>æµ‹è¯•ç”¨ä¾‹çš„<a href="#">æµ‹è¯•æ§åˆ¶å™¨</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'MyFixture'</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test1'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* Test 1 Code */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test2'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">/* Test 2 Code */</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>TestCafe æµ‹è¯•åœ¨æœåŠ¡å™¨ç«¯æ‰§è¡Œã€‚
ä½ å¯ä»¥ä½¿ç”¨<a href="#%E5%8A%A8%E4%BD%9C">æµ‹è¯•åŠ¨ä½œ</a>æ¥æ“çºµæµ‹è¯•çš„ç½‘é¡µã€‚
è¦ç¡®å®šé¡µé¢å…ƒç´ çš„çŠ¶æ€æˆ–ä»å®¢æˆ·ç«¯è·å–ä»»ä½•å…¶ä»–æ•°æ®ï¼Œè¯·ä½¿ç”¨<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a>å’Œå®¢æˆ·ç«¯æ–¹æ³•ã€‚</p> <p>è¦æ£€æŸ¥é¡µé¢çŠ¶æ€æ˜¯å¦ä¸é¢„æœŸé¡µé¢çŠ¶æ€åŒ¹é…ï¼Œè¯·ä½¿ç”¨<a href="#%E6%96%AD%E8%A8%80">æ–­è¨€</a>ã€‚</p> <h4 id="æµ‹è¯•æ§åˆ¶å™¨-test-controller"><a href="#æµ‹è¯•æ§åˆ¶å™¨-test-controller" class="header-anchor">#</a> æµ‹è¯•æ§åˆ¶å™¨ Test Controller</h4> <p>å¦‚æœè¦ä½¿ç”¨<a href="#%E5%8A%A8%E4%BD%9C">æµ‹è¯•åŠ¨ä½œ</a>ã€<a href="#%E6%96%AD%E8%A8%80">æ–­è¨€</a>ã€æˆ–è€…<a href="#%E7%AD%89%E5%BE%85">ç­‰å¾…</a>, å¿…é¡»æŒ‚åœ¨åœ¨æµ‹è¯•æ§åˆ¶å™¨ä¸Š.</p> <h3 id="æŒ‡å®šèµ·å§‹é¡µé¢"><a href="#æŒ‡å®šèµ·å§‹é¡µé¢" class="header-anchor">#</a> æŒ‡å®šèµ·å§‹é¡µé¢</h3> <p>æ‚¨å¯ä»¥æŒ‡å®š fixture ä¸­æ‰€æœ‰æµ‹è¯•å¯åŠ¨æ—¶çš„ web é¡µé¢ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span> url <span class="token punctuation">)</span>
fixture<span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><p>ç±»ä¼¼çš„ï¼Œä½ ä¹Ÿå¯ä»¥ä¸ºç‰¹å®šçš„æµ‹è¯•ç”¨ä¾‹ç½®é¡¶ä¸€ä¸ªèµ·å§‹çš„ web é¡µé¢ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>test<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span> url <span class="token punctuation">)</span>
test<span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">url</span><span class="token template-punctuation string">`</span></span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>url</code></td> <td>string</td> <td>æŒ‡å®šèµ·å§‹é¡µé¢çš„ URL</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'MyFixture'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/example'</span><span class="token punctuation">)</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test1'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// Starts at http://devexpress.github.io/testcafe/example</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

test<span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/blog/'</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token string">'Test2'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">// Starts at http://devexpress.github.io/testcafe/blog/</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å¦‚æœæ²¡æœ‰æŒ‡å®šèµ·å§‹é¡µé¢ï¼Œåˆ™æ‰“å¼€ <code>about:blank</code> é¡µé¢ã€‚</p> <p>ä½ ä¹Ÿå¯ä»¥ä½¿ç”¨ <code>file://</code> åè®®æˆ–ç›¸å¯¹è·¯å¾„</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'MyFixture'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'file:///user/my-website/index.html'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">fixture</span><span class="token punctuation">(</span><span class="token string">'MyFixture'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'../my-project/index.html'</span><span class="token punctuation">)</span>
</code></pre></div><h3 id="æµ‹è¯•å…ƒæ•°æ®"><a href="#æµ‹è¯•å…ƒæ•°æ®" class="header-anchor">#</a> æµ‹è¯•å…ƒæ•°æ®</h3> <p>ä½ å¯ä»¥ä½¿ç”¨é”®å€¼å¯¹çš„æ–¹å¼ä¸ºæµ‹è¯•æŒ‡å®šå…ƒæ•°æ®ï¼Œå¹¶åœ¨æµ‹è¯•æŠ¥å‘Šä¸­å±•ç¤ºè¿™äº›å…ƒæ•°æ®ã€‚</p> <p>è¦å®šä¹‰å…ƒæ•°æ®ï¼Œè¯·ä½¿ç”¨ <code>meta</code> æ–¹æ³•ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture
  <span class="token punctuation">.</span><span class="token function">meta</span><span class="token punctuation">(</span><span class="token string">'fixtureID'</span><span class="token punctuation">,</span> <span class="token string">'f-0001'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">meta</span><span class="token punctuation">(</span><span class="token punctuation">{</span> author<span class="token operator">:</span> <span class="token string">'John'</span><span class="token punctuation">,</span> creationDate<span class="token operator">:</span> <span class="token string">'05/03/2018'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  
test
  <span class="token punctuation">.</span><span class="token function">meta</span><span class="token punctuation">(</span><span class="token string">'testID'</span><span class="token punctuation">,</span> <span class="token string">'t-0001'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">meta</span><span class="token punctuation">(</span><span class="token punctuation">{</span> severity<span class="token operator">:</span> <span class="token string">'critical'</span><span class="token punctuation">,</span> testedAPIVersion<span class="token operator">:</span> <span class="token string">'1.0'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token string">'MyTest'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>ä½ å¯ä»¥ä½¿ç”¨ <a href="https://devexpress.github.io/testcafe/documentation/extending-testcafe/reporter-plugin/" target="_blank" rel="noopener noreferrer">custom reporter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> æ¥è®¿é—®æµ‹è¯•å…ƒæ•°æ®ã€‚</p> <p>æŠ¥å‘Šå™¨çš„ <code>reportFixtureStart</code> å’Œ <code>reportTestDone</code> æ–¹æ³•æ¥è®¿é—®æµ‹è¯•å…ƒæ•°æ®</p> <h3 id="é’©å­"><a href="#é’©å­" class="header-anchor">#</a> é’©å­</h3> <h4 id="æµ‹è¯•ç»„é’©å­"><a href="#æµ‹è¯•ç»„é’©å­" class="header-anchor">#</a> æµ‹è¯•ç»„é’©å­</h4> <p>åœ¨æ¯ä¸ªæµ‹è¯•ç»„å¼€å§‹å‰ã€ç»“æŸåï¼Œéƒ½å¯ä»¥æ‰§è¡Œç‰¹å®šçš„æ–¹æ³•ï¼Œå®ƒå«åšé’©å­ã€‚å¦‚æœä¸€ä¸ªæµ‹è¯•åœ¨å¤šä¸ªæµè§ˆå™¨ä¸­è¿è¡Œï¼Œåˆ™åœ¨æ¯ä¸ªæµè§ˆå™¨ä¸­éƒ½ä¼šæ‰§è¡ŒæŒ‡å®šé’©å­ã€‚</p> <p>ä½ å¯ä»¥æŒ‡å®šæµ‹è¯•ç»„å¼€å§‹å‰ã€ç»“æŸåæ‰§è¡Œçš„é’©å­</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://example.com</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* fixture initialization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">ctx</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token comment">/* fixture finalization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="æµ‹è¯•ç”¨ä¾‹é’©å­"><a href="#æµ‹è¯•ç”¨ä¾‹é’©å­" class="header-anchor">#</a> æµ‹è¯•ç”¨ä¾‹é’©å­</h4> <p>åœ¨æ¯æ¬¡æµ‹è¯•çš„å¼€å§‹å‰ã€ç»“æŸåï¼Œä¹Ÿæœ‰ç›¸åº”çš„é’©å­ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>
fixture<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>

test<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>
test<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span> <span class="token function">fn</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span> <span class="token punctuation">)</span>
</code></pre></div><blockquote><p>å¦‚æœæŒ‡å®šäº† <code>test.before()</code> æˆ– <code>test.after()</code>ï¼Œ é‚£ä¹ˆå®ƒä¼šè¦†ç›– <code>fixture.beforeEach()</code> æˆ– <code>fixture.afterEach()</code> çš„é’©å­ã€‚</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code>fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://example.com</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* test initialization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* test finalization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

test
  <span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* test initialization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">(</span><span class="token string">'MyTest'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
      <span class="token comment">/* test finalization code */</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="åœ¨é’©å­å’Œæµ‹è¯•ä»£ç ä¹‹é—´å…±äº«å˜é‡"><a href="#åœ¨é’©å­å’Œæµ‹è¯•ä»£ç ä¹‹é—´å…±äº«å˜é‡" class="header-anchor">#</a> åœ¨é’©å­å’Œæµ‹è¯•ä»£ç ä¹‹é—´å…±äº«å˜é‡</h4> <p>é€šè¿‡ä½¿ç”¨æµ‹è¯•çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œæ¥å…±äº«åœ¨é’©å­å’Œæµ‹è¯•ä»£ç ä¹‹é—´çš„å˜é‡ã€‚</p> <p>æµ‹è¯•çš„ä¸Šä¸‹æ–‡å¯¹è±¡ä¸º <code>t.ctx</code>ï¼Œä½¿ç”¨å®ƒæ¥ä»£æ›¿å…¨å±€å˜é‡ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture1</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">t</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    t<span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>someProp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span>
  <span class="token punctuation">(</span><span class="token string">'Test1'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>someProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &gt; 123</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>ctx<span class="token punctuation">.</span>someProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &gt; 123</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ¯ä¸ªæµ‹è¯•éƒ½æœ‰è‡ªå·±çš„æµ‹è¯•ä¸Šä¸‹æ–‡å¯¹è±¡ã€‚æ¯æ¬¡æµ‹è¯•å¼€å§‹æ—¶ï¼Œ<code>t.ctx</code> éƒ½æ˜¯ä¸€ä¸ªç©ºçš„å¯¹è±¡ã€‚</p></blockquote> <p>åœ¨æµ‹è¯•ç»„çš„é’©å­ä¸­ï¼Œå›è°ƒå‡½æ•°çš„å‚æ•°ä¸º <code>ctx</code>ï¼Œå³ä¸ºæµ‹è¯•çš„ä¸Šä¸‹æ–‡å¯¹è±¡ï¼Œåœ¨æµ‹è¯•ä»£ç ä¸­å¯ä»¥ä½¿ç”¨ <code>t.fixtureCtx</code> æ¥è®¿é—®å®ƒ</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture1</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">ctx</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    ctx<span class="token punctuation">.</span>someProp <span class="token operator">=</span> <span class="token number">123</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token parameter">ctx</span>  <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ctx<span class="token punctuation">.</span>newProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &gt; abc</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test1'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span>fixtureCtx<span class="token punctuation">.</span>someProp<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// &gt; 123</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Test2'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  t<span class="token punctuation">.</span>fixtureCtx<span class="token punctuation">.</span>newProp <span class="token operator">=</span> <span class="token string">'abc'</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="è·³è¿‡æµ‹è¯•"><a href="#è·³è¿‡æµ‹è¯•" class="header-anchor">#</a> è·³è¿‡æµ‹è¯•</h3> <p>ä½ åœ¨å†™æµ‹è¯•ç”¨ä¾‹æ—¶ï¼Œå¯ä»¥è·³è¿‡æŸä¸ªæµ‹è¯•ç”¨ä¾‹æˆ–è€…åªæ‰§è¡ŒæŸä¸ªæµ‹è¯•ç”¨ä¾‹</p> <div class="language-js extra-class"><pre class="language-js"><code>fixture<span class="token punctuation">.</span>skip <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span> <span class="token comment">// æ‰€æœ‰è¯¥æµ‹è¯•ç»„çš„ç”¨ä¾‹éƒ½ä¼šè¢«è·³è¿‡</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture1Test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture1Test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
test<span class="token punctuation">.</span><span class="token function">skip</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// è¿™ä¸ªæµ‹è¯•ç”¨ä¾‹ä¼šè¢«è·³è¿‡</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test3'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code>fixture<span class="token punctuation">.</span>only <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture1</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture1Test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture1Test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Fixture2</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test1'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
test<span class="token punctuation">.</span><span class="token function">only</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test2'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Fixture2Test3'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// åªæœ‰ `Fixture1` æµ‹è¯•ç»„å’Œ `Fixture2Test2` æµ‹è¯•ç”¨ä¾‹ä¼šè¢«æ‰§è¡Œ</span>
</code></pre></div><h2 id="é¡µé¢å…ƒç´ é€‰æ‹©"><a href="#é¡µé¢å…ƒç´ é€‰æ‹©" class="header-anchor">#</a> é¡µé¢å…ƒç´ é€‰æ‹©</h2> <h3 id="é€‰æ‹©å™¨-selector"><a href="#é€‰æ‹©å™¨-selector" class="header-anchor">#</a> é€‰æ‹©å™¨ selector</h3> <p>é€‰æ‹©å™¨æ˜¯æ ‡è¯†æµ‹è¯•ä¸­çš„ç½‘é¡µå…ƒç´ çš„æ–¹æ³•ã€‚é€‰æ‹©å™¨ API æä¾›äº†é€‰æ‹©é¡µé¢ä¸Šçš„å…ƒç´ å¹¶è·å–å…¶çŠ¶æ€çš„æ–¹æ³•å’Œå±æ€§ã€‚</p> <p>è¦ä» <code>testcafe</code> æ¨¡å—å¯¼å…¥ <code>Selector</code> æ„é€ å‡½æ•°ï¼Œè°ƒç”¨æ­¤æ„é€ å‡½æ•°å¹¶å°† CSS é€‰æ‹©å™¨å­—ç¬¦ä¸²ä½œä¸ºå‚æ•°ä¼ é€’ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> article <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.article-content'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>Selector</code> å‚æ•°è¯­æ³•ç±»ä¼¼äº jQuery é€‰æ‹©å™¨è¯­æ³•ï¼Œä»–ä»¬éƒ½æ˜¯ä½¿ç”¨çš„ <a href="https://developer.mozilla.org/zh-CN/docs/Web/CSS/CSS_Selectors" target="_blank" rel="noopener noreferrer">CSSé€‰æ‹©å™¨<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> è¯­æ³•ã€‚
åœ¨ä¸Šé¢çš„ä¾‹å­ä¸­ï¼Œæˆ‘ä»¬é€‰æ‹©äº†ä¸€ä¸ª class ä¸º <code>atricle-content</code> çš„å…ƒç´ ã€‚
ç„¶åæˆ‘ä»¬å°±å¯ä»¥ä½¿ç”¨è¿™ä¸ªé€‰æ‹©å™¨å¯¹å¯¹å…ƒç´ è¿›è¡Œæ“ä½œäº†ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>article<span class="token punctuation">)</span>
</code></pre></div><p>æˆ–è€…åœ¨æ–­è¨€æ–¹æ³•ä¸­ä½¿ç”¨å®ƒ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>article<span class="token punctuation">.</span>scrollHeight<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">1800</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”šè‡³è¿˜å¯ä»¥ç¼–å†™ä¸€ä¸ªåŒ¹é…å¤šä¸ªé¡µé¢å…ƒç´ çš„é€‰æ‹©å™¨ï¼Œç„¶åæŒ‰æ–‡æœ¬ã€å±æ€§ç­‰å¯¹å®ƒä»¬è¿›è¡Œè¿‡æ»¤ã€‚
ä¸‹é¢è¿™ä¸¤ä¸ªä¾‹å­é¦–å…ˆé€‰æ‹©äº†ä¸€ä¸ª class ä¸º <code>radio-button</code> çš„å…ƒç´ ï¼Œå¹¶ä¸”å…¶ä¸­çš„æ–‡æœ¬ä¸º &quot;Windows&quot;ï¼Œç¬¬äºŒä¸ªæ˜¯å«æœ‰å±æ€§ä¸º <code>selected</code> çš„å…ƒç´ ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> windowsRadioButton  <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.radio-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'Windows'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> selectedRadioButton <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.radio-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'selected'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¦‚æœéœ€è¦åœ¨ DOM æ ‘ä¸­æŸ¥æ‰¾ç‰¹å®šå…ƒç´ ï¼Œå¯ä»¥ä½¿ç”¨é€‰æ‹©å™¨ API çš„<a href="">æœç´¢æ–¹æ³•</a>æŸ¥æ‰¾å®ƒã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> buttonWrapper <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.article-content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'#share-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="åˆ›å»ºé€‰æ‹©å™¨"><a href="#åˆ›å»ºé€‰æ‹©å™¨" class="header-anchor">#</a> åˆ›å»ºé€‰æ‹©å™¨</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Selector</span><span class="token punctuation">(</span> init <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>init</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>æ ‡è¯†è¦é€‰æ‹©çš„ DOM èŠ‚ç‚¹</td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="">é€‰æ‹©å™¨é€‰é¡¹</a></td></tr></tbody></table> <ul><li><p>ä½¿ç”¨ä¸€ä¸ª CSS é€‰æ‹©å™¨</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> usernameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#username'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>ä½¿ç”¨ä¸€ä¸ªåœ¨å®¢æˆ·ç«¯æ‰§è¡Œçš„å‡½æ•°ï¼Œå¿…é¡»è¿”å›ä¸€ä¸ª <code>DOM node</code>ï¼Œä¸€ç»„ <code>DOM nodes</code>ï¼Œ <code>NodeList</code>, <code>HTMLCollection</code>, <code>null</code> æˆ–è€… <code>undefined</code>ï¼Œæˆ–è€… Promise.resolve() ä¸ºä»¥ä¸Šå†…å®¹çš„æ–¹æ³•</p> <p>è¯·æ³¨æ„ï¼Œå®ƒä¸èƒ½ä½¿ç”¨ä¸€äº›å¤–éƒ¨å˜é‡ï¼Œå› ä¸ºè¯¥æ–¹æ³•æ˜¯åœ¨æµè§ˆå™¨ä¸­è¿è¡Œçš„</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> element <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> storedElementId <span class="token operator">=</span> window<span class="token punctuation">.</span>localStorage<span class="token punctuation">.</span>storedElementId<span class="token punctuation">;</span>
    <span class="token keyword">return</span> document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span>storedElementId<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li> <li><p>ä¸€ä¸ª <code>Selector</code> æ„é€ å™¨</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ctaButton <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.cta-button'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token function">Selector</span><span class="token punctuation">(</span>ctaButton<span class="token punctuation">,</span> <span class="token punctuation">{</span> visibilityCheck<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></li></ul> <h4 id="ä½¿ç”¨é€‰æ‹©å™¨"><a href="#ä½¿ç”¨é€‰æ‹©å™¨" class="header-anchor">#</a> ä½¿ç”¨é€‰æ‹©å™¨</h4> <p>æœ¬ä¸»é¢˜æè¿°å¦‚ä½•æ ‡è¯†DOMå…ƒç´ å¹¶ä½¿ç”¨é€‰æ‹©å™¨è·å–å…³äºå®ƒä»¬çš„ä¿¡æ¯ã€‚</p> <h5 id="æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨"><a href="#æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨" class="header-anchor">#</a> æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨</h5> <p>é€‰æ‹©å™¨å¯èƒ½è¿”å›ä¸€ä¸ªã€å¤šä¸ªæˆ–è€…ä¸å­˜åœ¨åŒ¹é…çš„å…ƒç´ ã€‚æ‚¨å¯ä»¥ä½¿ç”¨ä¸€ä¸‹å±æ€§æ¥æ£€æŸ¥å…ƒç´ æ˜¯å¦å­˜åœ¨ï¼Œæˆ–è€…ç¡®å®šåŒ¹é…å…ƒç´ çš„æ•°é‡ã€‚</p> <table><thead><tr><th>å±æ€§</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>exists</code></td> <td>boolean</td> <td>å¦‚æœåŒ¹é…åˆ°å…ƒç´ åˆ™è¿”å› <code>true</code></td></tr> <tr><td><code>count</code></td> <td>number</td> <td>é€‰æ‹©å™¨åŒ¹é…çš„èŠ‚ç‚¹æ•°é‡</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example page</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> osCount            <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.column.col-2 label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">;</span>
  <span class="token keyword">const</span> submitButtonExists <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#submit-button'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>osCount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>submitButtonExists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>æ³¨æ„ï¼Œé€‰æ‹©å™¨çš„ getter æ˜¯å¼‚æ­¥çš„</p></blockquote> <h5 id="è·å–å…ƒç´ çš„çŠ¶æ€"><a href="#è·å–å…ƒç´ çš„çŠ¶æ€" class="header-anchor">#</a> è·å–å…ƒç´ çš„çŠ¶æ€</h5> <p>ä½ ä¹Ÿå¯ä»¥è·å–é€‰æ‹©å™¨åŒ¹é…å…ƒç´ çš„çŠ¶æ€ï¼ˆsizeã€positionã€classes ç­‰ï¼‰ã€‚æœ‰å…³<a href="#">å…ƒç´ çš„çŠ¶æ€</a></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span><span class="token function">page</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe/example/'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> windowsInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#windows'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Obtain Element State'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>windowsInput<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> windowsInputChecked <span class="token operator">=</span> <span class="token keyword">await</span> windowsInput<span class="token punctuation">.</span>checked<span class="token punctuation">;</span> <span class="token comment">// returns true</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h6 id="dom-èŠ‚ç‚¹å¿«ç…§"><a href="#dom-èŠ‚ç‚¹å¿«ç…§" class="header-anchor">#</a> DOM èŠ‚ç‚¹å¿«ç…§</h6> <p>å¦‚æœä½ éœ€è¦è·å–æ•´ä¸ª DOM å…ƒç´ å®ä¾‹çš„çŠ¶æ€ï¼Œéœ€è¦ä½¿ç”¨ <code>await</code> æ¥åŒ¹é…</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'DOM Node Snapshot'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> sliderHandle <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#slider'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> sliderHandleSnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">sliderHandle</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sliderHandleSnapshot<span class="token punctuation">.</span><span class="token function">hasClass</span><span class="token punctuation">(</span><span class="token string">'ui-slider-handle'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>    <span class="token comment">// =&gt; true</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>sliderHandleSnapshot<span class="token punctuation">.</span>childElementCount<span class="token punctuation">)</span><span class="token punctuation">;</span>               <span class="token comment">// =&gt; 0</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="å®šä¹‰åŠ¨ä½œçš„ç›®æ ‡"><a href="#å®šä¹‰åŠ¨ä½œçš„ç›®æ ‡" class="header-anchor">#</a> å®šä¹‰åŠ¨ä½œçš„ç›®æ ‡</h5> <p>ä½ è¿˜å¯ä»¥å°†é€‰æ‹©å™¨çš„è¿”å›å€¼ä½œä¸ºæµ‹è¯•æ§åˆ¶å™¨æ“ä½œçš„ç›®æ ‡ã€‚DOM èŠ‚ç‚¹å¿«ç…§åŒæ ·å¯ä»¥ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token keyword">const</span> label <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#tried-section'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> labelSnapshot <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">label</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>labelSnapshot<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>å¦‚æœåŒ¹é…åˆ°å¤šä¸ªç›®æ ‡å…ƒç´ ï¼Œé‚£ä¹ˆåªæœ‰åŒ¹é…åˆ°çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°†ä¼šè¢«æ“ä½œã€‚</p> <h5 id="å®šä¹‰æ–­è¨€çš„ç›®æ ‡"><a href="#å®šä¹‰æ–­è¨€çš„ç›®æ ‡" class="header-anchor">#</a> å®šä¹‰æ–­è¨€çš„ç›®æ ‡</h5> <p>ä½ å¯ä»¥å°†é€‰æ‹©å™¨çš„è¿”å›å€¼ä½œä¸ºæ–­è¨€çš„ç›®æ ‡ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span><span class="token punctuation">;</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">My fixture</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Assertion with Selector'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> developerNameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">,</span> <span class="token string">'Peter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Peter'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h5 id="é€‰æ‹©å™¨è¶…æ—¶"><a href="#é€‰æ‹©å™¨è¶…æ—¶" class="header-anchor">#</a> é€‰æ‹©å™¨è¶…æ—¶</h5> <p>åœ¨æµ‹è¯•æœŸé—´ï¼Œtestcafe ä¼šä¸€æ¬¡åˆä¸€æ¬¡çš„æ£€æŸ¥ï¼Œç­‰å¾…ç›®æ ‡å…ƒç´ å˜å¾—å¯è§ï¼Œå¦‚æœè¶…æ—¶è¿˜ä¸å¯è§åˆ™ä¸ä¼šé€šè¿‡æµ‹è¯•ç”¨ä¾‹ã€‚</p> <p><strong>å¦‚ä½•è®¾ç½®è¶…æ—¶</strong></p> <ul><li>ä½ å¯ä»¥åœ¨é€‰æ‹©å™¨æ„é€ å‡½æ•°çš„<a href="#">é€‰é¡¹</a>ä¸­æŒ‡å®šè¶…æ—¶æ—¶é—´ã€‚</li> <li>å¦‚æœä½¿ç”¨ API è¿›è¡Œæµ‹è¯•ï¼Œåˆ™éœ€è¦åœ¨ <a href="#"><code>runner.run</code></a> æ–¹æ³•ä¸­æŒ‡å®šã€‚</li> <li>å¦‚æœä½¿ç”¨å‘½ä»¤è¡Œå¯åŠ¨ï¼Œåˆ™éœ€è¦æŒ‡å®š<a href="#">é€‰æ‹©å™¨è¶…æ—¶</a> é€‰é¡¹ã€‚</li></ul> <h5 id="è°ƒè¯•é€‰æ‹©å™¨"><a href="#è°ƒè¯•é€‰æ‹©å™¨" class="header-anchor">#</a> è°ƒè¯•é€‰æ‹©å™¨</h5> <p>Testcafe ä¼šè¾“å‡ºæœ‰å…³äºæµ‹è¯•æŠ¥å‘Šè¿è¡Œå¤±è´¥æ—¶çš„è¯¦ç»†ä¿¡æ¯ã€‚</p> <p>å¦‚æœä½ å°è¯•ä½¿ç”¨ä¸åŒ¹é…ä»»ä½•DOMå…ƒç´ çš„é€‰æ‹©å™¨æ—¶ï¼Œæµ‹è¯•å¤±è´¥å¹¶æŠ›å‡ºä¸€ä¸ªé”™è¯¯ã€‚é”™è¯¯æ¶ˆæ¯æŒ‡ç¤ºå“ªä¸ªé€‰æ‹©å™¨å¤±è´¥ã€‚</p> <p><img src="//static.mutoe.com/2018/testcafe/failed-selector-report.png" alt="failed selector report"></p> <h4 id="é€‰æ‹©å™¨çš„æ–¹æ³•"><a href="#é€‰æ‹©å™¨çš„æ–¹æ³•" class="header-anchor">#</a> é€‰æ‹©å™¨çš„æ–¹æ³•</h4> <h5 id="è¿‡æ»¤-dom-èŠ‚ç‚¹"><a href="#è¿‡æ»¤-dom-èŠ‚ç‚¹" class="header-anchor">#</a> è¿‡æ»¤ DOM èŠ‚ç‚¹</h5> <p>å¦‚æœé€‰æ‹©å™¨è¿”å›å¤šä¸ªDOMèŠ‚ç‚¹ï¼Œä½ å¯ä»¥å¯¹å®ƒä»¬è¿›è¡Œç­›é€‰ï¼Œä»¥é€‰æ‹©ä¸€ä¸ªæœ€ç»ˆå°†ç”±é€‰æ‹©å™¨è¿”å›çš„èŠ‚ç‚¹ã€‚é€‰æ‹©å™¨æä¾›äº†æ ¹æ®ç´¢å¼•ã€æ–‡æœ¬ã€å±æ€§ç­‰è¿‡æ»¤DOMèŠ‚ç‚¹çš„æ–¹æ³•ã€‚</p> <h6 id="æ ¹æ®ç´¢å¼•-nth"><a href="#æ ¹æ®ç´¢å¼•-nth" class="header-anchor">#</a> æ ¹æ®ç´¢å¼• (nth)</h6> <table><thead><tr><th>å‚æ•°</th> <th>è¿”å›å€¼ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>nth(index)</code></td> <td>Selector</td> <td>æ ¹æ®åŒ¹é…é›†ä¸­çš„ç´¢å¼•æŸ¥æ‰¾å…ƒç´ ã€‚<code>index</code> å‚æ•°ä¸ºä» <code>0</code> å¼€å§‹çš„ç´¢å¼•ï¼Œå¦‚æœæŒ‡å®šä¸ºè´Ÿæ•°ï¼Œåˆ™ä»æœ«å°¾å¼€å§‹è®¡ç®—ç´¢å¼•ã€‚</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è¿”å›ç¬¬ä¸‰ä¸ª ul å…ƒç´ </span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

<span class="token comment">// è¿”å›æœ€åä¸€ä¸ª div å…ƒç´ </span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="æ ¹æ®æ–‡æœ¬-withtext-withexacttext"><a href="#æ ¹æ®æ–‡æœ¬-withtext-withexacttext" class="header-anchor">#</a> æ ¹æ®æ–‡æœ¬ (withText / withExactText)</h5> <table><thead><tr><th>å‚æ•°</th> <th>è¿”å›å€¼ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>withText(text)</code></td> <td>Selector</td> <td>åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œè¯¥é€‰æ‹©å™¨è¿‡æ»¤æŒ‡å®š<strong>æ–‡æœ¬</strong>çš„åŒ¹é…é¡¹ï¼Œé€‰æ‹©åŒ…å«æ­¤æ–‡æœ¬çš„å…ƒç´ ã€‚<code>text</code> å‚æ•°åŒºåˆ†å¤§å°å†™ã€‚</td></tr> <tr><td><code>withExactText(text)</code></td> <td>Selector</td> <td>åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œè¯¥é€‰æ‹©å™¨è¿‡æ»¤æŒ‡å®š<strong>æ–‡æœ¬</strong>çš„åŒ¹é…é¡¹ï¼Œå°†ä¼šä¸¥æ ¼åŒ¹é…ç­‰äºè¯¥æ–‡æœ¬çš„å…ƒç´ ã€‚<code>text</code> å‚æ•°åŒºåˆ†å¤§å°å†™ã€‚</td></tr> <tr><td><code>withText(regexp)</code></td> <td>Selector</td> <td>åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œè¯¥é€‰æ‹©å™¨è¿‡æ»¤æŒ‡å®š<strong>æ­£åˆ™è¡¨è¾¾å¼</strong>çš„åŒ¹é…é¡¹ã€‚</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è¿”å›å†…å®¹å«æœ‰ 'foo' çš„ label å…ƒç´ </span>
<span class="token comment">// ä¸ä¼šè¿”å›å«æœ‰ 'foobar' æˆ– 'Foo' çš„å…ƒç´ </span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'foo'</span><span class="token punctuation">)</span>

<span class="token comment">// è¿”å›åŒ¹é… /a[b-e]/ æ–‡æœ¬çš„ div å…ƒç´ ã€‚</span>
<span class="token comment">// ä¼šåŒ¹é… 'ab', 'ac'ã€‚ ä¸ä¼šåŒ¹é… 'bb', 'aa'</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token regex">/a[b-e]/</span><span class="token punctuation">)</span>
</code></pre></div><p>éœ€è¦æ³¨æ„ï¼Œ <code>withText</code> ä¸ä»…ä¼šç•™ä¸‹ç«‹å³åŒ…å«æŒ‡å®šæ–‡æœ¬çš„å…ƒç´ ï¼Œè¿˜ä¼šç•™ä¸‹å®ƒçš„ç¥–å…ˆå…ƒç´ ã€‚æ¯”å¦‚</p> <div class="language-html extra-class"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>container<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>child<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>some text<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// è¿™ä¸ªé€‰æ‹©å™¨ä¼šåŒ¹é… '.container' å’Œ '.child'</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'some text'</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="æ ¹æ®å±æ€§-withattribute"><a href="#æ ¹æ®å±æ€§-withattribute" class="header-anchor">#</a> æ ¹æ®å±æ€§ (withAttribute)</h5> <table><thead><tr><th>å‚æ•°</th> <th>è¿”å›å€¼ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>withAttribute(attrName [, attrValue])</code></td> <td>Selector</td> <td>åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œé€‰æ‹©åŒ…å«æŒ‡å®šå±æ€§(æˆ–å±æ€§å€¼)çš„å…ƒç´ ã€‚</td></tr></tbody></table> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>attrName</code></td> <td>string | RegExp</td> <td>å±æ€§åï¼ŒåŒºåˆ†å¤§å°å†™ã€‚</td></tr> <tr><td><code>attrValue</code> <em>(å¯é€‰çš„)</em></td> <td>string | RegExp</td> <td>å±æ€§å€¼ï¼ŒåŒºåˆ†å¤§å°å†™ã€‚ä½ å¯ä»¥çœç•¥å®ƒæ¥åŒ¹é…ä»»ä½•å€¼ã€‚</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// åŒ¹é…ä»»ä½•å«æœ‰ href å±æ€§çš„ a æ ‡ç­¾</span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'href'</span><span class="token punctuation">)</span>

<span class="token comment">// åŒ¹é… title å±æ€§ä¸ºâ€˜å›¾ç‰‡â€™çš„ img å…ƒç´ </span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'title'</span><span class="token punctuation">,</span> <span class="token string">'å›¾ç‰‡'</span><span class="token punctuation">)</span>

<span class="token comment">// åŒ¹é…ä»»ä½• src å±æ€§ä»¥ 'https://static.mutoe.com' å¼€å¤´çš„ img å…ƒç´ </span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'img'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'src'</span><span class="token punctuation">,</span> <span class="token regex">/^https?:\/\/static\.mutoe\.com/</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="æ ¹æ®å¯è§æ€§-filtervisible-filterhidden"><a href="#æ ¹æ®å¯è§æ€§-filtervisible-filterhidden" class="header-anchor">#</a> æ ¹æ®å¯è§æ€§ (filterVisible / filterHidden)</h5> <table><thead><tr><th>å‚æ•°</th> <th>è¿”å›å€¼ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>filterVisible()</code></td> <td>Selector</td> <td>åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œåªç•™ä¸‹å¯è§çš„å…ƒç´ ã€‚è¿™äº›å…ƒç´ <strong>æ²¡æœ‰</strong> <code>display: none;</code>, <code>visibility: hidden;</code>, <code>width: 0;</code> æˆ– <code>height: 0;</code> è¿™äº›å±æ€§</td></tr> <tr><td><code>filterHidden()</code></td> <td>Selector</td> <td>åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œåªç•™ä¸‹ä¸å¯è§çš„å…ƒç´ ã€‚è¿™äº›å…ƒç´ <strong>å«æœ‰</strong> <code>display: none;</code>, <code>visibility: hidden;</code>, <code>width: 0;</code> æˆ– <code>height: 0;</code> è¿™äº›å±æ€§</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// é€‰æ‹©æ‰€æœ‰å¯è§çš„ div å…ƒç´ </span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'div'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filterVisible</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token comment">// é€‰æ‹©æ‰€æœ‰éšè—çš„ input å…ƒç´ </span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filterHidden</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><h5 id="æ ¹æ®è¿‡æ»¤å™¨-filter"><a href="#æ ¹æ®è¿‡æ»¤å™¨-filter" class="header-anchor">#</a> æ ¹æ®è¿‡æ»¤å™¨ (filter)</h5> <table><thead><tr><th>å‚æ•°</th> <th>è¿”å›å€¼ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>filter(cssSelector)</code></td> <td>Selector</td> <td>åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œæ ¹æ® css é€‰æ‹©å™¨çš„è¯­æ³•è¿‡æ»¤ã€‚</td></tr> <tr><td><code>filter(filterFn(node, idx), dependencies)</code></td> <td>Selector</td> <td>åˆ›å»ºä¸€ä¸ªé€‰æ‹©å™¨ï¼Œæ ¹æ®èŠ‚ç‚¹çš„çŠ¶æ€è¿‡æ»¤ã€‚</td></tr></tbody></table> <table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>cssSelector</code></td> <td>string</td> <td>css é€‰æ‹©å™¨</td></tr> <tr><td><code>filterFn(node, idx)</code></td> <td>Function</td> <td>è¯¥æ–¹æ³•å°†ä¼šåœ¨æµè§ˆå™¨ç¯å¢ƒä¸­æ‰§è¡Œ</td></tr> <tr><td><code>dependencies</code></td> <td>Function</td> <td>éœ€è¦ä¼ é€’åˆ°å®¢æˆ·ç«¯çš„æ–¹æ³•ï¼Œå¦åˆ™è°ƒç”¨æ—¶ä¸ä¼šå‡ºç°åœ¨æµè§ˆå™¨ä¸Šä¸‹æ–‡ç¯å¢ƒä¸­</td></tr> <tr><td><code>node</code></td> <td>Element</td> <td>å½“å‰å…ƒç´ çš„ DOM node</td></tr> <tr><td><code>idx</code></td> <td>number</td> <td>å½“å‰ DOM node æ‰€å¤„çš„ç´¢å¼•</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token comment">// ä»æ‰€æœ‰ li æ ‡ç­¾ä¸­æŒ‘é€‰å«æœ‰ 'active' class çš„å…ƒç´ </span>
<span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token string">'.active'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> Selector <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'testcafe'</span>

fixture <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Example page</span><span class="token template-punctuation string">`</span></span>
  <span class="token punctuation">.</span>page <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">http://devexpress.github.io/testcafe/example/</span><span class="token template-punctuation string">`</span></span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> secondCheckBox <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'checkbox'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

  <span class="token keyword">const</span> checkedInputs <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'input'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withAttribute</span><span class="token punctuation">(</span><span class="token string">'type'</span><span class="token punctuation">,</span> <span class="token string">'checkbox'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">filter</span><span class="token punctuation">(</span><span class="token parameter">node</span> <span class="token operator">=&gt;</span> node<span class="token punctuation">.</span>checked<span class="token punctuation">)</span>

  <span class="token keyword">const</span> windowsLabel <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'Windows'</span><span class="token punctuation">)</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>secondCheckBox<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>checkedInputs<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>windowsLabel<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre></div><p>å¦‚æœæ‰€æœ‰çš„ DOM éƒ½è¢«è¿‡æ»¤æ‰ï¼Œ<code>filter()</code> é€‰æ‹©å™¨ä¼šè¿”å› <code>null</code></p> <h5 id="æ ¹æ®å…³ç³»-find-parent-child-sibling"><a href="#æ ¹æ®å…³ç³»-find-parent-child-sibling" class="header-anchor">#</a> æ ¹æ®å…³ç³» (find / parent / child / sibling)</h5> <table><thead><tr><th>å‚æ•°</th> <th>è¿”å›å€¼ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>find(cssSelector)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡ css é€‰æ‹©å™¨ç­›é€‰å®ƒä»¬ã€‚</td></tr> <tr><td><code>find(filterFn, dependencies)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„æ‰€æœ‰å­èŠ‚ç‚¹ï¼Œæ ¹æ®èŠ‚ç‚¹çš„çŠ¶æ€è¿‡æ»¤ã€‚</td></tr> <tr><td><code>parent()</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„çˆ¶èŠ‚ç‚¹ã€‚ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ å°†ä¼šæ˜¯æœ€è¿‘çš„çˆ¶å…ƒç´ ï¼‰</td></tr> <tr><td><code>parent(index)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡ç´¢å¼•ç­›é€‰å®ƒä»¬ã€‚<code>0</code> æ˜¯æœ€è¿‘çš„çˆ¶å…ƒç´ ï¼Œè´Ÿæ•°å°†ä¼šä»æ ¹ç»“ç‚¹å¼€å§‹è®¡ç®—ã€‚</td></tr> <tr><td><code>parent(cssSelector)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„çˆ¶èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡ css é€‰æ‹©å™¨ç­›é€‰ã€‚</td></tr> <tr><td><code>parent(filterFn, dependencies)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„çˆ¶èŠ‚ç‚¹ï¼Œæ ¹æ®èŠ‚ç‚¹çš„çŠ¶æ€è¿‡æ»¤ã€‚</td></tr> <tr><td><code>child()</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„å­èŠ‚ç‚¹ã€‚ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ å°†ä¼šæ˜¯æœ€è¿‘çš„å­å…ƒç´ ï¼‰</td></tr> <tr><td><code>child(index)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„å­èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡ç´¢å¼•ç­›é€‰å®ƒä»¬ã€‚<code>0</code> æ˜¯æœ€è¿‘çš„å­å…ƒç´ ï¼Œè´Ÿæ•°å°†ä¼šä»æ ¹ç»“ç‚¹å¼€å§‹è®¡ç®—ã€‚</td></tr> <tr><td><code>child(cssSelector)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„å­èŠ‚ç‚¹ï¼Œå¹¶é€šè¿‡ css é€‰æ‹©å™¨ç­›é€‰ã€‚</td></tr> <tr><td><code>child(filterFn, dependencies)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„å­èŠ‚ç‚¹ï¼Œæ ¹æ®èŠ‚ç‚¹çš„çŠ¶æ€è¿‡æ»¤ã€‚</td></tr> <tr><td><code>sibling()</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„å…„å¼Ÿå…ƒç´ ã€‚ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ å°†ä¼šæ˜¯æœ€è¿‘çš„å…„å¼Ÿå…ƒç´ ï¼‰</td></tr> <tr><td><code>sibling(index)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œå¹¶é€šè¿‡ç´¢å¼•ç­›é€‰å®ƒä»¬ã€‚ä»¥ <code>0</code> å¼€å§‹ï¼Œè´Ÿæ•°å°†ä¼šä»æœ«å°¾å¼€å§‹è®¡ç®—ã€‚</td></tr> <tr><td><code>sibling(cssSelector)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œå¹¶é€šè¿‡ css é€‰æ‹©å™¨ç­›é€‰ã€‚</td></tr> <tr><td><code>sibling(filterFn, dependencies)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ åŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œæ ¹æ®èŠ‚ç‚¹çš„çŠ¶æ€è¿‡æ»¤ã€‚</td></tr> <tr><td><code>nextSibling()</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ ä¹‹ååŒ¹é…çš„å…„å¼Ÿå…ƒç´ ã€‚ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ å°†ä¼šæ˜¯ä¹‹åæœ€è¿‘çš„å…„å¼Ÿå…ƒç´ ï¼‰</td></tr> <tr><td><code>nextSibling(index)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ ä¹‹ååŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œå¹¶é€šè¿‡ç´¢å¼•ç­›é€‰å®ƒä»¬ã€‚ä»¥ <code>0</code> å¼€å§‹ï¼Œè´Ÿæ•°å°†ä¼šä»æœ«å°¾å¼€å§‹è®¡ç®—ã€‚</td></tr> <tr><td><code>nextSibling(cssSelector)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ ä¹‹ååŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œå¹¶é€šè¿‡ css é€‰æ‹©å™¨ç­›é€‰ã€‚</td></tr> <tr><td><code>nextSibling(filterFn, dependencies)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ ä¹‹ååŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œæ ¹æ®èŠ‚ç‚¹çš„çŠ¶æ€è¿‡æ»¤ã€‚</td></tr> <tr><td><code>prevSibling()</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ ä¹‹å‰åŒ¹é…çš„å…„å¼Ÿå…ƒç´ ã€‚ï¼ˆç¬¬ä¸€ä¸ªå…ƒç´ å°†ä¼šæ˜¯ä¹‹å‰æœ€è¿‘çš„å…„å¼Ÿå…ƒç´ ï¼‰</td></tr> <tr><td><code>prevSibling(index)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ ä¹‹å‰åŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œå¹¶é€šè¿‡ç´¢å¼•ç­›é€‰å®ƒä»¬ã€‚ä»¥ <code>0</code> å¼€å§‹ï¼Œè´Ÿæ•°å°†ä¼šä»æœ«å°¾å¼€å§‹è®¡ç®—ã€‚</td></tr> <tr><td><code>prevSibling(cssSelector)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ ä¹‹å‰åŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œå¹¶é€šè¿‡ css é€‰æ‹©å™¨ç­›é€‰ã€‚</td></tr> <tr><td><code>prevSibling(filterFn, dependencies)</code></td> <td>Selector</td> <td>è¿”å›å½“å‰å…ƒç´ ä¹‹å‰åŒ¹é…çš„å…„å¼Ÿå…ƒç´ ï¼Œæ ¹æ®èŠ‚ç‚¹çš„çŠ¶æ€è¿‡æ»¤ã€‚</td></tr></tbody></table> <p><strong>ä¾‹å­</strong></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'ul'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'label'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token string">'div.someClass'</span><span class="token punctuation">)</span>
</code></pre></div><p>æ‰¾åˆ°é¡µé¢ä¸Šçš„æ‰€æœ‰ulå…ƒç´ ã€‚ç„¶åï¼Œåœ¨æ¯ä¸ªå·²æ‰¾åˆ°çš„ulå…ƒç´ ä¸­æ‰¾åˆ°labelå…ƒç´ ã€‚ç„¶åï¼Œä¸ºæ¯ä¸ªlabelå…ƒç´ æ‰¾åˆ°ä¸€ä¸ªåŒ¹é…div.someClassé€‰æ‹©å™¨çš„çˆ¶å…ƒç´ ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.container'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">parent</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.content'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">withText</span><span class="token punctuation">(</span><span class="token string">'yo!'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">child</span><span class="token punctuation">(</span><span class="token string">'span'</span><span class="token punctuation">)</span>
</code></pre></div><p>è¿™ä¸ªä¾‹å­åšäº†ä»¥ä¸‹äº‹æƒ…ï¼š</p> <ul><li>æ‰¾åˆ° <code>.container</code> å…ƒç´ çš„ç¬¬äºŒä¸ªçˆ¶å…ƒç´ ï¼ˆçˆ¶å…ƒç´ çš„çˆ¶å…ƒç´ ï¼‰</li> <li>é€‰æ‹©åŒ¹é…é›†ä¸­çš„ç¬¬ 1 ä¸ªå…ƒç´ </li> <li>åœ¨è¯¥å…ƒç´ ä¸­ï¼ŒæŸ¥æ‰¾ä¸ <code>.content</code> é€‰æ‹©å™¨åŒ¹é…çš„å…ƒç´ </li> <li>æ‰¾åˆ°æ–‡æœ¬åŒ…å« 'yo!' çš„å…ƒç´ </li> <li>åœ¨æ¯ä¸ªå·²è¿‡æ»¤çš„å…ƒç´ ä¸­ï¼Œæœç´¢æ ‡è®°åä¸º <code>span</code> çš„å­é¡¹ã€‚</li></ul> <h4 id="é€‰æ‹©å™¨é€‰é¡¹-no"><a href="#é€‰æ‹©å™¨é€‰é¡¹-no" class="header-anchor">#</a> é€‰æ‹©å™¨é€‰é¡¹ (no)</h4> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h4 id="é€‰æ‹©å™¨æ‹“å±•-no"><a href="#é€‰æ‹©å™¨æ‹“å±•-no" class="header-anchor">#</a> é€‰æ‹©å™¨æ‹“å±• (no)</h4> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h4 id="è¾¹ç¼˜æƒ…å†µ-no"><a href="#è¾¹ç¼˜æƒ…å†µ-no" class="header-anchor">#</a> è¾¹ç¼˜æƒ…å†µ (no)</h4> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h3 id="dom-èŠ‚ç‚¹çŠ¶æ€"><a href="#dom-èŠ‚ç‚¹çŠ¶æ€" class="header-anchor">#</a> DOM èŠ‚ç‚¹çŠ¶æ€</h3> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h3 id="ç‰¹å®šæ¡†æ¶çš„é€‰æ‹©å™¨-no"><a href="#ç‰¹å®šæ¡†æ¶çš„é€‰æ‹©å™¨-no" class="header-anchor">#</a> ç‰¹å®šæ¡†æ¶çš„é€‰æ‹©å™¨ (no)</h3> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h3 id="ä¸€äº›ä¾‹å­-no"><a href="#ä¸€äº›ä¾‹å­-no" class="header-anchor">#</a> ä¸€äº›ä¾‹å­ (no)</h3> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h2 id="åŠ¨ä½œ"><a href="#åŠ¨ä½œ" class="header-anchor">#</a> åŠ¨ä½œ</h2> <h3 id="å•å‡»-click"><a href="#å•å‡»-click" class="header-anchor">#</a> å•å‡» click</h3> <p>å•å‡»é¡µé¢ä¸Šçš„å…ƒç´ </p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E7%82%B9%E5%87%BB%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-click-action">ç‚¹å‡»åŠ¨ä½œé€‰é¡¹</a></td></tr></tbody></table> <p>ä¸‹é¢ç”¨ä¸€ä¸ªä¾‹å­æ¥å±•ç¤ºå¦‚ä½•ä½¿ç”¨ <code>t.click</code> åŠ¨ä½œæ¥é€‰æ‹©ä¸€ä¸ªå¤é€‰æ¡†å…ƒç´ ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Click a check box and check its state'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> checkbox <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#testing-on-remote-devices'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>checkbox<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>checkbox<span class="token punctuation">.</span>checked<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>ä¸‹é¢ä¸€ä¸ªä¾‹å­ä½¿ç”¨ <code>options</code> å‚æ•°åœ¨è¾“å…¥æ¡†ä¸­è®¾ç½®å…‰æ ‡ä½ç½®</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Click Input'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter Parker'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> caretPos<span class="token operator">:</span> <span class="token number">5</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span><span class="token string">'backspace'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Pete Parker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="åŒå‡»-doubleclick"><a href="#åŒå‡»-doubleclick" class="header-anchor">#</a> åŒå‡» doubleClick</h3> <p>åŒå‡»é¡µé¢ä¸Šçš„å…ƒç´ </p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">doubleClick</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E7%82%B9%E5%87%BB%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-click-action">ç‚¹å‡»åŠ¨ä½œé€‰é¡¹</a></td></tr></tbody></table> <h3 id="å³å‡»-rightclick"><a href="#å³å‡»-rightclick" class="header-anchor">#</a> å³å‡» rightClick</h3> <p>å³å‡»é¡µé¢ä¸Šçš„å…ƒç´ </p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">rightClick</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E7%82%B9%E5%87%BB%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-click-action">ç‚¹å‡»åŠ¨ä½œé€‰é¡¹</a></td></tr></tbody></table> <h3 id="æ‹–æ‹½-drag"><a href="#æ‹–æ‹½-drag" class="header-anchor">#</a> æ‹–æ‹½ drag</h3> <h4 id="æ‹–æ‹½ä¸€å®šè·ç¦»-drag"><a href="#æ‹–æ‹½ä¸€å®šè·ç¦»-drag" class="header-anchor">#</a> æ‹–æ‹½ä¸€å®šè·ç¦» drag</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> dragOffsetX<span class="token punctuation">,</span> dragOffsetY <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td></tr> <tr><td><code>dragOffsetX</code></td> <td>Number</td> <td>é¼ æ ‡åœ¨ x è½´ä¸Šéœ€è¦æ‹–æ‹½çš„è·ç¦»</td></tr> <tr><td><code>dragOffsetY</code></td> <td>Number</td> <td>é¼ æ ‡åœ¨ y è½´ä¸Šéœ€è¦æ‹–æ‹½çš„è·ç¦»</td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E9%BC%A0%E6%A0%87%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-mouse-action">é¼ æ ‡åŠ¨ä½œé€‰é¡¹</a></td></tr></tbody></table> <p>ä¸‹é¢ä¸€ä¸ªä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•ä½¿ç”¨ <code>t.drag</code> åŠ¨ä½œæ¥æ‹–æ‹½å…ƒç´ </p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Drag slider'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> slider <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-rating'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#i-tried-testcafe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>slider<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span><span class="token string">'.ui-slider-handle'</span><span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> offsetX<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span> offsetY<span class="token operator">:</span> <span class="token number">10</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>slider<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="æ‹–æ‹½åˆ°å¦ä¸€ä¸ªå…ƒç´ ä¸Š-dragtoelement"><a href="#æ‹–æ‹½åˆ°å¦ä¸€ä¸ªå…ƒç´ ä¸Š-dragtoelement" class="header-anchor">#</a> æ‹–æ‹½åˆ°å¦ä¸€ä¸ªå…ƒç´ ä¸Š dragToElement</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">dragToElement</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> destinationSelector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td></tr> <tr><td><code>destinationSelector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨, æ‹–æ‹½ç›®æ ‡å…ƒç´ ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E6%8B%96%E6%8B%BD%E5%88%B0%E5%85%83%E7%B4%A0%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-dragToElement-action">æ‹–æ‹½åˆ°å…ƒç´ åŠ¨ä½œé€‰é¡¹</a></td></tr></tbody></table> <p>ä¸‹é¢è¿™ä¸ªä¾‹å­æ¼”ç¤ºäº†å¦‚ä½•ä½¿ç”¨ <code>t.dragToElement</code> å°†å…ƒç´ æ‹–æ”¾åˆ°ç‰¹å®šåŒºåŸŸ</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Drag an item from the toolbox'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> designSurfaceItems <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.design-surface'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token string">'.items'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">dragToElement</span><span class="token punctuation">(</span><span class="token string">'.toolbox-item.text-input'</span><span class="token punctuation">,</span> <span class="token string">'.design-surface'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>designSurfaceItems<span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="æ‚¬åœ-hover"><a href="#æ‚¬åœ-hover" class="header-anchor">#</a> æ‚¬åœ hover</h3> <p>å°†é¼ æ ‡æŒ‡é’ˆæ‚¬åœåœ¨ç½‘é¡µå…ƒç´ ä¸Š</p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">hover</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E9%BC%A0%E6%A0%87%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-mouse-action">é¼ æ ‡åŠ¨ä½œé€‰é¡¹</a></td></tr></tbody></table> <p>ä½¿ç”¨æ­¤æ“ä½œå¯ä»¥è°ƒç”¨å¼¹å‡ºå…ƒç´ ï¼Œä¾‹å¦‚æ‚¬åœåœ¨å…¶ä»–å…ƒç´ ä¸Šæ—¶å‡ºç°çš„æç¤ºçª—å£ã€å¼¹å‡ºèœå•æˆ–ä¸‹æ‹‰åˆ—è¡¨ã€‚</p> <p>ä¸‹é¢è¿™ä¾‹å­æ¼”ç¤ºå¦‚ä½•å°†é¼ æ ‡æŒ‡é’ˆç§»åŠ¨åˆ°ç»„åˆæ¡†ä¸Šæ˜¾ç¤ºä¸‹æ‹‰åˆ—è¡¨ï¼Œç„¶åé€‰æ‹©ä¸€ä¸ªé¡¹ç›®å¹¶æ£€æŸ¥ç»„åˆæ¡†çš„å€¼ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Select combo box value'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> comboBox <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.combo-box'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">hover</span><span class="token punctuation">(</span>comboBox<span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#i-prefer-both'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>comboBox<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Both'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="é€‰æ‹©æ–‡æœ¬-selecttext"><a href="#é€‰æ‹©æ–‡æœ¬-selecttext" class="header-anchor">#</a> é€‰æ‹©æ–‡æœ¬ selectText</h3> <h4 id="åœ¨-input-å…ƒç´ ä¸­"><a href="#åœ¨-input-å…ƒç´ ä¸­" class="header-anchor">#</a> åœ¨ input å…ƒç´ ä¸­</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">selectText</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> startPos<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> endPos<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td> <td></td></tr> <tr><td><code>startPos</code> <em>(å¯é€‰çš„)</em></td> <td>Number</td> <td>é€‰æ‹©çš„èµ·å§‹ä½ç½®ï¼Œä» 0 å¼€å§‹çš„æ•´æ•°</td> <td>0</td></tr> <tr><td><code>endPos</code> <em>(å¯é€‰çš„)</em></td> <td>Number</td> <td>é€‰æ‹©çš„ç»“æŸä½ç½®ï¼Œä» 0 å¼€å§‹çš„æ•´æ•°</td> <td>å¯è§æ–‡æœ¬çš„é•¿åº¦</td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E5%9F%BA%E6%9C%AC%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-basic-action">åŸºæœ¬åŠ¨ä½œé€‰é¡¹</a></td> <td></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> developerNameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> getElementSelectionStart <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=&gt;</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selectionStart<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getElementSelectionEnd <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=&gt;</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selectionEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Select text within input'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">,</span> <span class="token string">'Test Cafe'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> caretPos<span class="token operator">:</span> <span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">selectText</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getElementSelectionStart</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getElementSelectionEnd</span><span class="token punctuation">(</span>developerNameInput<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>å¦‚æœ <code>startPos</code> çš„å€¼å¤§äº <code>endPos</code> çš„å€¼ï¼Œåˆ™åŠ¨ä½œå°†æ‰§è¡Œå‘å‰é€‰æ‹©ã€‚</p></blockquote> <h4 id="åœ¨-textarea-å…ƒç´ ä¸­"><a href="#åœ¨-textarea-å…ƒç´ ä¸­" class="header-anchor">#</a> åœ¨ textarea å…ƒç´ ä¸­</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">selectTextAreaContent</span><span class="token punctuation">(</span> selector <span class="token punctuation">[</span><span class="token punctuation">,</span> startLine<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> startPos<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> endLine<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> endPos<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td> <td></td></tr> <tr><td><code>startLine</code> <em>(å¯é€‰çš„)</em></td> <td>Number</td> <td>é€‰æ‹©å¼€å§‹çš„è¡Œå·ï¼Œä» 0 å¼€å§‹çš„æ•´æ•°</td> <td>0</td></tr> <tr><td><code>startPos</code> <em>(å¯é€‰çš„)</em></td> <td>Number</td> <td>é€‰æ‹©çš„èµ·å§‹ä½ç½®ï¼Œä» 0 å¼€å§‹çš„æ•´æ•°</td> <td>0</td></tr> <tr><td><code>endLine</code> <em>(å¯é€‰çš„)</em></td> <td>Number</td> <td>é€‰æ‹©ç»“æŸçš„è¡Œå·ï¼Œä» 0 å¼€å§‹çš„æ•´æ•°</td> <td>æœ€åä¸€è¡Œçš„ç´¢å¼•</td></tr> <tr><td><code>endPos</code> <em>(å¯é€‰çš„)</em></td> <td>Number</td> <td>é€‰æ‹©çš„ç»“æŸä½ç½®(åŸºäº <code>endline</code>)ï¼Œä» 0 å¼€å§‹çš„æ•´æ•°</td> <td><code>endLine</code> çš„æœ€åä¸€ä¸ªå­—ç¬¦</td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E5%9F%BA%E6%9C%AC%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-basic-action">åŸºæœ¬åŠ¨ä½œé€‰é¡¹</a></td> <td></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">const</span> commentTextArea <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#comments'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> getElementSelectionStart <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=&gt;</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selectionStart<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> getElementSelectionEnd   <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token parameter">selector</span> <span class="token operator">=&gt;</span> <span class="token function">selector</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>selectionEnd<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Select text within textarea'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#tried-test-cafe'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>commentTextArea<span class="token punctuation">,</span> <span class="token punctuation">[</span>
      <span class="token string">'Lorem ipsum dolor sit amet'</span><span class="token punctuation">,</span>
      <span class="token string">'consectetur adipiscing elit'</span><span class="token punctuation">,</span>
      <span class="token string">'sed do eiusmod tempor'</span>
    <span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">',\n'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">selectTextAreaContent</span><span class="token punctuation">(</span>commentTextArea<span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getElementSelectionStart</span><span class="token punctuation">(</span>commentTextArea<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">await</span> <span class="token function">getElementSelectionEnd</span><span class="token punctuation">(</span>commentTextArea<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">67</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p>å¦‚æœ <code>startLine</code> æ¯” <code>endLine</code> çš„å€¼å¤§ï¼Œåˆ™æ‰§è¡Œå‘å‰é€‰æ‹©ã€‚</p></blockquote> <h4 id="åœ¨-contenteditable-å…ƒç´ ä¸­"><a href="#åœ¨-contenteditable-å…ƒç´ ä¸­" class="header-anchor">#</a> åœ¨ contentEditable å…ƒç´ ä¸­</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">selectEditableContent</span><span class="token punctuation">(</span> startSelector<span class="token punctuation">,</span> endSelector <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>startSelector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>æ ‡è¯†å¼€å§‹é€‰æ‹©çš„å…ƒç´  selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td> <td></td></tr> <tr><td><code>endSelector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>æ ‡è¯†ç»“æŸé€‰æ‹©çš„å…ƒç´  selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td> <td></td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E5%9F%BA%E6%9C%AC%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-basic-action">åŸºæœ¬åŠ¨ä½œé€‰é¡¹</a></td> <td></td></tr></tbody></table> <p>æ­¤æ–¹æ³•é€‚ç”¨äºå¯ç”¨äº† <code>contentEditable</code> å±æ€§çš„ HTML å…ƒç´ ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Delete text within a contentEditable element'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">selectEditableContent</span><span class="token punctuation">(</span><span class="token string">'#foreword'</span><span class="token punctuation">,</span> <span class="token string">'#chapter-3'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span><span class="token string">'delete'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#chapter-2'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#chapter-4'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="é”®å…¥æ–‡æœ¬-typetext"><a href="#é”®å…¥æ–‡æœ¬-typetext" class="header-anchor">#</a> é”®å…¥æ–‡æœ¬ typeText</h3> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span> selector<span class="token punctuation">,</span> text <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="#%E9%80%89%E6%8B%A9%E5%99%A8-selector">é€‰æ‹©å™¨</a></td></tr> <tr><td><code>text</code></td> <td>string</td> <td>è¦åœ¨æŒ‡å®šå…ƒç´ ä¸­è¾“å…¥çš„æ–‡æœ¬</td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E8%BE%93%E5%85%A5%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-typing-action">è¾“å…¥åŠ¨ä½œé€‰é¡¹</a></td></tr></tbody></table> <blockquote><p>å¦‚æœè¦åˆ é™¤æ–‡æœ¬ï¼Œè¯·ä½¿ç”¨ <a href="#%E9%80%89%E6%8B%A9%E6%96%87%E6%9C%AC-selectText"><code>t.selectText</code></a> å’Œ <a href="#%E6%8C%89%E9%94%AE-pressKey"><code>t.pressKey</code></a> æ¥å®ç°</p></blockquote> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Type and Replace'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Paker'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'r'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> caretPos<span class="token operator">:</span> <span class="token number">2</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'Parker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><blockquote><p><strong>æ³¨æ„</strong></p> <p>æŸäº›ç±»å‹çš„HTML5è¾“å…¥ï¼ˆå¦‚ DateTime ï¼Œ Color æˆ– Rangeï¼‰éœ€è¦ä»¥ç‰¹å®šæ ¼å¼è¾“å…¥å€¼ã€‚</p> <p>The following table lists value formats expected by these inputs.</p> <table><thead><tr><th>è¾“å…¥ç±»å‹</th> <th>æ¨¡å¼</th> <th>ä¾‹å­</th></tr></thead> <tbody><tr><td>Date</td> <td><code>yyyy-MM-dd</code></td> <td><code>2018-10-25</code></td></tr> <tr><td>Week</td> <td><code>yyyy-Www</code></td> <td><code>2018-W03</code></td></tr> <tr><td>Month</td> <td><code>yyyy-MM</code></td> <td><code>2018-10</code></td></tr> <tr><td>DateTime</td> <td><code>yyyy-MM-ddThh:mm</code></td> <td><code>2018-10-25T13:22</code></td></tr> <tr><td>Time</td> <td><code>hh:mm</code></td> <td><code>13:22:28</code></td></tr> <tr><td>Color</td> <td><code>#rrggbb</code></td> <td><code>#003500</code></td></tr> <tr><td>Range</td> <td><code>n</code></td> <td><code>45</code></td></tr></tbody></table></blockquote> <h3 id="æŒ‰é”®-presskey"><a href="#æŒ‰é”®-presskey" class="header-anchor">#</a> æŒ‰é”® pressKey</h3> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span> keys <span class="token punctuation">[</span><span class="token punctuation">,</span> options<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>keys</code></td> <td>string</td> <td>è¦åœ¨æŒ‡å®šå…ƒç´ ä¸­è¾“å…¥çš„æ–‡æœ¬</td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>é€‰é¡¹, æœ‰å…³<a href="#%E5%9F%BA%E6%9C%AC%E5%8A%A8%E4%BD%9C%E9%80%89%E9%A1%B9-basic-action">åŸºæœ¬åŠ¨ä½œé€‰é¡¹</a></td></tr></tbody></table> <p>ä¸‹è¡¨æ˜¾ç¤ºäº†å¦‚ä½•æŒ‡å®šä¸åŒç±»å‹ï¼Œé”®åºåˆ—å’Œç»„åˆçš„é”®ã€‚</p> <table><thead><tr><th>æŒ‰é”®ç±»å‹</th> <th>ä¾‹å­</th></tr></thead> <tbody><tr><td>å­—æ¯å’Œæ•°å­—</td> <td><code>a</code>, <code>A</code>, <code>1</code></td></tr> <tr><td>ä¿®é¥°é”®</td> <td><code>shift</code>, <code>alt</code>(<code>âŒ¥</code>), <code>ctrl</code>, <code>meta</code>(<code>âŒ˜</code>)</td></tr> <tr><td>å¯¼èˆªå’Œæ“ä½œé”®</td> <td><code>backspace</code>, <code>tab</code>, <code>enter</code>, <code>capslock</code>, <code>esc</code>, <code>space</code>, <code>pageup</code>, <code>pagedown</code>, <code>end</code>, <code>home</code>, <code>left</code>, <code>right</code>, <code>up</code>, <code>down</code>, <code>ins</code>, <code>delete</code></td></tr> <tr><td>ç»„åˆé”®</td> <td><code>shift+a</code>, <code>ctrl+d</code></td></tr> <tr><td>ä¸€ç•ªæ“ä½œ</td> <td><code>ctrl+a del</code>, <code>ctrl+a ctrl+c</code> (è‡ªç”±ç»„åˆæŒ‰é”®ï¼Œå¹¶ä½¿ç”¨ç©ºæ ¼åˆ†éš”å®ƒä»¬)</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Key Presses'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter Parker'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span><span class="token string">'home right . delete delete delete delete'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">.</span>value<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'P. Parker'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="é¡µé¢è·³è½¬-navigateto"><a href="#é¡µé¢è·³è½¬-navigateto" class="header-anchor">#</a> é¡µé¢è·³è½¬ navigateTo</h3> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span> url <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>url</code></td> <td>string</td> <td>è¦å¯¼èˆªåˆ°çš„ URL åœ°å€ã€‚å¯ä»¥æ˜¯ç»å¯¹åœ°å€æˆ–ç›¸å¯¹åœ°å€</td></tr></tbody></table> <p>ä¸‹é¢çš„ä¾‹å­æ¥æ¼”ç¤ºå¦‚ä½•å¯¼èˆªåˆ°ä¸€ä¸ªç»å¯¹åœ°å€</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Navigate to the main page'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#submit-button'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">navigateTo</span><span class="token punctuation">(</span><span class="token string">'http://devexpress.github.io/testcafe'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>åœ¨é‡å®šå‘å‘ç”Ÿåï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…æœåŠ¡å™¨å“åº”ã€‚å¦‚æœæœåŠ¡å™¨åœ¨ 15s å†…æ²¡æœ‰å“åº”ï¼Œæµ‹è¯•å°†ä¼šè¢«æ¢å¤(?)ã€‚</p> <h3 id="æˆªå›¾-takescreenshot"><a href="#æˆªå›¾-takescreenshot" class="header-anchor">#</a> æˆªå›¾ takeScreenshot</h3> <h4 id="è·å–æ•´é¡µçš„å±å¹•æˆªå›¾-takescreenshot"><a href="#è·å–æ•´é¡µçš„å±å¹•æˆªå›¾-takescreenshot" class="header-anchor">#</a> è·å–æ•´é¡µçš„å±å¹•æˆªå›¾ takeScreenshot</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">takeScreenshot</span><span class="token punctuation">(</span> <span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>path</code> <em>(å¯é€‰çš„)</em></td> <td>string</td> <td>æˆªå›¾æ–‡ä»¶ä¿å­˜çš„ç›¸å¯¹è·¯å¾„å’Œåç§°ï¼Œè¯¥ç›¸å¯¹è·¯å¾„æ˜¯åŸºäºå‘½ä»¤è¡Œåˆ¶å®šçš„åŸºæœ¬ç›®å½•ã€‚</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Take a screenshot of a fieldset'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">,</span> <span class="token string">'Peter Parker'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#submit-button'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">takeScreenshot</span><span class="token punctuation">(</span><span class="token string">'my-fixture/thank-you-page.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="è·å–é¡µé¢å…ƒç´ çš„å±å¹•æˆªå›¾-takeelementscreenshot"><a href="#è·å–é¡µé¢å…ƒç´ çš„å±å¹•æˆªå›¾-takeelementscreenshot" class="header-anchor">#</a> è·å–é¡µé¢å…ƒç´ çš„å±å¹•æˆªå›¾ takeElementScreenshot</h4> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">takeScreenshot</span><span class="token punctuation">(</span> <span class="token punctuation">[</span>path<span class="token punctuation">]</span> <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>selector</code></td> <td>Function | string | Selector | Snapshot | Promise</td> <td>selector é€‰æ‹©å™¨ï¼Œæœ‰å…³<a href="">é€‰æ‹©ç›®æ ‡å…ƒç´ </a></td></tr> <tr><td><code>path</code> <em>(å¯é€‰çš„)</em></td> <td>string</td> <td>æˆªå›¾æ–‡ä»¶ä¿å­˜çš„ç›¸å¯¹è·¯å¾„å’Œåç§°ï¼Œè¯¥ç›¸å¯¹è·¯å¾„æ˜¯åŸºäºå‘½ä»¤è¡Œåˆ¶å®šçš„åŸºæœ¬ç›®å½•ã€‚</td></tr> <tr><td><code>options</code> <em>(å¯é€‰çš„)</em></td> <td>Object</td> <td>ç”¨äºå®šä¹‰å±å¹•æˆªå›¾æˆªå–æ–¹å¼çš„é€‰é¡¹ã€‚è¯¦æƒ…è§ä¸‹æ–‡ã€‚</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Take a screenshot of a fieldset'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#reusing-js-code'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#continuous-integration-embedding'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">takeElementScreenshot</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'fieldset'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">nth</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">'my-fixture/important-features.png'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p><code>options</code> å¯¹è±¡åŒ…å«ä»¥ä¸‹å±æ€§</p> <table><thead><tr><th>å±æ€§</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>scrollTargetX</code>, <code>scrollTargetY</code></td> <td>number</td> <td>è¯¥ç‚¹çš„åæ ‡ï¼Œæ˜¯ç›¸å¯¹äºç›®æ ‡å…ƒç´ è®¡ç®—çš„ã€‚</td> <td>å…ƒç´ çš„ä¸­å¿ƒã€‚</td></tr> <tr><td><code>includeMargins</code></td> <td>boolean</td> <td>æ˜¯å¦åŒ…å«å¤–è¾¹è· (margin)</td> <td><code>false</code></td></tr> <tr><td><code>includeBorders</code></td> <td>boolean</td> <td>æ˜¯å¦åŒ…å«è¾¹æ¡† (border)</td> <td><code>true</code></td></tr> <tr><td><code>includePaddings</code></td> <td>boolean</td> <td>æ˜¯å¦åŒ…å«å†…è¾¹è· (padding)</td> <td><code>true</code></td></tr> <tr><td><code>crop</code></td> <td>Object</td> <td>æ˜¯å¦å…è®¸è£å‰ªå±å¹•æˆªå›¾ä¸Šçš„ç›®æ ‡å…ƒç´ ã€‚</td> <td>è£å‰ªåˆ°æ•´ä¸ªå…ƒç´ ã€‚å¦‚æœå®ƒä¸é€‚åˆçª—å£å¤§å°ï¼Œåˆ™ä¸ºå…¶å¯è§éƒ¨åˆ†ã€‚</td></tr></tbody></table> <p><code>crop</code> å¯¹è±¡å…·æœ‰ä»¥ä¸‹å­—æ®µ</p> <table><thead><tr><th>å­—æ®µ</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>top</code></td> <td>number</td> <td>è£å‰ªçŸ©å½¢çš„ä¸Šè¾¹ç¼˜ã€‚å¦‚æœä¼ é€’è´Ÿæ•°ï¼Œåˆ™ä»å…ƒç´ çš„ä¸‹è¾¹ç¼˜è®¡ç®—åæ ‡ã€‚</td></tr> <tr><td><code>left</code></td> <td>number</td> <td>è£å‰ªçŸ©å½¢çš„å·¦è¾¹ç¼˜ã€‚å¦‚æœä¼ é€’è´Ÿæ•°ï¼Œåˆ™ä»å…ƒç´ çš„å³è¾¹ç¼˜è®¡ç®—åæ ‡ã€‚</td></tr> <tr><td><code>bottom</code></td> <td>number</td> <td>è£å‰ªçŸ©å½¢çš„ä¸‹è¾¹ç¼˜ã€‚å¦‚æœä¼ é€’è´Ÿæ•°ï¼Œåˆ™ä»å…ƒç´ çš„ä¸Šè¾¹ç¼˜è®¡ç®—åæ ‡ã€‚</td></tr> <tr><td><code>right</code></td> <td>number</td> <td>è£å‰ªçŸ©å½¢çš„å³è¾¹ç¼˜ã€‚å¦‚æœä¼ é€’è´Ÿæ•°ï¼Œåˆ™ä»å…ƒç´ çš„å·¦è¾¹ç¼˜è®¡ç®—åæ ‡ã€‚</td></tr></tbody></table> <p><img src="//static.mutoe.com/2018/testcafe/screenshot-crop.png" alt="take screenshot"></p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'Take a screenshot of my new avatar'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#change-avatar'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">setFilesToUpload</span><span class="token punctuation">(</span><span class="token string">'#upload-input'</span><span class="token punctuation">,</span> <span class="token string">'img/portrait.jpg'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#submit'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">takeElementScreenshot</span><span class="token punctuation">(</span><span class="token string">'#avatar'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      includeMargins<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      crop<span class="token operator">:</span> <span class="token punctuation">{</span>
        top<span class="token operator">:</span> <span class="token operator">-</span><span class="token number">100</span><span class="token punctuation">,</span>
        left<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
        bottom<span class="token operator">:</span> <span class="token number">30</span><span class="token punctuation">,</span>
        right<span class="token operator">:</span> <span class="token number">200</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h3 id="ä¸Šä¼ -setfilestoupload-no"><a href="#ä¸Šä¼ -setfilestoupload-no" class="header-anchor">#</a> ä¸Šä¼  setFilesToUpload (no)</h3> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h3 id="è°ƒæ•´çª—å£å°ºå¯¸-resize-no"><a href="#è°ƒæ•´çª—å£å°ºå¯¸-resize-no" class="header-anchor">#</a> è°ƒæ•´çª—å£å°ºå¯¸ resize (no)</h3> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h3 id="åŠ¨ä½œé€‰é¡¹-options"><a href="#åŠ¨ä½œé€‰é¡¹-options" class="header-anchor">#</a> åŠ¨ä½œé€‰é¡¹ options</h3> <h4 id="åŸºæœ¬åŠ¨ä½œé€‰é¡¹-basic-action"><a href="#åŸºæœ¬åŠ¨ä½œé€‰é¡¹-basic-action" class="header-anchor">#</a> åŸºæœ¬åŠ¨ä½œé€‰é¡¹ basic action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>speed</code></td> <td>number</td> <td>åŠ¨ä½œçš„é€Ÿåº¦ï¼Œåœ¨ <code>1</code>(æœ€å¤§é€Ÿåº¦) å’Œ <code>0.01</code>(æœ€å°é€Ÿåº¦) ä¹‹é—´</td> <td><code>1</code></td></tr></tbody></table> <p>åŸºæœ¬åŠ¨ä½œé€‰é¡¹ç”¨äº <code>t.pressKey</code>ï¼Œ<code>t.selectText</code>ï¼Œ<code>t.selectTextAreaContent</code> å’Œ <code>t.selectEditableContent</code> åŠ¨ä½œã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">' Parker'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> speed<span class="token operator">:</span> <span class="token number">0.1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="é¼ æ ‡åŠ¨ä½œé€‰é¡¹-mouse-action"><a href="#é¼ æ ‡åŠ¨ä½œé€‰é¡¹-mouse-action" class="header-anchor">#</a> é¼ æ ‡åŠ¨ä½œé€‰é¡¹ mouse action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
    ctrl<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    alt<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    shift<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  offsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  offsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>ctrl</code> <code>alt</code> <code>shift</code> <code>meta</code></td> <td>boolean</td> <td>åœ¨é¼ æ ‡æ“ä½œæœŸé—´è¦æŒ‰ä¸‹çš„ä¿®é¥°é”®</td> <td><code>false</code></td></tr> <tr><td><code>offsetX</code> <code>offsetY</code></td> <td>number</td> <td>é¼ æ ‡æŒ‡é’ˆåæ ‡ï¼Œæ­£æ•´æ•°ä»å·¦ä¸Šè§’è®¡ç®—ï¼Œè´Ÿæ•´æ•°ä»å³ä¸‹è§’è®¡ç®—</td> <td>ç›®æ ‡å…ƒç´ çš„ä¸­å¿ƒ</td></tr> <tr><td><code>speed</code></td> <td>number</td> <td>åŠ¨ä½œçš„é€Ÿåº¦ï¼Œåœ¨ <code>1</code>(æœ€å¤§é€Ÿåº¦) å’Œ <code>0.01</code>(æœ€å°é€Ÿåº¦) ä¹‹é—´</td> <td><code>1</code></td></tr></tbody></table> <p>é¼ æ ‡åŠ¨ä½œé€‰é¡¹ç”¨äº <code>t.drag</code> å’Œ <code>t.hover</code> åŠ¨ä½œã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">drag</span><span class="token punctuation">(</span>sliderHandle<span class="token punctuation">,</span> <span class="token number">360</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      offsetX<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      offsetY<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
        shift<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="æ‹–æ‹½åˆ°å…ƒç´ åŠ¨ä½œé€‰é¡¹-dragtoelement-action"><a href="#æ‹–æ‹½åˆ°å…ƒç´ åŠ¨ä½œé€‰é¡¹-dragtoelement-action" class="header-anchor">#</a> æ‹–æ‹½åˆ°å…ƒç´ åŠ¨ä½œé€‰é¡¹ dragToElement action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
    ctrl<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    alt<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    shift<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  offsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  offsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  destinationOffsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  destinationOffsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>ctrl</code> <code>alt</code> <code>shift</code> <code>meta</code></td> <td>boolean</td> <td>åœ¨é¼ æ ‡æ“ä½œæœŸé—´è¦æŒ‰ä¸‹çš„ä¿®é¥°é”®</td> <td><code>false</code></td></tr> <tr><td><code>offsetX</code> <code>offsetY</code></td> <td>number</td> <td>é¼ æ ‡æŒ‡é’ˆåæ ‡ï¼Œæ­£æ•´æ•°ä»å·¦ä¸Šè§’è®¡ç®—ï¼Œè´Ÿæ•´æ•°ä»å³ä¸‹è§’è®¡ç®—</td> <td>ç›®æ ‡å…ƒç´ çš„ä¸­å¿ƒ</td></tr> <tr><td><code>destinationOffsetX</code> <code>destinationOffsetY</code></td> <td>number</td> <td>é¼ æ ‡æ‹–æ‹½å®Œæˆæ—¶çš„æŒ‡é’ˆåæ ‡ï¼Œæ­£æ•´æ•°ä»å·¦ä¸Šè§’è®¡ç®—ï¼Œè´Ÿæ•´æ•°ä»å³ä¸‹è§’è®¡ç®—</td> <td>ç›®æ ‡å…ƒç´ çš„ä¸­å¿ƒ</td></tr> <tr><td><code>speed</code></td> <td>number</td> <td>åŠ¨ä½œçš„é€Ÿåº¦ï¼Œåœ¨ <code>1</code>(æœ€å¤§é€Ÿåº¦) å’Œ <code>0.01</code>(æœ€å°é€Ÿåº¦) ä¹‹é—´</td> <td><code>1</code></td></tr></tbody></table> <p>æ‹–æ‹½åˆ°å…ƒç´ åŠ¨ä½œé€‰é¡¹ç”¨äº <code>t.dragToElement</code> åŠ¨ä½œã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> fileIcon      <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.file-icon'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">const</span> directoryPane <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.directory'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">dragToElement</span><span class="token punctuation">(</span>fileIcon<span class="token punctuation">,</span> directoryPane<span class="token punctuation">,</span> <span class="token punctuation">{</span>
      offsetX<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      offsetY<span class="token operator">:</span> <span class="token number">10</span><span class="token punctuation">,</span>
      destinationOffsetX<span class="token operator">:</span> <span class="token number">100</span><span class="token punctuation">,</span>
      destinationOffsetY<span class="token operator">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
        shift<span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ç‚¹å‡»åŠ¨ä½œé€‰é¡¹-click-action"><a href="#ç‚¹å‡»åŠ¨ä½œé€‰é¡¹-click-action" class="header-anchor">#</a> ç‚¹å‡»åŠ¨ä½œé€‰é¡¹ click action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
    ctrl<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    alt<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    shift<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  offsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  offsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  caretPos<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>ctrl</code> <code>alt</code> <code>shift</code> <code>meta</code></td> <td>boolean</td> <td>åœ¨é¼ æ ‡æ“ä½œæœŸé—´è¦æŒ‰ä¸‹çš„ä¿®é¥°é”®</td> <td><code>false</code></td></tr> <tr><td><code>offsetX</code> <code>offsetY</code></td> <td>number</td> <td>é¼ æ ‡æŒ‡é’ˆåæ ‡ï¼Œæ­£æ•´æ•°ä»å·¦ä¸Šè§’è®¡ç®—ï¼Œè´Ÿæ•´æ•°ä»å³ä¸‹è§’è®¡ç®—</td> <td>ç›®æ ‡å…ƒç´ çš„ä¸­å¿ƒ</td></tr> <tr><td><code>caretPos</code></td> <td>number</td> <td>å¦‚æœåœ¨è¾“å…¥å…ƒç´ ä¸Šæ‰§è¡ŒåŠ¨ä½œï¼Œåˆ™ä¸ºåˆå§‹æ’å…¥ç¬¦å·ä½ç½®ï¼Œä»é›¶å¼€å§‹çš„æ•´æ•°ã€‚</td> <td>æ–‡æœ¬é•¿åº¦</td></tr> <tr><td><code>speed</code></td> <td>number</td> <td>åŠ¨ä½œçš„é€Ÿåº¦ï¼Œåœ¨ <code>1</code>(æœ€å¤§é€Ÿåº¦) å’Œ <code>0.01</code>(æœ€å°é€Ÿåº¦) ä¹‹é—´</td> <td><code>1</code></td></tr></tbody></table> <p>ç‚¹å‡»æ“ä½œé€‰é¡¹ç”¨äº <code>t.click</code>ï¼Œ<code>t.doubleClick</code> å’Œ <code>t.rightClick</code> åŠ¨ä½œã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> nameInput <span class="token operator">=</span> <span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#developer-name'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Pete Parker'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token punctuation">{</span> caretPos<span class="token operator">:</span> <span class="token number">4</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">pressKey</span><span class="token punctuation">(</span><span class="token string">'r'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="è¾“å…¥åŠ¨ä½œé€‰é¡¹-typing-action"><a href="#è¾“å…¥åŠ¨ä½œé€‰é¡¹-typing-action" class="header-anchor">#</a> è¾“å…¥åŠ¨ä½œé€‰é¡¹ typing action</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  modifiers<span class="token operator">:</span> <span class="token punctuation">{</span>
    ctrl<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    alt<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    shift<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
    meta<span class="token operator">:</span> Boolean
  <span class="token punctuation">}</span><span class="token punctuation">,</span>

  offsetX<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  offsetY<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  caretPos<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  replace<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
  paste<span class="token operator">:</span> Boolean<span class="token punctuation">,</span>
  speed<span class="token operator">:</span> Number
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>ctrl</code> <code>alt</code> <code>shift</code> <code>meta</code></td> <td>boolean</td> <td>åœ¨é¼ æ ‡æ“ä½œæœŸé—´è¦æŒ‰ä¸‹çš„ä¿®é¥°é”®</td> <td><code>false</code></td></tr> <tr><td><code>offsetX</code> <code>offsetY</code></td> <td>number</td> <td>é¼ æ ‡æŒ‡é’ˆåæ ‡ï¼Œæ­£æ•´æ•°ä»å·¦ä¸Šè§’è®¡ç®—ï¼Œè´Ÿæ•´æ•°ä»å³ä¸‹è§’è®¡ç®—</td> <td>ç›®æ ‡å…ƒç´ çš„ä¸­å¿ƒ</td></tr> <tr><td><code>caretPos</code></td> <td>number</td> <td>å¦‚æœåœ¨è¾“å…¥å…ƒç´ ä¸Šæ‰§è¡ŒåŠ¨ä½œï¼Œåˆ™ä¸ºåˆå§‹æ’å…¥ç¬¦å·ä½ç½®ï¼Œä»é›¶å¼€å§‹çš„æ•´æ•°ã€‚</td> <td>æ–‡æœ¬é•¿åº¦</td></tr> <tr><td><code>replace</code></td> <td>boolean</td> <td>æ˜¯å¦æ›¿æ¢åŸæœ‰æ–‡æœ¬</td> <td><code>false</code></td></tr> <tr><td><code>paste</code></td> <td>boolean</td> <td>æ˜¯å¦ä½¿ç”¨ç²˜è´´çš„æ–¹å¼ä¸€æ¬¡æ€§é”®å…¥æ–‡æœ¬</td> <td><code>false</code></td></tr> <tr><td><code>speed</code></td> <td>number</td> <td>åŠ¨ä½œçš„é€Ÿåº¦ï¼Œåœ¨ <code>1</code>(æœ€å¤§é€Ÿåº¦) å’Œ <code>0.01</code>(æœ€å°é€Ÿåº¦) ä¹‹é—´</td> <td><code>1</code></td></tr></tbody></table> <p>è¾“å…¥åŠ¨ä½œé€‰é¡¹ç”¨äº <code>t.typeText</code> åŠ¨ä½œã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My Test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Peter'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">typeText</span><span class="token punctuation">(</span>nameInput<span class="token punctuation">,</span> <span class="token string">'Parker'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> replace<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="æ–­è¨€-2"><a href="#æ–­è¨€-2" class="header-anchor">#</a> æ–­è¨€</h2> <p>ä½ å¯ä»¥ä½¿ç”¨æ–­è¨€æ¥æ£€æŸ¥æµ‹è¯•çš„ç½‘é¡µçŠ¶æ€æ˜¯å¦ä¸é¢„æœŸçŠ¶æ€åŒ¹é…ã€‚<br>
TestCafe æä¾›äº†ä¸€ç»„åŸºäºè¡Œä¸ºé©±åŠ¨å¼€å‘é£æ ¼ï¼ˆBDDé£æ ¼ï¼‰çš„æ–­è¨€æ–¹æ³•ã€‚</p> <h3 id="æ„é€ æ–­è¨€"><a href="#æ„é€ æ–­è¨€" class="header-anchor">#</a> æ„é€ æ–­è¨€</h3> <p>è¦æ„é€ ä¸€ä¸ªæ–­è¨€ï¼Œå¯ä»¥ä½¿ç”¨æµ‹è¯•æ§åˆ¶å™¨ (<code>t</code>) çš„ expect æ–¹æ³•ã€‚</p> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span>
</code></pre></div><p>è¿™ä¸ªæ„é€ æ–¹æ³•æ¥å—ä¸€ä¸ªå®é™…å€¼ï¼Œå¯ä»¥æ˜¯ selector çš„ DOM èŠ‚ç‚¹çŠ¶æ€å±æ€§æˆ–è€…æ˜¯ä¸€ä¸ªä»é¡µé¢ä¸­ä¾¦å¬åˆ°çš„ promise å¯¹è±¡ã€‚
TestCafe ä¼šè‡ªåŠ¨ç­‰å¾…èŠ‚ç‚¹çŠ¶æ€å€¼çš„å˜åŠ¨ã€‚</p> <p>æ¥ä¸‹æ¥è·Ÿä¸€ä¸ªæ–­è¨€æ–¹æ³•ï¼Œä»–æ¥å—æœŸæœ›å€¼å’Œä¸€äº›å…¶ä»–çš„å¯é€‰å‚æ•°ã€‚</p> <h3 id="æ–­è¨€æ–¹æ³•"><a href="#æ–­è¨€æ–¹æ³•" class="header-anchor">#</a> æ–­è¨€æ–¹æ³•</h3> <h4 id="ç­‰äº-eql"><a href="#ç­‰äº-eql" class="header-anchor">#</a> ç­‰äº eql</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>expected</code></td> <td>Any</td> <td>æœŸæœ›å€¼</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šé€šè¿‡'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šå¤±è´¥ï¼Œå¹¶ä¸”è¿™å¥è¯ä¼šè¢«æ‰“å°å‡ºæ¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.className'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ä¸ç­‰äº-noteql"><a href="#ä¸ç­‰äº-noteql" class="header-anchor">#</a> ä¸ç­‰äº notEql</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notEql</span><span class="token punctuation">(</span> unexpected <span class="token punctuation">[</span><span class="token punctuation">,</span> message<span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>unexpected</code></td> <td>Any</td> <td>ä¸æœŸæœ›çš„å€¼</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notEql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šå¤±è´¥ï¼Œå¹¶ä¸”è¿™å¥è¯ä¼šè¢«æ‰“å°å‡ºæ¥'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notEql</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'foo'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šé€šè¿‡'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'.className'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>count<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notEql</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="çœŸå€¼-ok"><a href="#çœŸå€¼-ok" class="header-anchor">#</a> çœŸå€¼ ok</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šé€šè¿‡'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šå¤±è´¥ï¼Œå¹¶ä¸”è¿™å¥è¯ä¼šè¢«æ‰“å°å‡ºæ¥'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å‡å€¼-notok"><a href="#å‡å€¼-notok" class="header-anchor">#</a> å‡å€¼ notOk</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span> <span class="token punctuation">[</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'ok'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span><span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šå¤±è´¥ï¼Œå¹¶ä¸”è¿™å¥è¯ä¼šè¢«æ‰“å°å‡ºæ¥'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span><span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šé€šè¿‡'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>exists<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notOk</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="åŒ…å«-contains"><a href="#åŒ…å«-contains" class="header-anchor">#</a> åŒ…å« contains</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>expected</code></td> <td>Any</td> <td>æœŸæœ›å€¼</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo bar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šå­—ç¬¦ä¸² &quot;foo bar&quot; é‡Œé¢ä¸å«æœ‰æœŸæœ›çš„ &quot;bar&quot; å­ä¸²'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šæ•°ç»„ä¸­ä¸å«æœ‰æœŸæœ›çš„å€¼'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> hello<span class="token operator">:</span> <span class="token string">'universe'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šå¯¹è±¡ä¸­ä¸å«æœ‰æœŸæœ›çš„å±æ€§'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> getLocation <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">contains</span><span class="token punctuation">(</span><span class="token string">'example.com'</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šç½‘å€ä¸åŒ…å«æœŸæœ›çš„å€¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ä¸åŒ…å«-notcontains"><a href="#ä¸åŒ…å«-notcontains" class="header-anchor">#</a> ä¸åŒ…å« notContains</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span> unexpected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>unexpected</code></td> <td>Any</td> <td>ä¸æœŸæœ›çš„å€¼</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foo bar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šå­—ç¬¦ä¸²ä¸­å«æœ‰ä¸æœŸæœ›çš„å­ä¸²'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šæ•°ç»„ä¸­å«æœ‰ä¸æœŸæœ›çš„å€¼'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> foo<span class="token operator">:</span> <span class="token string">'bar'</span><span class="token punctuation">,</span> hello<span class="token operator">:</span> <span class="token string">'universe'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span><span class="token punctuation">{</span> buzz<span class="token operator">:</span> <span class="token string">'abc'</span> <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šå¯¹è±¡ä¸­å«æœ‰ä¸æœŸæœ›çš„å±æ€§'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> getLocation <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notContains</span><span class="token punctuation">(</span><span class="token string">'example.com'</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šç½‘å€åŒ…å«äº†ä¸è¢«æœŸæœ›çš„å€¼'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ç±»å‹ç­‰äº-tyoeof"><a href="#ç±»å‹ç­‰äº-tyoeof" class="header-anchor">#</a> ç±»å‹ç­‰äº tyoeOf</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span> typeName <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>typeName</code></td> <td>string</td> <td>æœŸæœ›çš„ <code>actual</code> çš„ç±»å‹</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token operator">:</span> <span class="token string">'bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span><span class="token string">'object'</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šæ¯”è¾ƒå€¼ä¸æ˜¯å¯¹è±¡'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token regex">/bar/</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span><span class="token string">'regexp'</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šæ¯”è¾ƒå€¼ä¸æ˜¯æ­£åˆ™è¡¨è¾¾å¼'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token keyword">null</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šæ¯”è¾ƒå€¼ä¸ä¸ºnull'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'attr'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">typeOf</span><span class="token punctuation">(</span><span class="token string">'string'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ç±»å‹ä¸ç­‰äº-nottypeof"><a href="#ç±»å‹ä¸ç­‰äº-nottypeof" class="header-anchor">#</a> ç±»å‹ä¸ç­‰äº notTypeOf</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notTypeOf</span><span class="token punctuation">(</span> typeName <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>typeName</code></td> <td>string</td> <td>ä¸æœŸæœ›çš„ <code>actual</code> çš„ç±»å‹</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'bar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notTypeOf</span><span class="token punctuation">(</span><span class="token string">'number'</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šæ¯”è¾ƒå€¼ä¸æ˜¯æ•°å­—ç±»å‹'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getAttribute</span><span class="token punctuation">(</span><span class="token string">'attr'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notTypeOf</span><span class="token punctuation">(</span><span class="token string">'null'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å¤§äº-gt"><a href="#å¤§äº-gt" class="header-anchor">#</a> å¤§äº gt</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>Any</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>expected</code></td> <td>Any</td> <td>æœŸæœ›çš„å€¼</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token string">'ç”¨ä¾‹æœªé€šè¿‡ï¼šæ¯”è¾ƒå€¼åº”è¯¥æ¯” 2 å¤§'</span><span class="token punctuation">)</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>clientWidth<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gt</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="å¤§äºç­‰äº-gte"><a href="#å¤§äºç­‰äº-gte" class="header-anchor">#</a> å¤§äºç­‰äº gte</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">gte</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”¨æ³•åŒ <a href="#%E5%A4%A7%E4%BA%8E-gt"><code>gt</code></a></p> <h4 id="å°äº-lt"><a href="#å°äº-lt" class="header-anchor">#</a> å°äº lt</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lt</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”¨æ³•åŒ <a href="#%E5%A4%A7%E4%BA%8E-gt"><code>gt</code></a></p> <h4 id="å°äºç­‰äº-lte"><a href="#å°äºç­‰äº-lte" class="header-anchor">#</a> å°äºç­‰äº lte</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">lte</span><span class="token punctuation">(</span> expected <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”¨æ³•åŒ <a href="#%E5%A4%A7%E4%BA%8E-gt"><code>gt</code></a></p> <h4 id="åœ¨æŸä¸ªèŒƒå›´-within"><a href="#åœ¨æŸä¸ªèŒƒå›´-within" class="header-anchor">#</a> åœ¨æŸä¸ªèŒƒå›´ within</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> finish <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>number</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>start</code></td> <td>number</td> <td>èŒƒå›´ä¸‹é™ï¼ˆåŒ…å«ï¼‰</td></tr> <tr><td><code>finish</code></td> <td>number</td> <td>èŒƒå›´ä¸Šé™ï¼ˆåŒ…å«ï¼‰</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šé€šè¿‡'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#element'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>scrollTop<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">within</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="ä¸åœ¨æŸä¸ªèŒƒå›´-notwithin"><a href="#ä¸åœ¨æŸä¸ªèŒƒå›´-notwithin" class="header-anchor">#</a> ä¸åœ¨æŸä¸ªèŒƒå›´ notWithin</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notWithin</span><span class="token punctuation">(</span> start<span class="token punctuation">,</span> finish <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”¨æ³•åŒ <a href="#%E5%9C%A8%E6%9F%90%E4%B8%AA%E8%8C%83%E5%9B%B4-within"><code>within</code></a></p> <h4 id="æ­£åˆ™åŒ¹é…-match"><a href="#æ­£åˆ™åŒ¹é…-match" class="header-anchor">#</a> æ­£åˆ™åŒ¹é… match</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span> regexp <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>actual</code></td> <td>string</td> <td>æ¯”è¾ƒå€¼ï¼Œå¦‚æœæ˜¯ä¸€ä¸ª promise å¯¹è±¡ï¼ŒTestCafe ä¼šè‡ªåŠ¨ç­‰å¾…å€¼çš„å˜åŒ–</td></tr> <tr><td><code>regexp</code></td> <td>RegExp</td> <td>ç”¨æ¥åŒ¹é… <code>actual</code> çš„æ­£åˆ™è¡¨è¾¾å¼</td></tr> <tr><td><code>message</code> <em>(optional)</em></td> <td>string</td> <td>å¦‚æœæµ‹è¯•å¤±è´¥ï¼Œéœ€è¦åœ¨æµ‹è¯•æŠ¥å‘Šä¸­è¾“å‡ºçš„å­—ç¬¦ä¸²</td></tr> <tr><td><code>options</code> <em>(optional)</em></td> <td>Object</td> <td>å‚è§<a href="#%E6%96%AD%E8%A8%80%E9%80%89%E9%A1%B9">æ–­è¨€é€‰é¡¹</a></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token string">'foobar'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/^f/</span><span class="token punctuation">,</span> <span class="token string">'è¿™ä¸ªæ–­è¨€å°†ä¼šé€šè¿‡'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token function">test</span><span class="token punctuation">(</span><span class="token string">'My test'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token parameter">t</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> getLocation <span class="token operator">=</span> <span class="token function">ClientFunction</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> document<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">getLocation</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span><span class="token regex">/\.com/</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h4 id="éæ­£åˆ™åŒ¹é…-notmatch"><a href="#éæ­£åˆ™åŒ¹é…-notmatch" class="header-anchor">#</a> éæ­£åˆ™åŒ¹é… notMatch</h4> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span> actual <span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">notMatch</span><span class="token punctuation">(</span> regexp <span class="token punctuation">[</span><span class="token punctuation">,</span> message <span class="token punctuation">]</span> <span class="token punctuation">[</span><span class="token punctuation">,</span> options <span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre></div><p>ç”¨æ³•åŒ <a href="#%E6%AD%A3%E5%88%99%E5%8C%B9%E9%85%8D-match"><code>match</code></a></p> <h3 id="æ–­è¨€é€‰é¡¹"><a href="#æ–­è¨€é€‰é¡¹" class="header-anchor">#</a> æ–­è¨€é€‰é¡¹</h3> <div class="language-js extra-class"><pre class="language-js"><code><span class="token punctuation">{</span>
  timeout<span class="token operator">:</span> Number<span class="token punctuation">,</span>
  allowUnawaitedPromise<span class="token operator">:</span> Boolean
<span class="token punctuation">}</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th> <th>é»˜è®¤å€¼</th></tr></thead> <tbody><tr><td><code>timeout</code></td> <td>number</td> <td>å¦‚æœåœ¨æ–­è¨€ä¸­ä½¿ç”¨äº†å±æ€§é€‰æ‹©å™¨æˆ–å®¢æˆ·ç«¯å‡½æ•°ï¼Œå¯ç­‰å¾…çš„æœ€å¤§æ—¶é—´ (å•ä½ï¼šms)</td> <td></td></tr> <tr><td><code>allowUnawaitedPromise</code></td> <td>boolean</td> <td>å¦‚æœä½ è¦æ–­è¨€ä¸€ä¸ªå¸¸è§„çš„ promise æ–¹æ³•ï¼Œè¯·å°†è¯¥é€‰é¡¹è®¾ç½®ä¸º <code>true</code></td> <td></td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">Selector</span><span class="token punctuation">(</span><span class="token string">'#elementId'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerText<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token string">'text'</span><span class="token punctuation">,</span> <span class="token string">'åœ¨ 500ms å†…æ£€æŸ¥å…ƒç´ çš„æ–‡æœ¬'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> timeout<span class="token operator">:</span> <span class="token number">500</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t<span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span><span class="token function">doSomethingAsync</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">ok</span><span class="token punctuation">(</span><span class="token string">'æ£€æŸ¥å¼‚æ­¥å‡½æ•°æ˜¯å¦å«å›äº† promise å¯¹è±¡'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> allowUnawaitedPromise<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="å®¢æˆ·ç«¯æ–¹æ³•-no"><a href="#å®¢æˆ·ç«¯æ–¹æ³•-no" class="header-anchor">#</a> å®¢æˆ·ç«¯æ–¹æ³• (no)</h2> <blockquote><p>æš‚æœªæ›´æ–°</p></blockquote> <h2 id="ç­‰å¾…"><a href="#ç­‰å¾…" class="header-anchor">#</a> ç­‰å¾…</h2> <p>æ— è®ºå‡ºäºä»€ä¹ˆåŸå› ï¼Œè®©æµ‹è¯•æš‚åœä¸€å°ä¼š</p> <div class="language-js extra-class"><pre class="language-js"><code>t<span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span> timeout <span class="token punctuation">)</span>
</code></pre></div><table><thead><tr><th>å‚æ•°</th> <th>ç±»å‹</th> <th>æè¿°</th></tr></thead> <tbody><tr><td><code>timeout</code></td> <td>number</td> <td>æš‚åœçš„æŒç»­æ—¶é—´ï¼Œå•ä½ ms</td></tr></tbody></table> <div class="language-js extra-class"><pre class="language-js"><code><span class="token keyword">await</span> t
  <span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span><span class="token string">'#play-1-sec-animation'</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">expect</span><span class="token punctuation">(</span>header<span class="token punctuation">.</span><span class="token function">getStyleProperty</span><span class="token punctuation">(</span><span class="token string">'opacity'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">eql</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/justwe7/blog/edit/feature/å¹¿åº¦çŸ¥è¯†/testcafe.md" target="_blank" rel="noopener noreferrer">çº æ­£é”™è¯¯</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">æœ€è¿‘æäº¤:</span> <span class="time">2/19/2021, 5:39:29 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/å¹¿åº¦çŸ¥è¯†/shell-è¿ç®—ç¬¦.html" class="prev">shell-è¿ç®—ç¬¦</a></span> <span class="next"><a href="/blog/å¹¿åº¦çŸ¥è¯†/vimiumè‡ªç”¨é€ŸæŸ¥.html">vimiumè‡ªç”¨é€ŸæŸ¥</a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/blog/assets/js/app.2b65cc84.js" defer></script><script src="/blog/assets/js/2.9c8da183.js" defer></script><script src="/blog/assets/js/45.294aa832.js" defer></script>
  </body>
</html>
