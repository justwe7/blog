<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>git cherry-pick 备忘 | 前端日志</title>
    <meta name="description" content="土豆和土豆丝的学习记录">
    <link rel="icon" href="/blog/favorite.ico">
    
    <link rel="preload" href="/blog/assets/css/0.styles.244ca03c.css" as="style"><link rel="preload" href="/blog/assets/js/app.2b65cc84.js" as="script"><link rel="preload" href="/blog/assets/js/2.9c8da183.js" as="script"><link rel="preload" href="/blog/assets/js/26.8143fab4.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.f4b9808b.js"><link rel="prefetch" href="/blog/assets/js/11.17753fa8.js"><link rel="prefetch" href="/blog/assets/js/12.eed41aa4.js"><link rel="prefetch" href="/blog/assets/js/13.2cbdc8f2.js"><link rel="prefetch" href="/blog/assets/js/14.c71b01e9.js"><link rel="prefetch" href="/blog/assets/js/15.4b7c71de.js"><link rel="prefetch" href="/blog/assets/js/16.55b235e6.js"><link rel="prefetch" href="/blog/assets/js/17.611a1b55.js"><link rel="prefetch" href="/blog/assets/js/18.42680970.js"><link rel="prefetch" href="/blog/assets/js/19.6b0ff29f.js"><link rel="prefetch" href="/blog/assets/js/20.49fb4f8f.js"><link rel="prefetch" href="/blog/assets/js/21.5490e3f0.js"><link rel="prefetch" href="/blog/assets/js/22.0cbe4eb6.js"><link rel="prefetch" href="/blog/assets/js/23.0d6f1752.js"><link rel="prefetch" href="/blog/assets/js/24.4207d03c.js"><link rel="prefetch" href="/blog/assets/js/25.047d0f1e.js"><link rel="prefetch" href="/blog/assets/js/27.d4112cc7.js"><link rel="prefetch" href="/blog/assets/js/28.883ca809.js"><link rel="prefetch" href="/blog/assets/js/29.eb0a0979.js"><link rel="prefetch" href="/blog/assets/js/3.d2b25e93.js"><link rel="prefetch" href="/blog/assets/js/30.dc4a32e4.js"><link rel="prefetch" href="/blog/assets/js/31.bb74dcc9.js"><link rel="prefetch" href="/blog/assets/js/32.19b9b2ad.js"><link rel="prefetch" href="/blog/assets/js/33.1c5b491a.js"><link rel="prefetch" href="/blog/assets/js/34.4449dbb9.js"><link rel="prefetch" href="/blog/assets/js/35.de6137d1.js"><link rel="prefetch" href="/blog/assets/js/36.f90f55dc.js"><link rel="prefetch" href="/blog/assets/js/37.6774285b.js"><link rel="prefetch" href="/blog/assets/js/38.40333629.js"><link rel="prefetch" href="/blog/assets/js/39.93e0dfab.js"><link rel="prefetch" href="/blog/assets/js/4.31f14a68.js"><link rel="prefetch" href="/blog/assets/js/40.ae2ff175.js"><link rel="prefetch" href="/blog/assets/js/41.18cb6f45.js"><link rel="prefetch" href="/blog/assets/js/42.d18f15b7.js"><link rel="prefetch" href="/blog/assets/js/43.93d1cf0f.js"><link rel="prefetch" href="/blog/assets/js/44.2e68a699.js"><link rel="prefetch" href="/blog/assets/js/45.294aa832.js"><link rel="prefetch" href="/blog/assets/js/46.4173b20d.js"><link rel="prefetch" href="/blog/assets/js/47.4bcbe3f2.js"><link rel="prefetch" href="/blog/assets/js/48.16b7b98a.js"><link rel="prefetch" href="/blog/assets/js/49.89a9d560.js"><link rel="prefetch" href="/blog/assets/js/5.9f0256c8.js"><link rel="prefetch" href="/blog/assets/js/50.3d1fcdf9.js"><link rel="prefetch" href="/blog/assets/js/51.33050d1b.js"><link rel="prefetch" href="/blog/assets/js/52.fe886e37.js"><link rel="prefetch" href="/blog/assets/js/53.a237ef53.js"><link rel="prefetch" href="/blog/assets/js/54.0817b5a4.js"><link rel="prefetch" href="/blog/assets/js/55.34909e91.js"><link rel="prefetch" href="/blog/assets/js/56.833686de.js"><link rel="prefetch" href="/blog/assets/js/57.ee3140fa.js"><link rel="prefetch" href="/blog/assets/js/58.a7e7d812.js"><link rel="prefetch" href="/blog/assets/js/6.9afed123.js"><link rel="prefetch" href="/blog/assets/js/7.b09c9cf4.js"><link rel="prefetch" href="/blog/assets/js/8.bbc14bdf.js"><link rel="prefetch" href="/blog/assets/js/9.2f86661d.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.244ca03c.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">前端日志</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"> <a href="https://github.com/justwe7/blog" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>基础概念</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/基础概念/chrome-devtools加载数据失败.html" class="sidebar-link">chrome-devtools加载数据失...</a></li><li><a href="/blog/基础概念/echarts地图绘制代码留用.html" class="sidebar-link">echarts地图绘制代码留用</a></li><li><a href="/blog/基础概念/eslint针对文件忽略语法.html" class="sidebar-link">eslint针对文件忽略语法</a></li><li><a href="/blog/基础概念/for-in遍历对象属性的顺序与定义是否相同.html" class="sidebar-link">for-in遍历对象属性的顺序与定义是否...</a></li><li><a href="/blog/基础概念/gitcherry-pick备忘.html" class="active sidebar-link">gitcherry-pick备忘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/基础概念/gitcherry-pick备忘.html#git-cherry-pick-备忘" class="sidebar-link">git cherry-pick 备忘</a></li></ul></li><li><a href="/blog/基础概念/git基本工作流程.html" class="sidebar-link">git基本工作流程</a></li><li><a href="/blog/基础概念/git如何保持commit信息整洁.html" class="sidebar-link">git如何保持commit信息整洁</a></li><li><a href="/blog/基础概念/git常用的分支操作.html" class="sidebar-link">git常用的分支操作</a></li><li><a href="/blog/基础概念/nginx控制.html" class="sidebar-link">nginx控制</a></li><li><a href="/blog/基础概念/vue中v-model和sync修饰符.html" class="sidebar-link">vue中v-model和sync修饰符</a></li><li><a href="/blog/基础概念/函数定义的5种方式.html" class="sidebar-link">函数定义的5种方式</a></li><li><a href="/blog/基础概念/攻略chrome控制台.html" class="sidebar-link">攻略chrome控制台</a></li><li><a href="/blog/基础概念/模块化.html" class="sidebar-link">模块化</a></li><li><a href="/blog/基础概念/配置多个git-ssh.html" class="sidebar-link">配置多个git-ssh</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>广度知识</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>深度知识</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h2 id="git-cherry-pick-备忘"><a href="#git-cherry-pick-备忘" class="header-anchor">#</a> git cherry-pick 备忘</h2> <h3 id="基本用法"><a href="#基本用法" class="header-anchor">#</a> 基本用法</h3> <p><code>git cherry-pick</code> 命令的作用，就是将指定的提交（commit）应用于其他分支。</p> <p><code>git cherry-pick &lt;commitHash&gt;</code> 会将指定的提交commitHash，应用于当前分支。这会在当前分支产生一个新的提交，它们的哈希值会不一样。</p> <p>举例来说，代码仓库有master和feature两个分支。</p> <div class="language- extra-class"><pre class="language-text"><code>    a - b - c - d   Master
         \
           e - f - g Feature
</code></pre></div><p>现在将提交 <code>f</code> 应用到 <code>master</code> 分支:</p> <div class="language- extra-class"><pre class="language-text"><code>git checkout master # 切换到 master 分支

git cherry-pick f # Cherry pick 操作
</code></pre></div><p>上面的操作完成以后，代码库就变成了下面:</p> <div class="language- extra-class"><pre class="language-text"><code>    a - b - c - d - f   Master
         \
           e - f - g    Feature
</code></pre></div><p><code>git cherry-pick</code> 命令的参数，不一定是提交的哈希值，分支名也是可以的: <code>git cherry-pick feature</code> 表示将 <code>feature</code> 分支的最近一次提交，转移到当前分支。</p> <h3 id="需求场景"><a href="#需求场景" class="header-anchor">#</a> 需求场景</h3> <p>假如存在并行开发的需求，A需求开发（ <code>feat-a</code> ）了一段时间，后续接入B需求 ( <code>feat-b</code> )，上线时间节点不能确定先后，可能A先上也可能B先上。但是 <code>feat-b</code> 需要复用 <code>feat-a</code> 的某几次提交，手动复制粘贴文件的话错误率有点高，这时可以考虑使用 <code>cherry-pick</code></p> <blockquote><p>如果一次提交一股脑的改动都在一个commit里面就复杂了，所以说平时要保持良好的 commit 习惯。按<strong>需</strong>提交，而不是按次提交。</p></blockquote> <div class="language- extra-class"><pre class="language-text"><code>    a - b - c   Master
        |    \
         \     g - h      feat-b
          \  
           d - e - f      feat-a
</code></pre></div><p>现在想要把 <code>feat-a</code> 的 <code>e</code> commit改动应用到 <code>feat-b</code> 中</p> <div class="language- extra-class"><pre class="language-text"><code>git checkout feat-b
git cherry-pick e       #e 的commit hash
</code></pre></div><p>然后 <code>feat-b</code> 后面会追加一条 <code>feat-a / e</code> 的改动</p> <div class="language- extra-class"><pre class="language-text"><code>    a - b - c   Master
        |    \
         \     g - h - e     feat-b
          \  
           d - e - f         feat-a
</code></pre></div><h3 id="转移多个提交"><a href="#转移多个提交" class="header-anchor">#</a> 转移多个提交</h3> <h4 id="指定的多个commit转移"><a href="#指定的多个commit转移" class="header-anchor">#</a> 指定的多个commit转移</h4> <div class="language- extra-class"><pre class="language-text"><code>git cherry-pick &lt;HashA&gt; &lt;HashB&gt;
</code></pre></div><p>将 A 和 B 两个提交应用到当前分支。这会在当前分支生成两个对应的新提交。</p> <h3 id="转移连续的commit提交"><a href="#转移连续的commit提交" class="header-anchor">#</a> 转移连续的commit提交</h3> <div class="language- extra-class"><pre class="language-text"><code>git cherry-pick A..B
</code></pre></div><p>可以转移从 A 到 B 的所有提交。它们必须按照正确的顺序放置：<strong>提交 A 必须早于提交 B</strong>，否则命令将失败，但不会报错</p> <blockquote><p>注意，使用上面的命令，提交 A 将不会包含在 Cherry pick 中。如果要包含提交 A，可以使用
<code>git cherry-pick A^..B</code></p></blockquote> <h3 id="指令参数-options"><a href="#指令参数-options" class="header-anchor">#</a> 指令参数 -options</h3> <ol><li><code>-e，--edit</code></li></ol> <p>打开外部编辑器，编辑提交信息。</p> <ol start="2"><li><code>-n，--no-commit</code></li></ol> <p>只更新工作区和暂存区，不产生新的提交</p> <ol start="3"><li><code>-x</code></li></ol> <p>在提交信息的末尾追加一行(cherry picked from commit ...)，方便以后查到这个提交是如何产生的。</p> <ol start="4"><li><code>-s，--signoff</code></li></ol> <p>在提交信息的末尾追加一行操作者的签名，表示是谁进行了这个操作。</p> <ol start="5"><li><code>-m parent-number，--mainline parent-number</code></li></ol> <p>如果原始提交是一个合并节点，来自于两个分支的合并，那么 Cherry pick 默认将失败，因为它不知道应该采用哪个分支的代码变动。</p> <blockquote><p>-m 配置项告诉 Git，应该采用哪个分支的变动。它的参数parent-number是一个从1开始的整数，代表原始提交的父分支编号。</p> <p>比如 <code>git cherry-pick -m 1 &lt;commitHash&gt;</code> 命令表示，Cherry pick 采用提交commitHash来自编号1的父分支的变动。</p> <p>一般来说，1号父分支是接受变动的分支（the branch being merged into），2号父分支是作为变动来源的分支（the branch being merged from）。</p></blockquote> <h3 id="代码冲突"><a href="#代码冲突" class="header-anchor">#</a> 代码冲突</h3> <p>如果操作过程中发生代码冲突，Cherry pick 会停下来，让用户决定如何继续操作</p> <ol><li><p><code>--continue</code>
用户解决代码冲突后:</p> <ul><li>第一步将修改的文件重新加入暂存区 <code>git add .</code></li> <li>第二步使用 <code>git cherry-pick --continue</code>，让 Cherry pick 过程继续执行</li></ul></li> <li><p><code>--abort</code></p></li></ol> <p>稳妥之举~~。发生代码冲突后，放弃合并，回到操作前的样子。</p> <ol start="3"><li><code>--quit</code></li></ol> <p>发生代码冲突后，退出 Cherry pick，但是不回到操作前的样子</p> <h3 id="转移另一个仓库的提交"><a href="#转移另一个仓库的提交" class="header-anchor">#</a> 转移另一个仓库的提交</h3> <ul><li>前提是先把目标的仓库添加到当前的远程仓库：<code>git remote add target git://gitUrl</code></li> <li>然后，将远程代码抓取到本地 <code>git fetch target</code></li> <li>检查一下要从远程仓库转移的提交，获取它的哈希值 <code>git log target/master</code></li> <li>使用git cherry-pick 命令转移提交 <code>git cherry-pick &lt;commitHash&gt;</code></li></ul> <p>趁着今天有类似的场景，终于照着阮老师的<a href="https://www.ruanyifeng.com/blog/2020/04/git-cherry-pick.html" target="_blank" rel="noopener noreferrer">教程<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>把心心念念很久又没有实践的 <code>cherry-pick</code> 实践了一遍</p></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/justwe7/blog/edit/feature/基础概念/gitcherry-pick备忘.md" target="_blank" rel="noopener noreferrer">纠正错误</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">最近提交:</span> <span class="time">10/31/2020, 3:44:56 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/基础概念/for-in遍历对象属性的顺序与定义是否相同.html" class="prev">for-in遍历对象属性的顺序与定义是否...</a></span> <span class="next"><a href="/blog/基础概念/git基本工作流程.html">git基本工作流程</a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----><div></div></div></div>
    <script src="/blog/assets/js/app.2b65cc84.js" defer></script><script src="/blog/assets/js/2.9c8da183.js" defer></script><script src="/blog/assets/js/26.8143fab4.js" defer></script>
  </body>
</html>
